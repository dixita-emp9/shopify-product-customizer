import{t as Nl,v as tc,r as bh,a as At,R as Jt,p as Ft}from"./chunk-TMI4QPZX-CWrFqL2g.js";import{c as Lh}from"./_index-Rlee23r_.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ih=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Oh=Lh("info",Ih);var Qi={exports:{}},fr={},ma={},ya={},Fl;function vt(){return Fl||(Fl=1,(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o._registerNode=o.Konva=o.glob=void 0;const p=Math.PI/180;function A(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}o.glob=typeof Nl<"u"?Nl:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},o.Konva={_global:o.glob,version:"9.3.22",isBrowser:A(),isUnminified:/param/.test((function(R){}).toString()),dblClickWindow:400,getAngle(R){return o.Konva.angleDeg?R*p:R},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return o.Konva.DD.isDragging},isTransforming(){var R;return(R=o.Konva.Transformer)===null||R===void 0?void 0:R.isTransforming()},isDragReady(){return!!o.Konva.DD.node},releaseCanvasOnDestroy:!0,document:o.glob.document,_injectGlobal(R){o.glob.Konva=R}};const O=R=>{o.Konva[R.prototype.getClassName()]=R};o._registerNode=O,o.Konva._injectGlobal(o.Konva)})(ya)),ya}var va={},Al;function Ut(){return Al||(Al=1,(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.Util=o.Transform=void 0;const p=vt();class A{constructor(v=[1,0,0,1,0,0]){this.dirty=!1,this.m=v&&v.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new A(this.m)}copyInto(v){v.m[0]=this.m[0],v.m[1]=this.m[1],v.m[2]=this.m[2],v.m[3]=this.m[3],v.m[4]=this.m[4],v.m[5]=this.m[5]}point(v){const P=this.m;return{x:P[0]*v.x+P[2]*v.y+P[4],y:P[1]*v.x+P[3]*v.y+P[5]}}translate(v,P){return this.m[4]+=this.m[0]*v+this.m[2]*P,this.m[5]+=this.m[1]*v+this.m[3]*P,this}scale(v,P){return this.m[0]*=v,this.m[1]*=v,this.m[2]*=P,this.m[3]*=P,this}rotate(v){const P=Math.cos(v),I=Math.sin(v),z=this.m[0]*P+this.m[2]*I,E=this.m[1]*P+this.m[3]*I,T=this.m[0]*-I+this.m[2]*P,M=this.m[1]*-I+this.m[3]*P;return this.m[0]=z,this.m[1]=E,this.m[2]=T,this.m[3]=M,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(v,P){const I=this.m[0]+this.m[2]*P,z=this.m[1]+this.m[3]*P,E=this.m[2]+this.m[0]*v,T=this.m[3]+this.m[1]*v;return this.m[0]=I,this.m[1]=z,this.m[2]=E,this.m[3]=T,this}multiply(v){const P=this.m[0]*v.m[0]+this.m[2]*v.m[1],I=this.m[1]*v.m[0]+this.m[3]*v.m[1],z=this.m[0]*v.m[2]+this.m[2]*v.m[3],E=this.m[1]*v.m[2]+this.m[3]*v.m[3],T=this.m[0]*v.m[4]+this.m[2]*v.m[5]+this.m[4],M=this.m[1]*v.m[4]+this.m[3]*v.m[5]+this.m[5];return this.m[0]=P,this.m[1]=I,this.m[2]=z,this.m[3]=E,this.m[4]=T,this.m[5]=M,this}invert(){const v=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),P=this.m[3]*v,I=-this.m[1]*v,z=-this.m[2]*v,E=this.m[0]*v,T=v*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),M=v*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=P,this.m[1]=I,this.m[2]=z,this.m[3]=E,this.m[4]=T,this.m[5]=M,this}getMatrix(){return this.m}decompose(){const v=this.m[0],P=this.m[1],I=this.m[2],z=this.m[3],E=this.m[4],T=this.m[5],M=v*z-P*I,U={x:E,y:T,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(v!=0||P!=0){const B=Math.sqrt(v*v+P*P);U.rotation=P>0?Math.acos(v/B):-Math.acos(v/B),U.scaleX=B,U.scaleY=M/B,U.skewX=(v*I+P*z)/M,U.skewY=0}else if(I!=0||z!=0){const B=Math.sqrt(I*I+z*z);U.rotation=Math.PI/2-(z>0?Math.acos(-I/B):-Math.acos(I/B)),U.scaleX=M/B,U.scaleY=B,U.skewX=0,U.skewY=(v*I+P*z)/M}return U.rotation=o.Util._getRotation(U.rotation),U}}o.Transform=A;const O="[object Array]",R="[object Number]",S="[object String]",a="[object Boolean]",f=Math.PI/180,g=180/Math.PI,m="#",y="",w="0",c="Konva warning: ",l="Konva error: ",d="rgb(",C={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},k=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let b=[];const h=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(s){setTimeout(s,60)};o.Util={_isElement(s){return!!(s&&s.nodeType==1)},_isFunction(s){return!!(s&&s.constructor&&s.call&&s.apply)},_isPlainObject(s){return!!s&&s.constructor===Object},_isArray(s){return Object.prototype.toString.call(s)===O},_isNumber(s){return Object.prototype.toString.call(s)===R&&!isNaN(s)&&isFinite(s)},_isString(s){return Object.prototype.toString.call(s)===S},_isBoolean(s){return Object.prototype.toString.call(s)===a},isObject(s){return s instanceof Object},isValidSelector(s){if(typeof s!="string")return!1;const v=s[0];return v==="#"||v==="."||v===v.toUpperCase()},_sign(s){return s===0||s>0?1:-1},requestAnimFrame(s){b.push(s),b.length===1&&h(function(){const v=b;b=[],v.forEach(function(P){P()})})},createCanvasElement(){const s=document.createElement("canvas");try{s.style=s.style||{}}catch{}return s},createImageElement(){return document.createElement("img")},_isInDocument(s){for(;s=s.parentNode;)if(s==document)return!0;return!1},_urlToImage(s,v){const P=o.Util.createImageElement();P.onload=function(){v(P)},P.src=s},_rgbToHex(s,v,P){return((1<<24)+(s<<16)+(v<<8)+P).toString(16).slice(1)},_hexToRgb(s){s=s.replace(m,y);const v=parseInt(s,16);return{r:v>>16&255,g:v>>8&255,b:v&255}},getRandomColor(){let s=(Math.random()*16777215<<0).toString(16);for(;s.length<6;)s=w+s;return m+s},getRGB(s){let v;return s in C?(v=C[s],{r:v[0],g:v[1],b:v[2]}):s[0]===m?this._hexToRgb(s.substring(1)):s.substr(0,4)===d?(v=k.exec(s.replace(/ /g,"")),{r:parseInt(v[1],10),g:parseInt(v[2],10),b:parseInt(v[3],10)}):{r:0,g:0,b:0}},colorToRGBA(s){return s=s||"black",o.Util._namedColorToRBA(s)||o.Util._hex3ColorToRGBA(s)||o.Util._hex4ColorToRGBA(s)||o.Util._hex6ColorToRGBA(s)||o.Util._hex8ColorToRGBA(s)||o.Util._rgbColorToRGBA(s)||o.Util._rgbaColorToRGBA(s)||o.Util._hslColorToRGBA(s)},_namedColorToRBA(s){const v=C[s.toLowerCase()];return v?{r:v[0],g:v[1],b:v[2],a:1}:null},_rgbColorToRGBA(s){if(s.indexOf("rgb(")===0){s=s.match(/rgb\(([^)]+)\)/)[1];const v=s.split(/ *, */).map(Number);return{r:v[0],g:v[1],b:v[2],a:1}}},_rgbaColorToRGBA(s){if(s.indexOf("rgba(")===0){s=s.match(/rgba\(([^)]+)\)/)[1];const v=s.split(/ *, */).map((P,I)=>P.slice(-1)==="%"?I===3?parseInt(P)/100:parseInt(P)/100*255:Number(P));return{r:v[0],g:v[1],b:v[2],a:v[3]}}},_hex8ColorToRGBA(s){if(s[0]==="#"&&s.length===9)return{r:parseInt(s.slice(1,3),16),g:parseInt(s.slice(3,5),16),b:parseInt(s.slice(5,7),16),a:parseInt(s.slice(7,9),16)/255}},_hex6ColorToRGBA(s){if(s[0]==="#"&&s.length===7)return{r:parseInt(s.slice(1,3),16),g:parseInt(s.slice(3,5),16),b:parseInt(s.slice(5,7),16),a:1}},_hex4ColorToRGBA(s){if(s[0]==="#"&&s.length===5)return{r:parseInt(s[1]+s[1],16),g:parseInt(s[2]+s[2],16),b:parseInt(s[3]+s[3],16),a:parseInt(s[4]+s[4],16)/255}},_hex3ColorToRGBA(s){if(s[0]==="#"&&s.length===4)return{r:parseInt(s[1]+s[1],16),g:parseInt(s[2]+s[2],16),b:parseInt(s[3]+s[3],16),a:1}},_hslColorToRGBA(s){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(s)){const[v,...P]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(s),I=Number(P[0])/360,z=Number(P[1])/100,E=Number(P[2])/100;let T,M,U;if(z===0)return U=E*255,{r:Math.round(U),g:Math.round(U),b:Math.round(U),a:1};E<.5?T=E*(1+z):T=E+z-E*z;const B=2*E-T,W=[0,0,0];for(let Y=0;Y<3;Y++)M=I+1/3*-(Y-1),M<0&&M++,M>1&&M--,6*M<1?U=B+(T-B)*6*M:2*M<1?U=T:3*M<2?U=B+(T-B)*(2/3-M)*6:U=B,W[Y]=U*255;return{r:Math.round(W[0]),g:Math.round(W[1]),b:Math.round(W[2]),a:1}}},haveIntersection(s,v){return!(v.x>s.x+s.width||v.x+v.width<s.x||v.y>s.y+s.height||v.y+v.height<s.y)},cloneObject(s){const v={};for(const P in s)this._isPlainObject(s[P])?v[P]=this.cloneObject(s[P]):this._isArray(s[P])?v[P]=this.cloneArray(s[P]):v[P]=s[P];return v},cloneArray(s){return s.slice(0)},degToRad(s){return s*f},radToDeg(s){return s*g},_degToRad(s){return o.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),o.Util.degToRad(s)},_radToDeg(s){return o.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),o.Util.radToDeg(s)},_getRotation(s){return p.Konva.angleDeg?o.Util.radToDeg(s):s},_capitalize(s){return s.charAt(0).toUpperCase()+s.slice(1)},throw(s){throw new Error(l+s)},error(s){console.error(l+s)},warn(s){p.Konva.showWarnings&&console.warn(c+s)},each(s,v){for(const P in s)v(P,s[P])},_inRange(s,v,P){return v<=s&&s<P},_getProjectionToSegment(s,v,P,I,z,E){let T,M,U;const B=(s-P)*(s-P)+(v-I)*(v-I);if(B==0)T=s,M=v,U=(z-P)*(z-P)+(E-I)*(E-I);else{const W=((z-s)*(P-s)+(E-v)*(I-v))/B;W<0?(T=s,M=v,U=(s-z)*(s-z)+(v-E)*(v-E)):W>1?(T=P,M=I,U=(P-z)*(P-z)+(I-E)*(I-E)):(T=s+W*(P-s),M=v+W*(I-v),U=(T-z)*(T-z)+(M-E)*(M-E))}return[T,M,U]},_getProjectionToLine(s,v,P){const I=o.Util.cloneObject(s);let z=Number.MAX_VALUE;return v.forEach(function(E,T){if(!P&&T===v.length-1)return;const M=v[(T+1)%v.length],U=o.Util._getProjectionToSegment(E.x,E.y,M.x,M.y,s.x,s.y),B=U[0],W=U[1],Y=U[2];Y<z&&(I.x=B,I.y=W,z=Y)}),I},_prepareArrayForTween(s,v,P){const I=[],z=[];if(s.length>v.length){const T=v;v=s,s=T}for(let T=0;T<s.length;T+=2)I.push({x:s[T],y:s[T+1]});for(let T=0;T<v.length;T+=2)z.push({x:v[T],y:v[T+1]});const E=[];return z.forEach(function(T){const M=o.Util._getProjectionToLine(T,I,P);E.push(M.x),E.push(M.y)}),E},_prepareToStringify(s){let v;s.visitedByCircularReferenceRemoval=!0;for(const P in s)if(s.hasOwnProperty(P)&&s[P]&&typeof s[P]=="object"){if(v=Object.getOwnPropertyDescriptor(s,P),s[P].visitedByCircularReferenceRemoval||o.Util._isElement(s[P]))if(v.configurable)delete s[P];else return null;else if(o.Util._prepareToStringify(s[P])===null)if(v.configurable)delete s[P];else return null}return delete s.visitedByCircularReferenceRemoval,s},_assign(s,v){for(const P in v)s[P]=v[P];return s},_getFirstPointerId(s){return s.touches?s.changedTouches[0].identifier:s.pointerId||999},releaseCanvas(...s){p.Konva.releaseCanvasOnDestroy&&s.forEach(v=>{v.width=0,v.height=0})},drawRoundedRectPath(s,v,P,I){let z=0,E=0,T=0,M=0;typeof I=="number"?z=E=T=M=Math.min(I,v/2,P/2):(z=Math.min(I[0]||0,v/2,P/2),E=Math.min(I[1]||0,v/2,P/2),M=Math.min(I[2]||0,v/2,P/2),T=Math.min(I[3]||0,v/2,P/2)),s.moveTo(z,0),s.lineTo(v-E,0),s.arc(v-E,E,E,Math.PI*3/2,0,!1),s.lineTo(v,P-M),s.arc(v-M,P-M,M,0,Math.PI/2,!1),s.lineTo(T,P),s.arc(T,P-T,T,Math.PI/2,Math.PI,!1),s.lineTo(0,z),s.arc(z,z,z,Math.PI,Math.PI*3/2,!1)}}})(va)),va}var gr={},en={},nn={},Ml;function ec(){if(Ml)return nn;Ml=1,Object.defineProperty(nn,"__esModule",{value:!0}),nn.HitContext=nn.SceneContext=nn.Context=void 0;const o=Ut(),p=vt();function A(b){const h=[],s=b.length,v=o.Util;for(let P=0;P<s;P++){let I=b[P];v._isNumber(I)?I=Math.round(I*1e3)/1e3:v._isString(I)||(I=I+""),h.push(I)}return h}const O=",",R="(",S=")",a="([",f="])",g=";",m="()",y="=",w=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],c=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],l=100;let d=class{constructor(h){this.canvas=h,p.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(h){h.fillEnabled()&&this._fill(h)}_fill(h){}strokeShape(h){h.hasStroke()&&this._stroke(h)}_stroke(h){}fillStrokeShape(h){h.attrs.fillAfterStrokeEnabled?(this.strokeShape(h),this.fillShape(h)):(this.fillShape(h),this.strokeShape(h))}getTrace(h,s){let v=this.traceArr,P=v.length,I="",z,E,T,M;for(z=0;z<P;z++)E=v[z],T=E.method,T?(M=E.args,I+=T,h?I+=m:o.Util._isArray(M[0])?I+=a+M.join(O)+f:(s&&(M=M.map(U=>typeof U=="number"?Math.floor(U):U)),I+=R+M.join(O)+S)):(I+=E.property,h||(I+=y+E.val)),I+=g;return I}clearTrace(){this.traceArr=[]}_trace(h){let s=this.traceArr,v;s.push(h),v=s.length,v>=l&&s.shift()}reset(){const h=this.getCanvas().getPixelRatio();this.setTransform(1*h,0,0,1*h,0,0)}getCanvas(){return this.canvas}clear(h){const s=this.getCanvas();h?this.clearRect(h.x||0,h.y||0,h.width||0,h.height||0):this.clearRect(0,0,s.getWidth()/s.pixelRatio,s.getHeight()/s.pixelRatio)}_applyLineCap(h){const s=h.attrs.lineCap;s&&this.setAttr("lineCap",s)}_applyOpacity(h){const s=h.getAbsoluteOpacity();s!==1&&this.setAttr("globalAlpha",s)}_applyLineJoin(h){const s=h.attrs.lineJoin;s&&this.setAttr("lineJoin",s)}setAttr(h,s){this._context[h]=s}arc(h,s,v,P,I,z){this._context.arc(h,s,v,P,I,z)}arcTo(h,s,v,P,I){this._context.arcTo(h,s,v,P,I)}beginPath(){this._context.beginPath()}bezierCurveTo(h,s,v,P,I,z){this._context.bezierCurveTo(h,s,v,P,I,z)}clearRect(h,s,v,P){this._context.clearRect(h,s,v,P)}clip(...h){this._context.clip.apply(this._context,h)}closePath(){this._context.closePath()}createImageData(h,s){const v=arguments;if(v.length===2)return this._context.createImageData(h,s);if(v.length===1)return this._context.createImageData(h)}createLinearGradient(h,s,v,P){return this._context.createLinearGradient(h,s,v,P)}createPattern(h,s){return this._context.createPattern(h,s)}createRadialGradient(h,s,v,P,I,z){return this._context.createRadialGradient(h,s,v,P,I,z)}drawImage(h,s,v,P,I,z,E,T,M){const U=arguments,B=this._context;U.length===3?B.drawImage(h,s,v):U.length===5?B.drawImage(h,s,v,P,I):U.length===9&&B.drawImage(h,s,v,P,I,z,E,T,M)}ellipse(h,s,v,P,I,z,E,T){this._context.ellipse(h,s,v,P,I,z,E,T)}isPointInPath(h,s,v,P){return v?this._context.isPointInPath(v,h,s,P):this._context.isPointInPath(h,s,P)}fill(...h){this._context.fill.apply(this._context,h)}fillRect(h,s,v,P){this._context.fillRect(h,s,v,P)}strokeRect(h,s,v,P){this._context.strokeRect(h,s,v,P)}fillText(h,s,v,P){P?this._context.fillText(h,s,v,P):this._context.fillText(h,s,v)}measureText(h){return this._context.measureText(h)}getImageData(h,s,v,P){return this._context.getImageData(h,s,v,P)}lineTo(h,s){this._context.lineTo(h,s)}moveTo(h,s){this._context.moveTo(h,s)}rect(h,s,v,P){this._context.rect(h,s,v,P)}roundRect(h,s,v,P,I){this._context.roundRect(h,s,v,P,I)}putImageData(h,s,v){this._context.putImageData(h,s,v)}quadraticCurveTo(h,s,v,P){this._context.quadraticCurveTo(h,s,v,P)}restore(){this._context.restore()}rotate(h){this._context.rotate(h)}save(){this._context.save()}scale(h,s){this._context.scale(h,s)}setLineDash(h){this._context.setLineDash?this._context.setLineDash(h):"mozDash"in this._context?this._context.mozDash=h:"webkitLineDash"in this._context&&(this._context.webkitLineDash=h)}getLineDash(){return this._context.getLineDash()}setTransform(h,s,v,P,I,z){this._context.setTransform(h,s,v,P,I,z)}stroke(h){h?this._context.stroke(h):this._context.stroke()}strokeText(h,s,v,P){this._context.strokeText(h,s,v,P)}transform(h,s,v,P,I,z){this._context.transform(h,s,v,P,I,z)}translate(h,s){this._context.translate(h,s)}_enableTrace(){let h=this,s=w.length,v=this.setAttr,P,I;const z=function(E){let T=h[E],M;h[E]=function(){return I=A(Array.prototype.slice.call(arguments,0)),M=T.apply(h,arguments),h._trace({method:E,args:I}),M}};for(P=0;P<s;P++)z(w[P]);h.setAttr=function(){v.apply(h,arguments);const E=arguments[0];let T=arguments[1];(E==="shadowOffsetX"||E==="shadowOffsetY"||E==="shadowBlur")&&(T=T/this.canvas.getPixelRatio()),h._trace({property:E,val:T})}}_applyGlobalCompositeOperation(h){const s=h.attrs.globalCompositeOperation;!s||s==="source-over"||this.setAttr("globalCompositeOperation",s)}};nn.Context=d,c.forEach(function(b){Object.defineProperty(d.prototype,b,{get(){return this._context[b]},set(h){this._context[b]=h}})});class C extends d{constructor(h,{willReadFrequently:s=!1}={}){super(h),this._context=h._canvas.getContext("2d",{willReadFrequently:s})}_fillColor(h){const s=h.fill();this.setAttr("fillStyle",s),h._fillFunc(this)}_fillPattern(h){this.setAttr("fillStyle",h._getFillPattern()),h._fillFunc(this)}_fillLinearGradient(h){const s=h._getLinearGradient();s&&(this.setAttr("fillStyle",s),h._fillFunc(this))}_fillRadialGradient(h){const s=h._getRadialGradient();s&&(this.setAttr("fillStyle",s),h._fillFunc(this))}_fill(h){const s=h.fill(),v=h.getFillPriority();if(s&&v==="color"){this._fillColor(h);return}const P=h.getFillPatternImage();if(P&&v==="pattern"){this._fillPattern(h);return}const I=h.getFillLinearGradientColorStops();if(I&&v==="linear-gradient"){this._fillLinearGradient(h);return}const z=h.getFillRadialGradientColorStops();if(z&&v==="radial-gradient"){this._fillRadialGradient(h);return}s?this._fillColor(h):P?this._fillPattern(h):I?this._fillLinearGradient(h):z&&this._fillRadialGradient(h)}_strokeLinearGradient(h){const s=h.getStrokeLinearGradientStartPoint(),v=h.getStrokeLinearGradientEndPoint(),P=h.getStrokeLinearGradientColorStops(),I=this.createLinearGradient(s.x,s.y,v.x,v.y);if(P){for(let z=0;z<P.length;z+=2)I.addColorStop(P[z],P[z+1]);this.setAttr("strokeStyle",I)}}_stroke(h){const s=h.dash(),v=h.getStrokeScaleEnabled();if(h.hasStroke()){if(!v){this.save();const I=this.getCanvas().getPixelRatio();this.setTransform(I,0,0,I,0,0)}this._applyLineCap(h),s&&h.dashEnabled()&&(this.setLineDash(s),this.setAttr("lineDashOffset",h.dashOffset())),this.setAttr("lineWidth",h.strokeWidth()),h.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),h.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(h):this.setAttr("strokeStyle",h.stroke()),h._strokeFunc(this),v||this.restore()}}_applyShadow(h){var s,v,P;const I=(s=h.getShadowRGBA())!==null&&s!==void 0?s:"black",z=(v=h.getShadowBlur())!==null&&v!==void 0?v:5,E=(P=h.getShadowOffset())!==null&&P!==void 0?P:{x:0,y:0},T=h.getAbsoluteScale(),M=this.canvas.getPixelRatio(),U=T.x*M,B=T.y*M;this.setAttr("shadowColor",I),this.setAttr("shadowBlur",z*Math.min(Math.abs(U),Math.abs(B))),this.setAttr("shadowOffsetX",E.x*U),this.setAttr("shadowOffsetY",E.y*B)}}nn.SceneContext=C;class k extends d{constructor(h){super(h),this._context=h._canvas.getContext("2d",{willReadFrequently:!0})}_fill(h){this.save(),this.setAttr("fillStyle",h.colorKey),h._fillFuncHit(this),this.restore()}strokeShape(h){h.hasHitStroke()&&this._stroke(h)}_stroke(h){if(h.hasHitStroke()){const s=h.getStrokeScaleEnabled();if(!s){this.save();const I=this.getCanvas().getPixelRatio();this.setTransform(I,0,0,I,0,0)}this._applyLineCap(h);const v=h.hitStrokeWidth(),P=v==="auto"?h.strokeWidth():v;this.setAttr("lineWidth",P),this.setAttr("strokeStyle",h.colorKey),h._strokeFuncHit(this),s||this.restore()}}}return nn.HitContext=k,nn}var bl;function Ji(){if(bl)return en;bl=1,Object.defineProperty(en,"__esModule",{value:!0}),en.HitCanvas=en.SceneCanvas=en.Canvas=void 0;const o=Ut(),p=ec(),A=vt();let O;function R(){if(O)return O;const g=o.Util.createCanvasElement(),m=g.getContext("2d");return O=(function(){const y=A.Konva._global.devicePixelRatio||1,w=m.webkitBackingStorePixelRatio||m.mozBackingStorePixelRatio||m.msBackingStorePixelRatio||m.oBackingStorePixelRatio||m.backingStorePixelRatio||1;return y/w})(),o.Util.releaseCanvas(g),O}let S=class{constructor(m){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const w=(m||{}).pixelRatio||A.Konva.pixelRatio||R();this.pixelRatio=w,this._canvas=o.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(m){const y=this.pixelRatio;this.pixelRatio=m,this.setSize(this.getWidth()/y,this.getHeight()/y)}setWidth(m){this.width=this._canvas.width=m*this.pixelRatio,this._canvas.style.width=m+"px";const y=this.pixelRatio;this.getContext()._context.scale(y,y)}setHeight(m){this.height=this._canvas.height=m*this.pixelRatio,this._canvas.style.height=m+"px";const y=this.pixelRatio;this.getContext()._context.scale(y,y)}getWidth(){return this.width}getHeight(){return this.height}setSize(m,y){this.setWidth(m||0),this.setHeight(y||0)}toDataURL(m,y){try{return this._canvas.toDataURL(m,y)}catch{try{return this._canvas.toDataURL()}catch(c){return o.Util.error("Unable to get data URL. "+c.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}};en.Canvas=S;class a extends S{constructor(m={width:0,height:0,willReadFrequently:!1}){super(m),this.context=new p.SceneContext(this,{willReadFrequently:m.willReadFrequently}),this.setSize(m.width,m.height)}}en.SceneCanvas=a;class f extends S{constructor(m={width:0,height:0}){super(m),this.hitCanvas=!0,this.context=new p.HitContext(this),this.setSize(m.width,m.height)}}return en.HitCanvas=f,en}var _a={},Ll;function Ia(){return Ll||(Ll=1,(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.DD=void 0;const p=vt(),A=Ut();o.DD={get isDragging(){let O=!1;return o.DD._dragElements.forEach(R=>{R.dragStatus==="dragging"&&(O=!0)}),O},justDragged:!1,get node(){let O;return o.DD._dragElements.forEach(R=>{O=R.node}),O},_dragElements:new Map,_drag(O){const R=[];o.DD._dragElements.forEach((S,a)=>{const{node:f}=S,g=f.getStage();g.setPointersPositions(O),S.pointerId===void 0&&(S.pointerId=A.Util._getFirstPointerId(O));const m=g._changedPointerPositions.find(y=>y.id===S.pointerId);if(m){if(S.dragStatus!=="dragging"){const y=f.dragDistance();if(Math.max(Math.abs(m.x-S.startPointerPos.x),Math.abs(m.y-S.startPointerPos.y))<y||(f.startDrag({evt:O}),!f.isDragging()))return}f._setDragPosition(O,S),R.push(f)}}),R.forEach(S=>{S.fire("dragmove",{type:"dragmove",target:S,evt:O},!0)})},_endDragBefore(O){const R=[];o.DD._dragElements.forEach(S=>{const{node:a}=S,f=a.getStage();if(O&&f.setPointersPositions(O),!f._changedPointerPositions.find(y=>y.id===S.pointerId))return;(S.dragStatus==="dragging"||S.dragStatus==="stopped")&&(o.DD.justDragged=!0,p.Konva._mouseListenClick=!1,p.Konva._touchListenClick=!1,p.Konva._pointerListenClick=!1,S.dragStatus="stopped");const m=S.node.getLayer()||S.node instanceof p.Konva.Stage&&S.node;m&&R.indexOf(m)===-1&&R.push(m)}),R.forEach(S=>{S.draw()})},_endDragAfter(O){o.DD._dragElements.forEach((R,S)=>{R.dragStatus==="stopped"&&R.node.fire("dragend",{type:"dragend",target:R.node,evt:O},!0),R.dragStatus!=="dragging"&&o.DD._dragElements.delete(S)})}},p.Konva.isBrowser&&(window.addEventListener("mouseup",o.DD._endDragBefore,!0),window.addEventListener("touchend",o.DD._endDragBefore,!0),window.addEventListener("touchcancel",o.DD._endDragBefore,!0),window.addEventListener("mousemove",o.DD._drag),window.addEventListener("touchmove",o.DD._drag),window.addEventListener("mouseup",o.DD._endDragAfter,!1),window.addEventListener("touchend",o.DD._endDragAfter,!1),window.addEventListener("touchcancel",o.DD._endDragAfter,!1))})(_a)),_a}var Sa={},ye={},Il;function Ct(){if(Il)return ye;Il=1,Object.defineProperty(ye,"__esModule",{value:!0}),ye.RGBComponent=O,ye.alphaComponent=R,ye.getNumberValidator=S,ye.getNumberOrArrayOfNumbersValidator=a,ye.getNumberOrAutoValidator=f,ye.getStringValidator=g,ye.getStringOrGradientValidator=m,ye.getFunctionValidator=y,ye.getNumberArrayValidator=w,ye.getBooleanValidator=c,ye.getComponentValidator=l;const o=vt(),p=Ut();function A(d){return p.Util._isString(d)?'"'+d+'"':Object.prototype.toString.call(d)==="[object Number]"||p.Util._isBoolean(d)?d:Object.prototype.toString.call(d)}function O(d){return d>255?255:d<0?0:Math.round(d)}function R(d){return d>1?1:d<1e-4?1e-4:d}function S(){if(o.Konva.isUnminified)return function(d,C){return p.Util._isNumber(d)||p.Util.warn(A(d)+' is a not valid value for "'+C+'" attribute. The value should be a number.'),d}}function a(d){if(o.Konva.isUnminified)return function(C,k){let b=p.Util._isNumber(C),h=p.Util._isArray(C)&&C.length==d;return!b&&!h&&p.Util.warn(A(C)+' is a not valid value for "'+k+'" attribute. The value should be a number or Array<number>('+d+")"),C}}function f(){if(o.Konva.isUnminified)return function(d,C){return p.Util._isNumber(d)||d==="auto"||p.Util.warn(A(d)+' is a not valid value for "'+C+'" attribute. The value should be a number or "auto".'),d}}function g(){if(o.Konva.isUnminified)return function(d,C){return p.Util._isString(d)||p.Util.warn(A(d)+' is a not valid value for "'+C+'" attribute. The value should be a string.'),d}}function m(){if(o.Konva.isUnminified)return function(d,C){const k=p.Util._isString(d),b=Object.prototype.toString.call(d)==="[object CanvasGradient]"||d&&d.addColorStop;return k||b||p.Util.warn(A(d)+' is a not valid value for "'+C+'" attribute. The value should be a string or a native gradient.'),d}}function y(){if(o.Konva.isUnminified)return function(d,C){return p.Util._isFunction(d)||p.Util.warn(A(d)+' is a not valid value for "'+C+'" attribute. The value should be a function.'),d}}function w(){if(o.Konva.isUnminified)return function(d,C){const k=Int8Array?Object.getPrototypeOf(Int8Array):null;return k&&d instanceof k||(p.Util._isArray(d)?d.forEach(function(b){p.Util._isNumber(b)||p.Util.warn('"'+C+'" attribute has non numeric element '+b+". Make sure that all elements are numbers.")}):p.Util.warn(A(d)+' is a not valid value for "'+C+'" attribute. The value should be a array of numbers.')),d}}function c(){if(o.Konva.isUnminified)return function(d,C){return d===!0||d===!1||p.Util.warn(A(d)+' is a not valid value for "'+C+'" attribute. The value should be a boolean.'),d}}function l(d){if(o.Konva.isUnminified)return function(C,k){return C==null||p.Util.isObject(C)||p.Util.warn(A(C)+' is a not valid value for "'+k+'" attribute. The value should be an object with properties '+d),C}}return ye}var Ol;function St(){return Ol||(Ol=1,(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.Factory=void 0;const p=Ut(),A=Ct(),O="get",R="set";o.Factory={addGetterSetter(S,a,f,g,m){o.Factory.addGetter(S,a,f),o.Factory.addSetter(S,a,g,m),o.Factory.addOverloadedGetterSetter(S,a)},addGetter(S,a,f){const g=O+p.Util._capitalize(a);S.prototype[g]=S.prototype[g]||function(){const m=this.attrs[a];return m===void 0?f:m}},addSetter(S,a,f,g){const m=R+p.Util._capitalize(a);S.prototype[m]||o.Factory.overWriteSetter(S,a,f,g)},overWriteSetter(S,a,f,g){const m=R+p.Util._capitalize(a);S.prototype[m]=function(y){return f&&y!==void 0&&y!==null&&(y=f.call(this,y,a)),this._setAttr(a,y),g&&g.call(this),this}},addComponentsGetterSetter(S,a,f,g,m){const y=f.length,w=p.Util._capitalize,c=O+w(a),l=R+w(a);S.prototype[c]=function(){const C={};for(let k=0;k<y;k++){const b=f[k];C[b]=this.getAttr(a+w(b))}return C};const d=(0,A.getComponentValidator)(f);S.prototype[l]=function(C){const k=this.attrs[a];g&&(C=g.call(this,C,a)),d&&d.call(this,C,a);for(const b in C)C.hasOwnProperty(b)&&this._setAttr(a+w(b),C[b]);return C||f.forEach(b=>{this._setAttr(a+w(b),void 0)}),this._fireChangeEvent(a,k,C),m&&m.call(this),this},o.Factory.addOverloadedGetterSetter(S,a)},addOverloadedGetterSetter(S,a){const f=p.Util._capitalize(a),g=R+f,m=O+f;S.prototype[a]=function(){return arguments.length?(this[g](arguments[0]),this):this[m]()}},addDeprecatedGetterSetter(S,a,f,g){p.Util.error("Adding deprecated "+a);const m=O+p.Util._capitalize(a),y=a+" property is deprecated and will be removed soon. Look at Konva change log for more information.";S.prototype[m]=function(){p.Util.error(y);const w=this.attrs[a];return w===void 0?f:w},o.Factory.addSetter(S,a,g,function(){p.Util.error(y)}),o.Factory.addOverloadedGetterSetter(S,a)},backCompat(S,a){p.Util.each(a,function(f,g){const m=S.prototype[g],y=O+p.Util._capitalize(f),w=R+p.Util._capitalize(f);function c(){m.apply(this,arguments),p.Util.error('"'+f+'" method is deprecated and will be removed soon. Use ""'+g+'" instead.')}S.prototype[f]=c,S.prototype[y]=c,S.prototype[w]=c})},afterSetFilter(){this._filterUpToDate=!1}}})(Sa)),Sa}var Gl;function Bt(){if(Gl)return gr;Gl=1,Object.defineProperty(gr,"__esModule",{value:!0}),gr.Node=void 0;const o=Ji(),p=Ia(),A=St(),O=vt(),R=Ut(),S=Ct(),a="absoluteOpacity",f="allEventListeners",g="absoluteTransform",m="absoluteScale",y="canvas",w="Change",c="children",l="konva",d="listening",C="mouseenter",k="mouseleave",b="pointerenter",h="pointerleave",s="touchenter",v="touchleave",P="set",I="Shape",z=" ",E="stage",T="transform",M="Stage",U="visible",B=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(z);let W=1,Y=class ba{constructor(x){this._id=W++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(x),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(x){(x===T||x===g)&&this._cache.get(x)?this._cache.get(x).dirty=!0:x?this._cache.delete(x):this._cache.clear()}_getCache(x,_){let F=this._cache.get(x);return(F===void 0||(x===T||x===g)&&F.dirty===!0)&&(F=_.call(this),this._cache.set(x,F)),F}_calculate(x,_,F){if(!this._attachedDepsListeners.get(x)){const N=_.map(G=>G+"Change.konva").join(z);this.on(N,()=>{this._clearCache(x)}),this._attachedDepsListeners.set(x,!0)}return this._getCache(x,F)}_getCanvasCache(){return this._cache.get(y)}_clearSelfAndDescendantCache(x){this._clearCache(x),x===g&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(y)){const{scene:x,filter:_,hit:F,buffer:N}=this._cache.get(y);R.Util.releaseCanvas(x,_,F,N),this._cache.delete(y)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(x){const _=x||{};let F={};(_.x===void 0||_.y===void 0||_.width===void 0||_.height===void 0)&&(F=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let N=Math.ceil(_.width||F.width),G=Math.ceil(_.height||F.height),K=_.pixelRatio,H=_.x===void 0?Math.floor(F.x):_.x,tt=_.y===void 0?Math.floor(F.y):_.y,nt=_.offset||0,X=_.drawBorder||!1,D=_.hitCanvasPixelRatio||1;if(!N||!G){R.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const Q=Math.abs(Math.round(F.x)-H)>.5?1:0,it=Math.abs(Math.round(F.y)-tt)>.5?1:0;N+=nt*2+Q,G+=nt*2+it,H-=nt,tt-=nt;const st=new o.SceneCanvas({pixelRatio:K,width:N,height:G}),at=new o.SceneCanvas({pixelRatio:K,width:0,height:0,willReadFrequently:!0}),ft=new o.HitCanvas({pixelRatio:D,width:N,height:G}),ht=st.getContext(),kt=ft.getContext(),gt=new o.SceneCanvas({width:st.width/st.pixelRatio+Math.abs(H),height:st.height/st.pixelRatio+Math.abs(tt),pixelRatio:st.pixelRatio}),Ht=gt.getContext();return ft.isCache=!0,st.isCache=!0,this._cache.delete(y),this._filterUpToDate=!1,_.imageSmoothingEnabled===!1&&(st.getContext()._context.imageSmoothingEnabled=!1,at.getContext()._context.imageSmoothingEnabled=!1),ht.save(),kt.save(),Ht.save(),ht.translate(-H,-tt),kt.translate(-H,-tt),Ht.translate(-H,-tt),gt.x=H,gt.y=tt,this._isUnderCache=!0,this._clearSelfAndDescendantCache(a),this._clearSelfAndDescendantCache(m),this.drawScene(st,this,gt),this.drawHit(ft,this),this._isUnderCache=!1,ht.restore(),kt.restore(),X&&(ht.save(),ht.beginPath(),ht.rect(0,0,N,G),ht.closePath(),ht.setAttr("strokeStyle","red"),ht.setAttr("lineWidth",5),ht.stroke(),ht.restore()),this._cache.set(y,{scene:st,filter:at,hit:ft,buffer:gt,x:H,y:tt}),this._requestDraw(),this}isCached(){return this._cache.has(y)}getClientRect(x){throw new Error('abstract "getClientRect" method call')}_transformedRect(x,_){const F=[{x:x.x,y:x.y},{x:x.x+x.width,y:x.y},{x:x.x+x.width,y:x.y+x.height},{x:x.x,y:x.y+x.height}];let N=1/0,G=1/0,K=-1/0,H=-1/0;const tt=this.getAbsoluteTransform(_);return F.forEach(function(nt){const X=tt.point(nt);N===void 0&&(N=K=X.x,G=H=X.y),N=Math.min(N,X.x),G=Math.min(G,X.y),K=Math.max(K,X.x),H=Math.max(H,X.y)}),{x:N,y:G,width:K-N,height:H-G}}_drawCachedSceneCanvas(x){x.save(),x._applyOpacity(this),x._applyGlobalCompositeOperation(this);const _=this._getCanvasCache();x.translate(_.x,_.y);const F=this._getCachedSceneCanvas(),N=F.pixelRatio;x.drawImage(F._canvas,0,0,F.width/N,F.height/N),x.restore()}_drawCachedHitCanvas(x){const _=this._getCanvasCache(),F=_.hit;x.save(),x.translate(_.x,_.y),x.drawImage(F._canvas,0,0,F.width/F.pixelRatio,F.height/F.pixelRatio),x.restore()}_getCachedSceneCanvas(){let x=this.filters(),_=this._getCanvasCache(),F=_.scene,N=_.filter,G=N.getContext(),K,H,tt,nt;if(x){if(!this._filterUpToDate){const X=F.pixelRatio;N.setSize(F.width/F.pixelRatio,F.height/F.pixelRatio);try{for(K=x.length,G.clear(),G.drawImage(F._canvas,0,0,F.getWidth()/X,F.getHeight()/X),H=G.getImageData(0,0,N.getWidth(),N.getHeight()),tt=0;tt<K;tt++){if(nt=x[tt],typeof nt!="function"){R.Util.error("Filter should be type of function, but got "+typeof nt+" instead. Please check correct filters");continue}nt.call(this,H),G.putImageData(H,0,0)}}catch(D){R.Util.error("Unable to apply filter. "+D.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return N}return F}on(x,_){if(this._cache&&this._cache.delete(f),arguments.length===3)return this._delegate.apply(this,arguments);const F=x.split(z);for(let N=0;N<F.length;N++){const K=F[N].split("."),H=K[0],tt=K[1]||"";this.eventListeners[H]||(this.eventListeners[H]=[]),this.eventListeners[H].push({name:tt,handler:_})}return this}off(x,_){let F=(x||"").split(z),N=F.length,G,K,H,tt,nt,X;if(this._cache&&this._cache.delete(f),!x)for(K in this.eventListeners)this._off(K);for(G=0;G<N;G++)if(H=F[G],tt=H.split("."),nt=tt[0],X=tt[1],nt)this.eventListeners[nt]&&this._off(nt,X,_);else for(K in this.eventListeners)this._off(K,X,_);return this}dispatchEvent(x){const _={target:this,type:x.type,evt:x};return this.fire(x.type,_),this}addEventListener(x,_){return this.on(x,function(F){_.call(this,F.evt)}),this}removeEventListener(x){return this.off(x),this}_delegate(x,_,F){const N=this;this.on(x,function(G){const K=G.target.findAncestors(_,!0,N);for(let H=0;H<K.length;H++)G=R.Util.cloneObject(G),G.currentTarget=K[H],F.call(K[H],G)})}remove(){return this.isDragging()&&this.stopDrag(),p.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(g),this._clearSelfAndDescendantCache(a),this._clearSelfAndDescendantCache(m),this._clearSelfAndDescendantCache(E),this._clearSelfAndDescendantCache(U),this._clearSelfAndDescendantCache(d)}_remove(){this._clearCaches();const x=this.getParent();x&&x.children&&(x.children.splice(this.index,1),x._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(x){const _="get"+R.Util._capitalize(x);return R.Util._isFunction(this[_])?this[_]():this.attrs[x]}getAncestors(){let x=this.getParent(),_=[];for(;x;)_.push(x),x=x.getParent();return _}getAttrs(){return this.attrs||{}}setAttrs(x){return this._batchTransformChanges(()=>{let _,F;if(!x)return this;for(_ in x)_!==c&&(F=P+R.Util._capitalize(_),R.Util._isFunction(this[F])?this[F](x[_]):this._setAttr(_,x[_]))}),this}isListening(){return this._getCache(d,this._isListening)}_isListening(x){if(!this.listening())return!1;const F=this.getParent();return F&&F!==x&&this!==x?F._isListening(x):!0}isVisible(){return this._getCache(U,this._isVisible)}_isVisible(x){if(!this.visible())return!1;const F=this.getParent();return F&&F!==x&&this!==x?F._isVisible(x):!0}shouldDrawHit(x,_=!1){if(x)return this._isVisible(x)&&this._isListening(x);const F=this.getLayer();let N=!1;p.DD._dragElements.forEach(K=>{K.dragStatus==="dragging"&&(K.node.nodeType==="Stage"||K.node.getLayer()===F)&&(N=!0)});const G=!_&&!O.Konva.hitOnDragEnabled&&(N||O.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!G}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let x=this.getDepth(),_=this,F=0,N,G,K,H;function tt(X){for(N=[],G=X.length,K=0;K<G;K++)H=X[K],F++,H.nodeType!==I&&(N=N.concat(H.getChildren().slice())),H._id===_._id&&(K=G);N.length>0&&N[0].getDepth()<=x&&tt(N)}const nt=this.getStage();return _.nodeType!==M&&nt&&tt(nt.getChildren()),F}getDepth(){let x=0,_=this.parent;for(;_;)x++,_=_.parent;return x}_batchTransformChanges(x){this._batchingTransformChange=!0,x(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(T),this._clearSelfAndDescendantCache(g)),this._needClearTransformCache=!1}setPosition(x){return this._batchTransformChanges(()=>{this.x(x.x),this.y(x.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const x=this.getStage();if(!x)return null;const _=x.getPointerPosition();if(!_)return null;const F=this.getAbsoluteTransform().copy();return F.invert(),F.point(_)}getAbsolutePosition(x){let _=!1,F=this.parent;for(;F;){if(F.isCached()){_=!0;break}F=F.parent}_&&!x&&(x=!0);const N=this.getAbsoluteTransform(x).getMatrix(),G=new R.Transform,K=this.offset();return G.m=N.slice(),G.translate(K.x,K.y),G.getTranslation()}setAbsolutePosition(x){const{x:_,y:F,...N}=this._clearTransform();this.attrs.x=_,this.attrs.y=F,this._clearCache(T);const G=this._getAbsoluteTransform().copy();return G.invert(),G.translate(x.x,x.y),x={x:this.attrs.x+G.getTranslation().x,y:this.attrs.y+G.getTranslation().y},this._setTransform(N),this.setPosition({x:x.x,y:x.y}),this._clearCache(T),this._clearSelfAndDescendantCache(g),this}_setTransform(x){let _;for(_ in x)this.attrs[_]=x[_]}_clearTransform(){const x={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,x}move(x){let _=x.x,F=x.y,N=this.x(),G=this.y();return _!==void 0&&(N+=_),F!==void 0&&(G+=F),this.setPosition({x:N,y:G}),this}_eachAncestorReverse(x,_){let F=[],N=this.getParent(),G,K;if(!(_&&_._id===this._id)){for(F.unshift(this);N&&(!_||N._id!==_._id);)F.unshift(N),N=N.parent;for(G=F.length,K=0;K<G;K++)x(F[K])}}rotate(x){return this.rotation(this.rotation()+x),this}moveToTop(){if(!this.parent)return R.Util.warn("Node has no parent. moveToTop function is ignored."),!1;const x=this.index,_=this.parent.getChildren().length;return x<_-1?(this.parent.children.splice(x,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return R.Util.warn("Node has no parent. moveUp function is ignored."),!1;const x=this.index,_=this.parent.getChildren().length;return x<_-1?(this.parent.children.splice(x,1),this.parent.children.splice(x+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return R.Util.warn("Node has no parent. moveDown function is ignored."),!1;const x=this.index;return x>0?(this.parent.children.splice(x,1),this.parent.children.splice(x-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return R.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const x=this.index;return x>0?(this.parent.children.splice(x,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(x){if(!this.parent)return R.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(x<0||x>=this.parent.children.length)&&R.Util.warn("Unexpected value "+x+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const _=this.index;return this.parent.children.splice(_,1),this.parent.children.splice(x,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(a,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let x=this.opacity();const _=this.getParent();return _&&!_._isUnderCache&&(x*=_.getAbsoluteOpacity()),x}moveTo(x){return this.getParent()!==x&&(this._remove(),x.add(this)),this}toObject(){let x=this.getAttrs(),_,F,N,G,K;const H={attrs:{},className:this.getClassName()};for(_ in x)F=x[_],K=R.Util.isObject(F)&&!R.Util._isPlainObject(F)&&!R.Util._isArray(F),!K&&(N=typeof this[_]=="function"&&this[_],delete x[_],G=N?N.call(this):null,x[_]=F,G!==F&&(H.attrs[_]=F));return R.Util._prepareToStringify(H)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(x,_,F){const N=[];_&&this._isMatch(x)&&N.push(this);let G=this.parent;for(;G;){if(G===F)return N;G._isMatch(x)&&N.push(G),G=G.parent}return N}isAncestorOf(x){return!1}findAncestor(x,_,F){return this.findAncestors(x,_,F)[0]}_isMatch(x){if(!x)return!1;if(typeof x=="function")return x(this);let _=x.replace(/ /g,"").split(","),F=_.length,N,G;for(N=0;N<F;N++)if(G=_[N],R.Util.isValidSelector(G)||(R.Util.warn('Selector "'+G+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),R.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),R.Util.warn("Konva is awesome, right?")),G.charAt(0)==="#"){if(this.id()===G.slice(1))return!0}else if(G.charAt(0)==="."){if(this.hasName(G.slice(1)))return!0}else if(this.className===G||this.nodeType===G)return!0;return!1}getLayer(){const x=this.getParent();return x?x.getLayer():null}getStage(){return this._getCache(E,this._getStage)}_getStage(){const x=this.getParent();return x?x.getStage():null}fire(x,_={},F){return _.target=_.target||this,F?this._fireAndBubble(x,_):this._fire(x,_),this}getAbsoluteTransform(x){return x?this._getAbsoluteTransform(x):this._getCache(g,this._getAbsoluteTransform)}_getAbsoluteTransform(x){let _;if(x)return _=new R.Transform,this._eachAncestorReverse(function(F){const N=F.transformsEnabled();N==="all"?_.multiply(F.getTransform()):N==="position"&&_.translate(F.x()-F.offsetX(),F.y()-F.offsetY())},x),_;{_=this._cache.get(g)||new R.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(_):_.reset();const F=this.transformsEnabled();if(F==="all")_.multiply(this.getTransform());else if(F==="position"){const N=this.attrs.x||0,G=this.attrs.y||0,K=this.attrs.offsetX||0,H=this.attrs.offsetY||0;_.translate(N-K,G-H)}return _.dirty=!1,_}}getAbsoluteScale(x){let _=this;for(;_;)_._isUnderCache&&(x=_),_=_.getParent();const N=this.getAbsoluteTransform(x).decompose();return{x:N.scaleX,y:N.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(T,this._getTransform)}_getTransform(){var x,_;const F=this._cache.get(T)||new R.Transform;F.reset();const N=this.x(),G=this.y(),K=O.Konva.getAngle(this.rotation()),H=(x=this.attrs.scaleX)!==null&&x!==void 0?x:1,tt=(_=this.attrs.scaleY)!==null&&_!==void 0?_:1,nt=this.attrs.skewX||0,X=this.attrs.skewY||0,D=this.attrs.offsetX||0,Q=this.attrs.offsetY||0;return(N!==0||G!==0)&&F.translate(N,G),K!==0&&F.rotate(K),(nt!==0||X!==0)&&F.skew(nt,X),(H!==1||tt!==1)&&F.scale(H,tt),(D!==0||Q!==0)&&F.translate(-1*D,-1*Q),F.dirty=!1,F}clone(x){let _=R.Util.cloneObject(this.attrs),F,N,G,K,H;for(F in x)_[F]=x[F];const tt=new this.constructor(_);for(F in this.eventListeners)for(N=this.eventListeners[F],G=N.length,K=0;K<G;K++)H=N[K],H.name.indexOf(l)<0&&(tt.eventListeners[F]||(tt.eventListeners[F]=[]),tt.eventListeners[F].push(H));return tt}_toKonvaCanvas(x){x=x||{};const _=this.getClientRect(),F=this.getStage(),N=x.x!==void 0?x.x:Math.floor(_.x),G=x.y!==void 0?x.y:Math.floor(_.y),K=x.pixelRatio||1,H=new o.SceneCanvas({width:x.width||Math.ceil(_.width)||(F?F.width():0),height:x.height||Math.ceil(_.height)||(F?F.height():0),pixelRatio:K}),tt=H.getContext(),nt=new o.SceneCanvas({width:H.width/H.pixelRatio+Math.abs(N),height:H.height/H.pixelRatio+Math.abs(G),pixelRatio:H.pixelRatio});return x.imageSmoothingEnabled===!1&&(tt._context.imageSmoothingEnabled=!1),tt.save(),(N||G)&&tt.translate(-1*N,-1*G),this.drawScene(H,void 0,nt),tt.restore(),H}toCanvas(x){return this._toKonvaCanvas(x)._canvas}toDataURL(x){x=x||{};const _=x.mimeType||null,F=x.quality||null,N=this._toKonvaCanvas(x).toDataURL(_,F);return x.callback&&x.callback(N),N}toImage(x){return new Promise((_,F)=>{try{const N=x==null?void 0:x.callback;N&&delete x.callback,R.Util._urlToImage(this.toDataURL(x),function(G){_(G),N==null||N(G)})}catch(N){F(N)}})}toBlob(x){return new Promise((_,F)=>{try{const N=x==null?void 0:x.callback;N&&delete x.callback,this.toCanvas(x).toBlob(G=>{_(G),N==null||N(G)},x==null?void 0:x.mimeType,x==null?void 0:x.quality)}catch(N){F(N)}})}setSize(x){return this.width(x.width),this.height(x.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():O.Konva.dragDistance}_off(x,_,F){let N=this.eventListeners[x],G,K,H;for(G=0;G<N.length;G++)if(K=N[G].name,H=N[G].handler,(K!=="konva"||_==="konva")&&(!_||K===_)&&(!F||F===H)){if(N.splice(G,1),N.length===0){delete this.eventListeners[x];break}G--}}_fireChangeEvent(x,_,F){this._fire(x+w,{oldVal:_,newVal:F})}addName(x){if(!this.hasName(x)){const _=this.name(),F=_?_+" "+x:x;this.name(F)}return this}hasName(x){if(!x)return!1;const _=this.name();return _?(_||"").split(/\s/g).indexOf(x)!==-1:!1}removeName(x){const _=(this.name()||"").split(/\s/g),F=_.indexOf(x);return F!==-1&&(_.splice(F,1),this.name(_.join(" "))),this}setAttr(x,_){const F=this[P+R.Util._capitalize(x)];return R.Util._isFunction(F)?F.call(this,_):this._setAttr(x,_),this}_requestDraw(){if(O.Konva.autoDrawEnabled){const x=this.getLayer()||this.getStage();x==null||x.batchDraw()}}_setAttr(x,_){const F=this.attrs[x];F===_&&!R.Util.isObject(_)||(_==null?delete this.attrs[x]:this.attrs[x]=_,this._shouldFireChangeEvents&&this._fireChangeEvent(x,F,_),this._requestDraw())}_setComponentAttr(x,_,F){let N;F!==void 0&&(N=this.attrs[x],N||(this.attrs[x]=this.getAttr(x)),this.attrs[x][_]=F,this._fireChangeEvent(x,N,F))}_fireAndBubble(x,_,F){_&&this.nodeType===I&&(_.target=this);const N=[C,k,b,h,s,v];if(!(N.indexOf(x)!==-1&&(F&&(this===F||this.isAncestorOf&&this.isAncestorOf(F))||this.nodeType==="Stage"&&!F))){this._fire(x,_);const K=N.indexOf(x)!==-1&&F&&F.isAncestorOf&&F.isAncestorOf(this)&&!F.isAncestorOf(this.parent);(_&&!_.cancelBubble||!_)&&this.parent&&this.parent.isListening()&&!K&&(F&&F.parent?this._fireAndBubble.call(this.parent,x,_,F):this._fireAndBubble.call(this.parent,x,_))}}_getProtoListeners(x){var _,F,N;const G=(_=this._cache.get(f))!==null&&_!==void 0?_:{};let K=G==null?void 0:G[x];if(K===void 0){K=[];let H=Object.getPrototypeOf(this);for(;H;){const tt=(N=(F=H.eventListeners)===null||F===void 0?void 0:F[x])!==null&&N!==void 0?N:[];K.push(...tt),H=Object.getPrototypeOf(H)}G[x]=K,this._cache.set(f,G)}return K}_fire(x,_){_=_||{},_.currentTarget=this,_.type=x;const F=this._getProtoListeners(x);if(F)for(let G=0;G<F.length;G++)F[G].handler.call(this,_);const N=this.eventListeners[x];if(N)for(let G=0;G<N.length;G++)N[G].handler.call(this,_)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(x){const _=x?x.pointerId:void 0,F=this.getStage(),N=this.getAbsolutePosition();if(!F)return;const G=F._getPointerById(_)||F._changedPointerPositions[0]||N;p.DD._dragElements.set(this._id,{node:this,startPointerPos:G,offset:{x:G.x-N.x,y:G.y-N.y},dragStatus:"ready",pointerId:_})}startDrag(x,_=!0){p.DD._dragElements.has(this._id)||this._createDragElement(x);const F=p.DD._dragElements.get(this._id);F.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:x&&x.evt},_)}_setDragPosition(x,_){const F=this.getStage()._getPointerById(_.pointerId);if(!F)return;let N={x:F.x-_.offset.x,y:F.y-_.offset.y};const G=this.dragBoundFunc();if(G!==void 0){const K=G.call(this,N,x);K?N=K:R.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==N.x||this._lastPos.y!==N.y)&&(this.setAbsolutePosition(N),this._requestDraw()),this._lastPos=N}stopDrag(x){const _=p.DD._dragElements.get(this._id);_&&(_.dragStatus="stopped"),p.DD._endDragBefore(x),p.DD._endDragAfter(x)}setDraggable(x){this._setAttr("draggable",x),this._dragChange()}isDragging(){const x=p.DD._dragElements.get(this._id);return x?x.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(x){if(!(!(x.evt.button!==void 0)||O.Konva.dragButtons.indexOf(x.evt.button)>=0)||this.isDragging())return;let N=!1;p.DD._dragElements.forEach(G=>{this.isAncestorOf(G.node)&&(N=!0)}),N||this._createDragElement(x)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const _=p.DD._dragElements.get(this._id),F=_&&_.dragStatus==="dragging",N=_&&_.dragStatus==="ready";F?this.stopDrag():N&&p.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(x={x:0,y:0}){const _=this.getStage();if(!_)return!1;const F={x:-x.x,y:-x.y,width:_.width()+2*x.x,height:_.height()+2*x.y};return R.Util.haveIntersection(F,this.getClientRect())}static create(x,_){return R.Util._isString(x)&&(x=JSON.parse(x)),this._createNode(x,_)}static _createNode(x,_){let F=ba.prototype.getClassName.call(x),N=x.children,G,K,H;_&&(x.attrs.container=_),O.Konva[F]||(R.Util.warn('Can not find a node with class name "'+F+'". Fallback to "Shape".'),F="Shape");const tt=O.Konva[F];if(G=new tt(x.attrs),N)for(K=N.length,H=0;H<K;H++)G.add(ba._createNode(N[H]));return G}};gr.Node=Y,Y.prototype.nodeType="Node",Y.prototype._attrsAffectingSize=[],Y.prototype.eventListeners={},Y.prototype.on.call(Y.prototype,B,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(T),this._clearSelfAndDescendantCache(g)}),Y.prototype.on.call(Y.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(U)}),Y.prototype.on.call(Y.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(d)}),Y.prototype.on.call(Y.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(a)});const V=A.Factory.addGetterSetter;return V(Y,"zIndex"),V(Y,"absolutePosition"),V(Y,"position"),V(Y,"x",0,(0,S.getNumberValidator)()),V(Y,"y",0,(0,S.getNumberValidator)()),V(Y,"globalCompositeOperation","source-over",(0,S.getStringValidator)()),V(Y,"opacity",1,(0,S.getNumberValidator)()),V(Y,"name","",(0,S.getStringValidator)()),V(Y,"id","",(0,S.getStringValidator)()),V(Y,"rotation",0,(0,S.getNumberValidator)()),A.Factory.addComponentsGetterSetter(Y,"scale",["x","y"]),V(Y,"scaleX",1,(0,S.getNumberValidator)()),V(Y,"scaleY",1,(0,S.getNumberValidator)()),A.Factory.addComponentsGetterSetter(Y,"skew",["x","y"]),V(Y,"skewX",0,(0,S.getNumberValidator)()),V(Y,"skewY",0,(0,S.getNumberValidator)()),A.Factory.addComponentsGetterSetter(Y,"offset",["x","y"]),V(Y,"offsetX",0,(0,S.getNumberValidator)()),V(Y,"offsetY",0,(0,S.getNumberValidator)()),V(Y,"dragDistance",void 0,(0,S.getNumberValidator)()),V(Y,"width",0,(0,S.getNumberValidator)()),V(Y,"height",0,(0,S.getNumberValidator)()),V(Y,"listening",!0,(0,S.getBooleanValidator)()),V(Y,"preventDefault",!0,(0,S.getBooleanValidator)()),V(Y,"filters",void 0,function(et){return this._filterUpToDate=!1,et}),V(Y,"visible",!0,(0,S.getBooleanValidator)()),V(Y,"transformsEnabled","all",(0,S.getStringValidator)()),V(Y,"size"),V(Y,"dragBoundFunc"),V(Y,"draggable",!1,(0,S.getBooleanValidator)()),A.Factory.backCompat(Y,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),gr}var pr={},Dl;function Zi(){if(Dl)return pr;Dl=1,Object.defineProperty(pr,"__esModule",{value:!0}),pr.Container=void 0;const o=St(),p=Bt(),A=Ct();let O=class extends p.Node{constructor(){super(...arguments),this.children=[]}getChildren(S){const a=this.children||[];return S?a.filter(S):a}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(S=>{S.parent=null,S.index=0,S.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(S=>{S.parent=null,S.index=0,S.destroy()}),this.children=[],this._requestDraw(),this}add(...S){if(S.length===0)return this;if(S.length>1){for(let f=0;f<S.length;f++)this.add(S[f]);return this}const a=S[0];return a.getParent()?(a.moveTo(this),this):(this._validateAdd(a),a.index=this.getChildren().length,a.parent=this,a._clearCaches(),this.getChildren().push(a),this._fire("add",{child:a}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(S){return this._generalFind(S,!1)}findOne(S){const a=this._generalFind(S,!0);return a.length>0?a[0]:void 0}_generalFind(S,a){const f=[];return this._descendants(g=>{const m=g._isMatch(S);return m&&f.push(g),!!(m&&a)}),f}_descendants(S){let a=!1;const f=this.getChildren();for(const g of f){if(a=S(g),a)return!0;if(g.hasChildren()&&(a=g._descendants(S),a))return!0}return!1}toObject(){const S=p.Node.prototype.toObject.call(this);return S.children=[],this.getChildren().forEach(a=>{S.children.push(a.toObject())}),S}isAncestorOf(S){let a=S.getParent();for(;a;){if(a._id===this._id)return!0;a=a.getParent()}return!1}clone(S){const a=p.Node.prototype.clone.call(this,S);return this.getChildren().forEach(function(f){a.add(f.clone())}),a}getAllIntersections(S){const a=[];return this.find("Shape").forEach(f=>{f.isVisible()&&f.intersects(S)&&a.push(f)}),a}_clearSelfAndDescendantCache(S){var a;super._clearSelfAndDescendantCache(S),!this.isCached()&&((a=this.children)===null||a===void 0||a.forEach(function(f){f._clearSelfAndDescendantCache(S)}))}_setChildrenIndices(){var S;(S=this.children)===null||S===void 0||S.forEach(function(a,f){a.index=f}),this._requestDraw()}drawScene(S,a,f){const g=this.getLayer(),m=S||g&&g.getCanvas(),y=m&&m.getContext(),w=this._getCanvasCache(),c=w&&w.scene,l=m&&m.isCache;if(!this.isVisible()&&!l)return this;if(c){y.save();const d=this.getAbsoluteTransform(a).getMatrix();y.transform(d[0],d[1],d[2],d[3],d[4],d[5]),this._drawCachedSceneCanvas(y),y.restore()}else this._drawChildren("drawScene",m,a,f);return this}drawHit(S,a){if(!this.shouldDrawHit(a))return this;const f=this.getLayer(),g=S||f&&f.hitCanvas,m=g&&g.getContext(),y=this._getCanvasCache();if(y&&y.hit){m.save();const c=this.getAbsoluteTransform(a).getMatrix();m.transform(c[0],c[1],c[2],c[3],c[4],c[5]),this._drawCachedHitCanvas(m),m.restore()}else this._drawChildren("drawHit",g,a);return this}_drawChildren(S,a,f,g){var m;const y=a&&a.getContext(),w=this.clipWidth(),c=this.clipHeight(),l=this.clipFunc(),d=typeof w=="number"&&typeof c=="number"||l,C=f===this;if(d){y.save();const b=this.getAbsoluteTransform(f);let h=b.getMatrix();y.transform(h[0],h[1],h[2],h[3],h[4],h[5]),y.beginPath();let s;if(l)s=l.call(this,y,this);else{const v=this.clipX(),P=this.clipY();y.rect(v||0,P||0,w,c)}y.clip.apply(y,s),h=b.copy().invert().getMatrix(),y.transform(h[0],h[1],h[2],h[3],h[4],h[5])}const k=!C&&this.globalCompositeOperation()!=="source-over"&&S==="drawScene";k&&(y.save(),y._applyGlobalCompositeOperation(this)),(m=this.children)===null||m===void 0||m.forEach(function(b){b[S](a,f,g)}),k&&y.restore(),d&&y.restore()}getClientRect(S={}){var a;const f=S.skipTransform,g=S.relativeTo;let m,y,w,c,l={x:1/0,y:1/0,width:0,height:0};const d=this;(a=this.children)===null||a===void 0||a.forEach(function(b){if(!b.visible())return;const h=b.getClientRect({relativeTo:d,skipShadow:S.skipShadow,skipStroke:S.skipStroke});h.width===0&&h.height===0||(m===void 0?(m=h.x,y=h.y,w=h.x+h.width,c=h.y+h.height):(m=Math.min(m,h.x),y=Math.min(y,h.y),w=Math.max(w,h.x+h.width),c=Math.max(c,h.y+h.height)))});const C=this.find("Shape");let k=!1;for(let b=0;b<C.length;b++)if(C[b]._isVisible(this)){k=!0;break}return k&&m!==void 0?l={x:m,y,width:w-m,height:c-y}:l={x:0,y:0,width:0,height:0},f?l:this._transformedRect(l,g)}};return pr.Container=O,o.Factory.addComponentsGetterSetter(O,"clip",["x","y","width","height"]),o.Factory.addGetterSetter(O,"clipX",void 0,(0,A.getNumberValidator)()),o.Factory.addGetterSetter(O,"clipY",void 0,(0,A.getNumberValidator)()),o.Factory.addGetterSetter(O,"clipWidth",void 0,(0,A.getNumberValidator)()),o.Factory.addGetterSetter(O,"clipHeight",void 0,(0,A.getNumberValidator)()),o.Factory.addGetterSetter(O,"clipFunc"),pr}var Ca={},pn={},Ul;function nc(){if(Ul)return pn;Ul=1,Object.defineProperty(pn,"__esModule",{value:!0}),pn.getCapturedShape=O,pn.createEvent=R,pn.hasPointerCapture=S,pn.setPointerCapture=a,pn.releaseCapture=f;const o=vt(),p=new Map,A=o.Konva._global.PointerEvent!==void 0;function O(g){return p.get(g)}function R(g){return{evt:g,pointerId:g.pointerId}}function S(g,m){return p.get(g)===m}function a(g,m){f(g),m.getStage()&&(p.set(g,m),A&&m._fire("gotpointercapture",R(new PointerEvent("gotpointercapture"))))}function f(g,m){const y=p.get(g);if(!y)return;const w=y.getStage();w&&w.content,p.delete(g),A&&y._fire("lostpointercapture",R(new PointerEvent("lostpointercapture")))}return pn}var zl;function Gh(){return zl||(zl=1,(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.Stage=o.stages=void 0;const p=Ut(),A=St(),O=Zi(),R=vt(),S=Ji(),a=Ia(),f=vt(),g=nc(),m="Stage",y="string",w="px",c="mouseout",l="mouseleave",d="mouseover",C="mouseenter",k="mousemove",b="mousedown",h="mouseup",s="pointermove",v="pointerdown",P="pointerup",I="pointercancel",z="lostpointercapture",E="pointerout",T="pointerleave",M="pointerover",U="pointerenter",B="contextmenu",W="touchstart",Y="touchend",V="touchmove",et="touchcancel",x="wheel",_=5,F=[[C,"_pointerenter"],[b,"_pointerdown"],[k,"_pointermove"],[h,"_pointerup"],[l,"_pointerleave"],[W,"_pointerdown"],[V,"_pointermove"],[Y,"_pointerup"],[et,"_pointercancel"],[d,"_pointerover"],[x,"_wheel"],[B,"_contextmenu"],[v,"_pointerdown"],[s,"_pointermove"],[P,"_pointerup"],[I,"_pointercancel"],[T,"_pointerleave"],[z,"_lostpointercapture"]],N={mouse:{[E]:c,[T]:l,[M]:d,[U]:C,[s]:k,[v]:b,[P]:h,[I]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[E]:"touchout",[T]:"touchleave",[M]:"touchover",[U]:"touchenter",[s]:V,[v]:W,[P]:Y,[I]:et,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[E]:E,[T]:T,[M]:M,[U]:U,[s]:s,[v]:v,[P]:P,[I]:I,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},G=X=>X.indexOf("pointer")>=0?"pointer":X.indexOf("touch")>=0?"touch":"mouse",K=X=>{const D=G(X);if(D==="pointer")return R.Konva.pointerEventsEnabled&&N.pointer;if(D==="touch")return N.touch;if(D==="mouse")return N.mouse};function H(X={}){return(X.clipFunc||X.clipWidth||X.clipHeight)&&p.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),X}const tt="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";o.stages=[];class nt extends O.Container{constructor(D){super(H(D)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),o.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{H(this.attrs)}),this._checkVisibility()}_validateAdd(D){const Q=D.getType()==="Layer",it=D.getType()==="FastLayer";Q||it||p.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const D=this.visible()?"":"none";this.content.style.display=D}setContainer(D){if(typeof D===y){let Q;if(D.charAt(0)==="."){const it=D.slice(1);D=document.getElementsByClassName(it)[0]}else D.charAt(0)!=="#"?Q=D:Q=D.slice(1),D=document.getElementById(Q);if(!D)throw"Can not find container in document with id "+Q}return this._setAttr("container",D),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),D.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const D=this.children,Q=D.length;for(let it=0;it<Q;it++)D[it].clear();return this}clone(D){return D||(D={}),D.container=typeof document<"u"&&document.createElement("div"),O.Container.prototype.clone.call(this,D)}destroy(){super.destroy();const D=this.content;D&&p.Util._isInDocument(D)&&this.container().removeChild(D);const Q=o.stages.indexOf(this);return Q>-1&&o.stages.splice(Q,1),p.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const D=this._pointerPositions[0]||this._changedPointerPositions[0];return D?{x:D.x,y:D.y}:(p.Util.warn(tt),null)}_getPointerById(D){return this._pointerPositions.find(Q=>Q.id===D)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(D){D=D||{},D.x=D.x||0,D.y=D.y||0,D.width=D.width||this.width(),D.height=D.height||this.height();const Q=new S.SceneCanvas({width:D.width,height:D.height,pixelRatio:D.pixelRatio||1}),it=Q.getContext()._context,st=this.children;return(D.x||D.y)&&it.translate(-1*D.x,-1*D.y),st.forEach(function(at){if(!at.isVisible())return;const ft=at._toKonvaCanvas(D);it.drawImage(ft._canvas,D.x,D.y,ft.getWidth()/ft.getPixelRatio(),ft.getHeight()/ft.getPixelRatio())}),Q}getIntersection(D){if(!D)return null;const Q=this.children,it=Q.length,st=it-1;for(let at=st;at>=0;at--){const ft=Q[at].getIntersection(D);if(ft)return ft}return null}_resizeDOM(){const D=this.width(),Q=this.height();this.content&&(this.content.style.width=D+w,this.content.style.height=Q+w),this.bufferCanvas.setSize(D,Q),this.bufferHitCanvas.setSize(D,Q),this.children.forEach(it=>{it.setSize({width:D,height:Q}),it.draw()})}add(D,...Q){if(arguments.length>1){for(let st=0;st<arguments.length;st++)this.add(arguments[st]);return this}super.add(D);const it=this.children.length;return it>_&&p.Util.warn("The stage has "+it+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),D.setSize({width:this.width(),height:this.height()}),D.draw(),R.Konva.isBrowser&&this.content.appendChild(D.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(D){return g.hasPointerCapture(D,this)}setPointerCapture(D){g.setPointerCapture(D,this)}releaseCapture(D){g.releaseCapture(D,this)}getLayers(){return this.children}_bindContentEvents(){R.Konva.isBrowser&&F.forEach(([D,Q])=>{this.content.addEventListener(D,it=>{this[Q](it)},{passive:!1})})}_pointerenter(D){this.setPointersPositions(D);const Q=K(D.type);Q&&this._fire(Q.pointerenter,{evt:D,target:this,currentTarget:this})}_pointerover(D){this.setPointersPositions(D);const Q=K(D.type);Q&&this._fire(Q.pointerover,{evt:D,target:this,currentTarget:this})}_getTargetShape(D){let Q=this[D+"targetShape"];return Q&&!Q.getStage()&&(Q=null),Q}_pointerleave(D){const Q=K(D.type),it=G(D.type);if(!Q)return;this.setPointersPositions(D);const st=this._getTargetShape(it),at=!(R.Konva.isDragging()||R.Konva.isTransforming())||R.Konva.hitOnDragEnabled;st&&at?(st._fireAndBubble(Q.pointerout,{evt:D}),st._fireAndBubble(Q.pointerleave,{evt:D}),this._fire(Q.pointerleave,{evt:D,target:this,currentTarget:this}),this[it+"targetShape"]=null):at&&(this._fire(Q.pointerleave,{evt:D,target:this,currentTarget:this}),this._fire(Q.pointerout,{evt:D,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(D){const Q=K(D.type),it=G(D.type);if(!Q)return;this.setPointersPositions(D);let st=!1;this._changedPointerPositions.forEach(at=>{const ft=this.getIntersection(at);if(a.DD.justDragged=!1,R.Konva["_"+it+"ListenClick"]=!0,!ft||!ft.isListening()){this[it+"ClickStartShape"]=void 0;return}R.Konva.capturePointerEventsEnabled&&ft.setPointerCapture(at.id),this[it+"ClickStartShape"]=ft,ft._fireAndBubble(Q.pointerdown,{evt:D,pointerId:at.id}),st=!0;const ht=D.type.indexOf("touch")>=0;ft.preventDefault()&&D.cancelable&&ht&&D.preventDefault()}),st||this._fire(Q.pointerdown,{evt:D,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(D){const Q=K(D.type),it=G(D.type);if(!Q||(R.Konva.isDragging()&&a.DD.node.preventDefault()&&D.cancelable&&D.preventDefault(),this.setPointersPositions(D),!(!(R.Konva.isDragging()||R.Konva.isTransforming())||R.Konva.hitOnDragEnabled)))return;const at={};let ft=!1;const ht=this._getTargetShape(it);this._changedPointerPositions.forEach(kt=>{const gt=g.getCapturedShape(kt.id)||this.getIntersection(kt),Ht=kt.id,Et={evt:D,pointerId:Ht},Ot=ht!==gt;if(Ot&&ht&&(ht._fireAndBubble(Q.pointerout,{...Et},gt),ht._fireAndBubble(Q.pointerleave,{...Et},gt)),gt){if(at[gt._id])return;at[gt._id]=!0}gt&&gt.isListening()?(ft=!0,Ot&&(gt._fireAndBubble(Q.pointerover,{...Et},ht),gt._fireAndBubble(Q.pointerenter,{...Et},ht),this[it+"targetShape"]=gt),gt._fireAndBubble(Q.pointermove,{...Et})):ht&&(this._fire(Q.pointerover,{evt:D,target:this,currentTarget:this,pointerId:Ht}),this[it+"targetShape"]=null)}),ft||this._fire(Q.pointermove,{evt:D,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(D){const Q=K(D.type),it=G(D.type);if(!Q)return;this.setPointersPositions(D);const st=this[it+"ClickStartShape"],at=this[it+"ClickEndShape"],ft={};let ht=!1;this._changedPointerPositions.forEach(kt=>{const gt=g.getCapturedShape(kt.id)||this.getIntersection(kt);if(gt){if(gt.releaseCapture(kt.id),ft[gt._id])return;ft[gt._id]=!0}const Ht=kt.id,Et={evt:D,pointerId:Ht};let Ot=!1;R.Konva["_"+it+"InDblClickWindow"]?(Ot=!0,clearTimeout(this[it+"DblTimeout"])):a.DD.justDragged||(R.Konva["_"+it+"InDblClickWindow"]=!0,clearTimeout(this[it+"DblTimeout"])),this[it+"DblTimeout"]=setTimeout(function(){R.Konva["_"+it+"InDblClickWindow"]=!1},R.Konva.dblClickWindow),gt&&gt.isListening()?(ht=!0,this[it+"ClickEndShape"]=gt,gt._fireAndBubble(Q.pointerup,{...Et}),R.Konva["_"+it+"ListenClick"]&&st&&st===gt&&(gt._fireAndBubble(Q.pointerclick,{...Et}),Ot&&at&&at===gt&&gt._fireAndBubble(Q.pointerdblclick,{...Et}))):(this[it+"ClickEndShape"]=null,R.Konva["_"+it+"ListenClick"]&&this._fire(Q.pointerclick,{evt:D,target:this,currentTarget:this,pointerId:Ht}),Ot&&this._fire(Q.pointerdblclick,{evt:D,target:this,currentTarget:this,pointerId:Ht}))}),ht||this._fire(Q.pointerup,{evt:D,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),R.Konva["_"+it+"ListenClick"]=!1,D.cancelable&&it!=="touch"&&it!=="pointer"&&D.preventDefault()}_contextmenu(D){this.setPointersPositions(D);const Q=this.getIntersection(this.getPointerPosition());Q&&Q.isListening()?Q._fireAndBubble(B,{evt:D}):this._fire(B,{evt:D,target:this,currentTarget:this})}_wheel(D){this.setPointersPositions(D);const Q=this.getIntersection(this.getPointerPosition());Q&&Q.isListening()?Q._fireAndBubble(x,{evt:D}):this._fire(x,{evt:D,target:this,currentTarget:this})}_pointercancel(D){this.setPointersPositions(D);const Q=g.getCapturedShape(D.pointerId)||this.getIntersection(this.getPointerPosition());Q&&Q._fireAndBubble(P,g.createEvent(D)),g.releaseCapture(D.pointerId)}_lostpointercapture(D){g.releaseCapture(D.pointerId)}setPointersPositions(D){const Q=this._getContentPosition();let it=null,st=null;D=D||window.event,D.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(D.touches,at=>{this._pointerPositions.push({id:at.identifier,x:(at.clientX-Q.left)/Q.scaleX,y:(at.clientY-Q.top)/Q.scaleY})}),Array.prototype.forEach.call(D.changedTouches||D.touches,at=>{this._changedPointerPositions.push({id:at.identifier,x:(at.clientX-Q.left)/Q.scaleX,y:(at.clientY-Q.top)/Q.scaleY})})):(it=(D.clientX-Q.left)/Q.scaleX,st=(D.clientY-Q.top)/Q.scaleY,this.pointerPos={x:it,y:st},this._pointerPositions=[{x:it,y:st,id:p.Util._getFirstPointerId(D)}],this._changedPointerPositions=[{x:it,y:st,id:p.Util._getFirstPointerId(D)}])}_setPointerPosition(D){p.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(D)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const D=this.content.getBoundingClientRect();return{top:D.top,left:D.left,scaleX:D.width/this.content.clientWidth||1,scaleY:D.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new S.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new S.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!R.Konva.isBrowser)return;const D=this.container();if(!D)throw"Stage has no container. A container is required.";D.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),D.appendChild(this.content),this._resizeDOM()}cache(){return p.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(D){D.batchDraw()}),this}}o.Stage=nt,nt.prototype.nodeType=m,(0,f._registerNode)(nt),A.Factory.addGetterSetter(nt,"container"),R.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{o.stages.forEach(X=>{X.batchDraw()})})})(Ca)),Ca}var mr={},wa={},Bl;function Zt(){return Bl||(Bl=1,(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.Shape=o.shapes=void 0;const p=vt(),A=Ut(),O=St(),R=Bt(),S=Ct(),a=vt(),f=nc(),g="hasShadow",m="shadowRGBA",y="patternImage",w="linearGradient",c="radialGradient";let l;function d(){return l||(l=A.Util.createCanvasElement().getContext("2d"),l)}o.shapes={};function C(T){const M=this.attrs.fillRule;M?T.fill(M):T.fill()}function k(T){T.stroke()}function b(T){const M=this.attrs.fillRule;M?T.fill(M):T.fill()}function h(T){T.stroke()}function s(){this._clearCache(g)}function v(){this._clearCache(m)}function P(){this._clearCache(y)}function I(){this._clearCache(w)}function z(){this._clearCache(c)}class E extends R.Node{constructor(M){super(M);let U;for(;U=A.Util.getRandomColor(),!(U&&!(U in o.shapes)););this.colorKey=U,o.shapes[U]=this}getContext(){return A.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return A.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(g,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(y,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const U=d().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(U&&U.setTransform){const B=new A.Transform;B.translate(this.fillPatternX(),this.fillPatternY()),B.rotate(p.Konva.getAngle(this.fillPatternRotation())),B.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),B.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const W=B.getMatrix(),Y=typeof DOMMatrix>"u"?{a:W[0],b:W[1],c:W[2],d:W[3],e:W[4],f:W[5]}:new DOMMatrix(W);U.setTransform(Y)}return U}}_getLinearGradient(){return this._getCache(w,this.__getLinearGradient)}__getLinearGradient(){const M=this.fillLinearGradientColorStops();if(M){const U=d(),B=this.fillLinearGradientStartPoint(),W=this.fillLinearGradientEndPoint(),Y=U.createLinearGradient(B.x,B.y,W.x,W.y);for(let V=0;V<M.length;V+=2)Y.addColorStop(M[V],M[V+1]);return Y}}_getRadialGradient(){return this._getCache(c,this.__getRadialGradient)}__getRadialGradient(){const M=this.fillRadialGradientColorStops();if(M){const U=d(),B=this.fillRadialGradientStartPoint(),W=this.fillRadialGradientEndPoint(),Y=U.createRadialGradient(B.x,B.y,this.fillRadialGradientStartRadius(),W.x,W.y,this.fillRadialGradientEndRadius());for(let V=0;V<M.length;V+=2)Y.addColorStop(M[V],M[V+1]);return Y}}getShadowRGBA(){return this._getCache(m,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const M=A.Util.colorToRGBA(this.shadowColor());if(M)return"rgba("+M.r+","+M.g+","+M.b+","+M.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const M=this.hitStrokeWidth();return M==="auto"?this.hasStroke():this.strokeEnabled()&&!!M}intersects(M){const U=this.getStage();if(!U)return!1;const B=U.bufferHitCanvas;return B.getContext().clear(),this.drawHit(B,void 0,!0),B.context.getImageData(Math.round(M.x),Math.round(M.y),1,1).data[3]>0}destroy(){return R.Node.prototype.destroy.call(this),delete o.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(M){var U;if(!((U=this.attrs.perfectDrawEnabled)!==null&&U!==void 0?U:!0))return!1;const W=M||this.hasFill(),Y=this.hasStroke(),V=this.getAbsoluteOpacity()!==1;if(W&&Y&&V)return!0;const et=this.hasShadow(),x=this.shadowForStrokeEnabled();return!!(W&&Y&&et&&x)}setStrokeHitEnabled(M){A.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),M?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const M=this.size();return{x:this._centroid?-M.width/2:0,y:this._centroid?-M.height/2:0,width:M.width,height:M.height}}getClientRect(M={}){let U=!1,B=this.getParent();for(;B;){if(B.isCached()){U=!0;break}B=B.getParent()}const W=M.skipTransform,Y=M.relativeTo||U&&this.getStage()||void 0,V=this.getSelfRect(),x=!M.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,_=V.width+x,F=V.height+x,N=!M.skipShadow&&this.hasShadow(),G=N?this.shadowOffsetX():0,K=N?this.shadowOffsetY():0,H=_+Math.abs(G),tt=F+Math.abs(K),nt=N&&this.shadowBlur()||0,X=H+nt*2,D=tt+nt*2,Q={width:X,height:D,x:-(x/2+nt)+Math.min(G,0)+V.x,y:-(x/2+nt)+Math.min(K,0)+V.y};return W?Q:this._transformedRect(Q,Y)}drawScene(M,U,B){const W=this.getLayer(),Y=M||W.getCanvas(),V=Y.getContext(),et=this._getCanvasCache(),x=this.getSceneFunc(),_=this.hasShadow();let F;const N=U===this;if(!this.isVisible()&&!N)return this;if(et){V.save();const G=this.getAbsoluteTransform(U).getMatrix();return V.transform(G[0],G[1],G[2],G[3],G[4],G[5]),this._drawCachedSceneCanvas(V),V.restore(),this}if(!x)return this;if(V.save(),this._useBufferCanvas()){F=this.getStage();const G=B||F.bufferCanvas,K=G.getContext();K.clear(),K.save(),K._applyLineJoin(this);const H=this.getAbsoluteTransform(U).getMatrix();K.transform(H[0],H[1],H[2],H[3],H[4],H[5]),x.call(this,K,this),K.restore();const tt=G.pixelRatio;_&&V._applyShadow(this),V._applyOpacity(this),V._applyGlobalCompositeOperation(this),V.drawImage(G._canvas,G.x||0,G.y||0,G.width/tt,G.height/tt)}else{if(V._applyLineJoin(this),!N){const G=this.getAbsoluteTransform(U).getMatrix();V.transform(G[0],G[1],G[2],G[3],G[4],G[5]),V._applyOpacity(this),V._applyGlobalCompositeOperation(this)}_&&V._applyShadow(this),x.call(this,V,this)}return V.restore(),this}drawHit(M,U,B=!1){if(!this.shouldDrawHit(U,B))return this;const W=this.getLayer(),Y=M||W.hitCanvas,V=Y&&Y.getContext(),et=this.hitFunc()||this.sceneFunc(),x=this._getCanvasCache(),_=x&&x.hit;if(this.colorKey||A.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),_){V.save();const N=this.getAbsoluteTransform(U).getMatrix();return V.transform(N[0],N[1],N[2],N[3],N[4],N[5]),this._drawCachedHitCanvas(V),V.restore(),this}if(!et)return this;if(V.save(),V._applyLineJoin(this),!(this===U)){const N=this.getAbsoluteTransform(U).getMatrix();V.transform(N[0],N[1],N[2],N[3],N[4],N[5])}return et.call(this,V,this),V.restore(),this}drawHitFromCache(M=0){const U=this._getCanvasCache(),B=this._getCachedSceneCanvas(),W=U.hit,Y=W.getContext(),V=W.getWidth(),et=W.getHeight();Y.clear(),Y.drawImage(B._canvas,0,0,V,et);try{const x=Y.getImageData(0,0,V,et),_=x.data,F=_.length,N=A.Util._hexToRgb(this.colorKey);for(let G=0;G<F;G+=4)_[G+3]>M?(_[G]=N.r,_[G+1]=N.g,_[G+2]=N.b,_[G+3]=255):_[G+3]=0;Y.putImageData(x,0,0)}catch(x){A.Util.error("Unable to draw hit graph from cached scene canvas. "+x.message)}return this}hasPointerCapture(M){return f.hasPointerCapture(M,this)}setPointerCapture(M){f.setPointerCapture(M,this)}releaseCapture(M){f.releaseCapture(M,this)}}o.Shape=E,E.prototype._fillFunc=C,E.prototype._strokeFunc=k,E.prototype._fillFuncHit=b,E.prototype._strokeFuncHit=h,E.prototype._centroid=!1,E.prototype.nodeType="Shape",(0,a._registerNode)(E),E.prototype.eventListeners={},E.prototype.on.call(E.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",s),E.prototype.on.call(E.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",v),E.prototype.on.call(E.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",P),E.prototype.on.call(E.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",I),E.prototype.on.call(E.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",z),O.Factory.addGetterSetter(E,"stroke",void 0,(0,S.getStringOrGradientValidator)()),O.Factory.addGetterSetter(E,"strokeWidth",2,(0,S.getNumberValidator)()),O.Factory.addGetterSetter(E,"fillAfterStrokeEnabled",!1),O.Factory.addGetterSetter(E,"hitStrokeWidth","auto",(0,S.getNumberOrAutoValidator)()),O.Factory.addGetterSetter(E,"strokeHitEnabled",!0,(0,S.getBooleanValidator)()),O.Factory.addGetterSetter(E,"perfectDrawEnabled",!0,(0,S.getBooleanValidator)()),O.Factory.addGetterSetter(E,"shadowForStrokeEnabled",!0,(0,S.getBooleanValidator)()),O.Factory.addGetterSetter(E,"lineJoin"),O.Factory.addGetterSetter(E,"lineCap"),O.Factory.addGetterSetter(E,"sceneFunc"),O.Factory.addGetterSetter(E,"hitFunc"),O.Factory.addGetterSetter(E,"dash"),O.Factory.addGetterSetter(E,"dashOffset",0,(0,S.getNumberValidator)()),O.Factory.addGetterSetter(E,"shadowColor",void 0,(0,S.getStringValidator)()),O.Factory.addGetterSetter(E,"shadowBlur",0,(0,S.getNumberValidator)()),O.Factory.addGetterSetter(E,"shadowOpacity",1,(0,S.getNumberValidator)()),O.Factory.addComponentsGetterSetter(E,"shadowOffset",["x","y"]),O.Factory.addGetterSetter(E,"shadowOffsetX",0,(0,S.getNumberValidator)()),O.Factory.addGetterSetter(E,"shadowOffsetY",0,(0,S.getNumberValidator)()),O.Factory.addGetterSetter(E,"fillPatternImage"),O.Factory.addGetterSetter(E,"fill",void 0,(0,S.getStringOrGradientValidator)()),O.Factory.addGetterSetter(E,"fillPatternX",0,(0,S.getNumberValidator)()),O.Factory.addGetterSetter(E,"fillPatternY",0,(0,S.getNumberValidator)()),O.Factory.addGetterSetter(E,"fillLinearGradientColorStops"),O.Factory.addGetterSetter(E,"strokeLinearGradientColorStops"),O.Factory.addGetterSetter(E,"fillRadialGradientStartRadius",0),O.Factory.addGetterSetter(E,"fillRadialGradientEndRadius",0),O.Factory.addGetterSetter(E,"fillRadialGradientColorStops"),O.Factory.addGetterSetter(E,"fillPatternRepeat","repeat"),O.Factory.addGetterSetter(E,"fillEnabled",!0),O.Factory.addGetterSetter(E,"strokeEnabled",!0),O.Factory.addGetterSetter(E,"shadowEnabled",!0),O.Factory.addGetterSetter(E,"dashEnabled",!0),O.Factory.addGetterSetter(E,"strokeScaleEnabled",!0),O.Factory.addGetterSetter(E,"fillPriority","color"),O.Factory.addComponentsGetterSetter(E,"fillPatternOffset",["x","y"]),O.Factory.addGetterSetter(E,"fillPatternOffsetX",0,(0,S.getNumberValidator)()),O.Factory.addGetterSetter(E,"fillPatternOffsetY",0,(0,S.getNumberValidator)()),O.Factory.addComponentsGetterSetter(E,"fillPatternScale",["x","y"]),O.Factory.addGetterSetter(E,"fillPatternScaleX",1,(0,S.getNumberValidator)()),O.Factory.addGetterSetter(E,"fillPatternScaleY",1,(0,S.getNumberValidator)()),O.Factory.addComponentsGetterSetter(E,"fillLinearGradientStartPoint",["x","y"]),O.Factory.addComponentsGetterSetter(E,"strokeLinearGradientStartPoint",["x","y"]),O.Factory.addGetterSetter(E,"fillLinearGradientStartPointX",0),O.Factory.addGetterSetter(E,"strokeLinearGradientStartPointX",0),O.Factory.addGetterSetter(E,"fillLinearGradientStartPointY",0),O.Factory.addGetterSetter(E,"strokeLinearGradientStartPointY",0),O.Factory.addComponentsGetterSetter(E,"fillLinearGradientEndPoint",["x","y"]),O.Factory.addComponentsGetterSetter(E,"strokeLinearGradientEndPoint",["x","y"]),O.Factory.addGetterSetter(E,"fillLinearGradientEndPointX",0),O.Factory.addGetterSetter(E,"strokeLinearGradientEndPointX",0),O.Factory.addGetterSetter(E,"fillLinearGradientEndPointY",0),O.Factory.addGetterSetter(E,"strokeLinearGradientEndPointY",0),O.Factory.addComponentsGetterSetter(E,"fillRadialGradientStartPoint",["x","y"]),O.Factory.addGetterSetter(E,"fillRadialGradientStartPointX",0),O.Factory.addGetterSetter(E,"fillRadialGradientStartPointY",0),O.Factory.addComponentsGetterSetter(E,"fillRadialGradientEndPoint",["x","y"]),O.Factory.addGetterSetter(E,"fillRadialGradientEndPointX",0),O.Factory.addGetterSetter(E,"fillRadialGradientEndPointY",0),O.Factory.addGetterSetter(E,"fillPatternRotation",0),O.Factory.addGetterSetter(E,"fillRule",void 0,(0,S.getStringValidator)()),O.Factory.backCompat(E,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})})(wa)),wa}var Vl;function rc(){if(Vl)return mr;Vl=1,Object.defineProperty(mr,"__esModule",{value:!0}),mr.Layer=void 0;const o=Ut(),p=Zi(),A=Bt(),O=St(),R=Ji(),S=Ct(),a=Zt(),f=vt(),g="#",m="beforeDraw",y="draw",w=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],c=w.length;class l extends p.Container{constructor(C){super(C),this.canvas=new R.SceneCanvas,this.hitCanvas=new R.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(C){return this.getContext().clear(C),this.getHitCanvas().getContext().clear(C),this}setZIndex(C){super.setZIndex(C);const k=this.getStage();return k&&k.content&&(k.content.removeChild(this.getNativeCanvasElement()),C<k.children.length-1?k.content.insertBefore(this.getNativeCanvasElement(),k.children[C+1].getCanvas()._canvas):k.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){A.Node.prototype.moveToTop.call(this);const C=this.getStage();return C&&C.content&&(C.content.removeChild(this.getNativeCanvasElement()),C.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!A.Node.prototype.moveUp.call(this))return!1;const k=this.getStage();return!k||!k.content?!1:(k.content.removeChild(this.getNativeCanvasElement()),this.index<k.children.length-1?k.content.insertBefore(this.getNativeCanvasElement(),k.children[this.index+1].getCanvas()._canvas):k.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(A.Node.prototype.moveDown.call(this)){const C=this.getStage();if(C){const k=C.children;C.content&&(C.content.removeChild(this.getNativeCanvasElement()),C.content.insertBefore(this.getNativeCanvasElement(),k[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(A.Node.prototype.moveToBottom.call(this)){const C=this.getStage();if(C){const k=C.children;C.content&&(C.content.removeChild(this.getNativeCanvasElement()),C.content.insertBefore(this.getNativeCanvasElement(),k[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const C=this.getNativeCanvasElement();return A.Node.prototype.remove.call(this),C&&C.parentNode&&o.Util._isInDocument(C)&&C.parentNode.removeChild(C),this}getStage(){return this.parent}setSize({width:C,height:k}){return this.canvas.setSize(C,k),this.hitCanvas.setSize(C,k),this._setSmoothEnabled(),this}_validateAdd(C){const k=C.getType();k!=="Group"&&k!=="Shape"&&o.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(C){return C=C||{},C.width=C.width||this.getWidth(),C.height=C.height||this.getHeight(),C.x=C.x!==void 0?C.x:this.x(),C.y=C.y!==void 0?C.y:this.y(),A.Node.prototype._toKonvaCanvas.call(this,C)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){o.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){o.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,o.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(C){if(!this.isListening()||!this.isVisible())return null;let k=1,b=!1;for(;;){for(let h=0;h<c;h++){const s=w[h],v=this._getIntersection({x:C.x+s.x*k,y:C.y+s.y*k}),P=v.shape;if(P)return P;if(b=!!v.antialiased,!v.antialiased)break}if(b)k+=1;else return null}}_getIntersection(C){const k=this.hitCanvas.pixelRatio,b=this.hitCanvas.context.getImageData(Math.round(C.x*k),Math.round(C.y*k),1,1).data,h=b[3];if(h===255){const s=o.Util._rgbToHex(b[0],b[1],b[2]),v=a.shapes[g+s];return v?{shape:v}:{antialiased:!0}}else if(h>0)return{antialiased:!0};return{}}drawScene(C,k,b){const h=this.getLayer(),s=C||h&&h.getCanvas();return this._fire(m,{node:this}),this.clearBeforeDraw()&&s.getContext().clear(),p.Container.prototype.drawScene.call(this,s,k,b),this._fire(y,{node:this}),this}drawHit(C,k){const b=this.getLayer(),h=C||b&&b.hitCanvas;return b&&b.clearBeforeDraw()&&b.getHitCanvas().getContext().clear(),p.Container.prototype.drawHit.call(this,h,k),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(C){o.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(C)}getHitGraphEnabled(C){return o.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const C=this.parent;!!this.hitCanvas._canvas.parentNode?C.content.removeChild(this.hitCanvas._canvas):C.content.appendChild(this.hitCanvas._canvas)}destroy(){return o.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}}return mr.Layer=l,l.prototype.nodeType="Layer",(0,f._registerNode)(l),O.Factory.addGetterSetter(l,"imageSmoothingEnabled",!0),O.Factory.addGetterSetter(l,"clearBeforeDraw",!0),O.Factory.addGetterSetter(l,"hitGraphEnabled",!0,(0,S.getBooleanValidator)()),mr}var yr={},Hl;function Dh(){if(Hl)return yr;Hl=1,Object.defineProperty(yr,"__esModule",{value:!0}),yr.FastLayer=void 0;const o=Ut(),p=rc(),A=vt();let O=class extends p.Layer{constructor(S){super(S),this.listening(!1),o.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}};return yr.FastLayer=O,O.prototype.nodeType="FastLayer",(0,A._registerNode)(O),yr}var vr={},Wl;function Oa(){if(Wl)return vr;Wl=1,Object.defineProperty(vr,"__esModule",{value:!0}),vr.Group=void 0;const o=Ut(),p=Zi(),A=vt();let O=class extends p.Container{_validateAdd(S){const a=S.getType();a!=="Group"&&a!=="Shape"&&o.Util.throw("You may only add groups and shapes to groups.")}};return vr.Group=O,O.prototype.nodeType="Group",(0,A._registerNode)(O),vr}var _r={},ql;function Ga(){if(ql)return _r;ql=1,Object.defineProperty(_r,"__esModule",{value:!0}),_r.Animation=void 0;const o=vt(),p=Ut(),A=(function(){return o.glob.performance&&o.glob.performance.now?function(){return o.glob.performance.now()}:function(){return new Date().getTime()}})();let O=class Kn{constructor(S,a){this.id=Kn.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:A(),frameRate:0},this.func=S,this.setLayers(a)}setLayers(S){let a=[];return S&&(a=Array.isArray(S)?S:[S]),this.layers=a,this}getLayers(){return this.layers}addLayer(S){const a=this.layers,f=a.length;for(let g=0;g<f;g++)if(a[g]._id===S._id)return!1;return this.layers.push(S),!0}isRunning(){const a=Kn.animations,f=a.length;for(let g=0;g<f;g++)if(a[g].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=A(),Kn._addAnimation(this),this}stop(){return Kn._removeAnimation(this),this}_updateFrameObject(S){this.frame.timeDiff=S-this.frame.lastTime,this.frame.lastTime=S,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(S){this.animations.push(S),this._handleAnimation()}static _removeAnimation(S){const a=S.id,f=this.animations,g=f.length;for(let m=0;m<g;m++)if(f[m].id===a){this.animations.splice(m,1);break}}static _runFrames(){const S={},a=this.animations;for(let f=0;f<a.length;f++){const g=a[f],m=g.layers,y=g.func;g._updateFrameObject(A());const w=m.length;let c;if(y?c=y.call(g,g.frame)!==!1:c=!0,!!c)for(let l=0;l<w;l++){const d=m[l];d._id!==void 0&&(S[d._id]=d)}}for(const f in S)S.hasOwnProperty(f)&&S[f].batchDraw()}static _animationLoop(){const S=Kn;S.animations.length?(S._runFrames(),p.Util.requestAnimFrame(S._animationLoop)):S.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,p.Util.requestAnimFrame(this._animationLoop))}};return _r.Animation=O,O.animations=[],O.animIdCounter=0,O.animRunning=!1,_r}var xa={},jl;function Uh(){return jl||(jl=1,(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.Easings=o.Tween=void 0;const p=Ut(),A=Ga(),O=Bt(),R=vt(),S={node:1,duration:1,easing:1,onFinish:1,yoyo:1},a=1,f=2,g=3,m=["fill","stroke","shadowColor"];let y=0;class w{constructor(d,C,k,b,h,s,v){this.prop=d,this.propFunc=C,this.begin=b,this._pos=b,this.duration=s,this._change=0,this.prevPos=0,this.yoyo=v,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=k,this._change=h-this.begin,this.pause()}fire(d){const C=this[d];C&&C()}setTime(d){d>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():d<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=d,this.update())}getTime(){return this._time}setPosition(d){this.prevPos=this._pos,this.propFunc(d),this._pos=d}getPosition(d){return d===void 0&&(d=this._time),this.func(d,this.begin,this._change,this.duration)}play(){this.state=f,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=g,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(d){this.pause(),this._time=d,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const d=this.getTimer()-this._startTime;this.state===f?this.setTime(d):this.state===g&&this.setTime(this.duration-d)}pause(){this.state=a,this.fire("onPause")}getTimer(){return new Date().getTime()}}class c{constructor(d){const C=this,k=d.node,b=k._id,h=d.easing||o.Easings.Linear,s=!!d.yoyo;let v,P;typeof d.duration>"u"?v=.3:d.duration===0?v=.001:v=d.duration,this.node=k,this._id=y++;const I=k.getLayer()||(k instanceof R.Konva.Stage?k.getLayers():null);I||p.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new A.Animation(function(){C.tween.onEnterFrame()},I),this.tween=new w(P,function(z){C._tweenFunc(z)},h,0,1,v*1e3,s),this._addListeners(),c.attrs[b]||(c.attrs[b]={}),c.attrs[b][this._id]||(c.attrs[b][this._id]={}),c.tweens[b]||(c.tweens[b]={});for(P in d)S[P]===void 0&&this._addAttr(P,d[P]);this.reset(),this.onFinish=d.onFinish,this.onReset=d.onReset,this.onUpdate=d.onUpdate}_addAttr(d,C){const k=this.node,b=k._id;let h,s,v,P,I;const z=c.tweens[b][d];z&&delete c.attrs[b][z][d];let E=k.getAttr(d);if(p.Util._isArray(C))if(h=[],s=Math.max(C.length,E.length),d==="points"&&C.length!==E.length&&(C.length>E.length?(P=E,E=p.Util._prepareArrayForTween(E,C,k.closed())):(v=C,C=p.Util._prepareArrayForTween(C,E,k.closed()))),d.indexOf("fill")===0)for(let T=0;T<s;T++)if(T%2===0)h.push(C[T]-E[T]);else{const M=p.Util.colorToRGBA(E[T]);I=p.Util.colorToRGBA(C[T]),E[T]=M,h.push({r:I.r-M.r,g:I.g-M.g,b:I.b-M.b,a:I.a-M.a})}else for(let T=0;T<s;T++)h.push(C[T]-E[T]);else m.indexOf(d)!==-1?(E=p.Util.colorToRGBA(E),I=p.Util.colorToRGBA(C),h={r:I.r-E.r,g:I.g-E.g,b:I.b-E.b,a:I.a-E.a}):h=C-E;c.attrs[b][this._id][d]={start:E,diff:h,end:C,trueEnd:v,trueStart:P},c.tweens[b][d]=this._id}_tweenFunc(d){const C=this.node,k=c.attrs[C._id][this._id];let b,h,s,v,P,I,z,E;for(b in k){if(h=k[b],s=h.start,v=h.diff,E=h.end,p.Util._isArray(s))if(P=[],z=Math.max(s.length,E.length),b.indexOf("fill")===0)for(I=0;I<z;I++)I%2===0?P.push((s[I]||0)+v[I]*d):P.push("rgba("+Math.round(s[I].r+v[I].r*d)+","+Math.round(s[I].g+v[I].g*d)+","+Math.round(s[I].b+v[I].b*d)+","+(s[I].a+v[I].a*d)+")");else for(I=0;I<z;I++)P.push((s[I]||0)+v[I]*d);else m.indexOf(b)!==-1?P="rgba("+Math.round(s.r+v.r*d)+","+Math.round(s.g+v.g*d)+","+Math.round(s.b+v.b*d)+","+(s.a+v.a*d)+")":P=s+v*d;C.setAttr(b,P)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const d=this.node,C=c.attrs[d._id][this._id];C.points&&C.points.trueEnd&&d.setAttr("points",C.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const d=this.node,C=c.attrs[d._id][this._id];C.points&&C.points.trueStart&&d.points(C.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(d){return this.tween.seek(d*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const d=this.node._id,C=this._id,k=c.tweens[d];this.pause(),this.anim&&this.anim.stop();for(const b in k)delete c.tweens[d][b];delete c.attrs[d][C],c.tweens[d]&&(Object.keys(c.tweens[d]).length===0&&delete c.tweens[d],Object.keys(c.attrs[d]).length===0&&delete c.attrs[d])}}o.Tween=c,c.attrs={},c.tweens={},O.Node.prototype.to=function(l){const d=l.onFinish;l.node=this,l.onFinish=function(){this.destroy(),d&&d()},new c(l).play()},o.Easings={BackEaseIn(l,d,C,k){return C*(l/=k)*l*((1.70158+1)*l-1.70158)+d},BackEaseOut(l,d,C,k){return C*((l=l/k-1)*l*((1.70158+1)*l+1.70158)+1)+d},BackEaseInOut(l,d,C,k){let b=1.70158;return(l/=k/2)<1?C/2*(l*l*(((b*=1.525)+1)*l-b))+d:C/2*((l-=2)*l*(((b*=1.525)+1)*l+b)+2)+d},ElasticEaseIn(l,d,C,k,b,h){let s=0;return l===0?d:(l/=k)===1?d+C:(h||(h=k*.3),!b||b<Math.abs(C)?(b=C,s=h/4):s=h/(2*Math.PI)*Math.asin(C/b),-(b*Math.pow(2,10*(l-=1))*Math.sin((l*k-s)*(2*Math.PI)/h))+d)},ElasticEaseOut(l,d,C,k,b,h){let s=0;return l===0?d:(l/=k)===1?d+C:(h||(h=k*.3),!b||b<Math.abs(C)?(b=C,s=h/4):s=h/(2*Math.PI)*Math.asin(C/b),b*Math.pow(2,-10*l)*Math.sin((l*k-s)*(2*Math.PI)/h)+C+d)},ElasticEaseInOut(l,d,C,k,b,h){let s=0;return l===0?d:(l/=k/2)===2?d+C:(h||(h=k*(.3*1.5)),!b||b<Math.abs(C)?(b=C,s=h/4):s=h/(2*Math.PI)*Math.asin(C/b),l<1?-.5*(b*Math.pow(2,10*(l-=1))*Math.sin((l*k-s)*(2*Math.PI)/h))+d:b*Math.pow(2,-10*(l-=1))*Math.sin((l*k-s)*(2*Math.PI)/h)*.5+C+d)},BounceEaseOut(l,d,C,k){return(l/=k)<1/2.75?C*(7.5625*l*l)+d:l<2/2.75?C*(7.5625*(l-=1.5/2.75)*l+.75)+d:l<2.5/2.75?C*(7.5625*(l-=2.25/2.75)*l+.9375)+d:C*(7.5625*(l-=2.625/2.75)*l+.984375)+d},BounceEaseIn(l,d,C,k){return C-o.Easings.BounceEaseOut(k-l,0,C,k)+d},BounceEaseInOut(l,d,C,k){return l<k/2?o.Easings.BounceEaseIn(l*2,0,C,k)*.5+d:o.Easings.BounceEaseOut(l*2-k,0,C,k)*.5+C*.5+d},EaseIn(l,d,C,k){return C*(l/=k)*l+d},EaseOut(l,d,C,k){return-C*(l/=k)*(l-2)+d},EaseInOut(l,d,C,k){return(l/=k/2)<1?C/2*l*l+d:-C/2*(--l*(l-2)-1)+d},StrongEaseIn(l,d,C,k){return C*(l/=k)*l*l*l*l+d},StrongEaseOut(l,d,C,k){return C*((l=l/k-1)*l*l*l*l+1)+d},StrongEaseInOut(l,d,C,k){return(l/=k/2)<1?C/2*l*l*l*l*l+d:C/2*((l-=2)*l*l*l*l+2)+d},Linear(l,d,C,k){return C*l/k+d}}})(xa)),xa}var Kl;function La(){return Kl||(Kl=1,(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.Konva=void 0;const p=vt(),A=Ut(),O=Bt(),R=Zi(),S=Gh(),a=rc(),f=Dh(),g=Oa(),m=Ia(),y=Zt(),w=Ga(),c=Uh(),l=ec(),d=Ji();o.Konva=A.Util._assign(p.Konva,{Util:A.Util,Transform:A.Transform,Node:O.Node,Container:R.Container,Stage:S.Stage,stages:S.stages,Layer:a.Layer,FastLayer:f.FastLayer,Group:g.Group,DD:m.DD,Shape:y.Shape,shapes:y.shapes,Animation:w.Animation,Tween:c.Tween,Easings:c.Easings,Context:l.Context,Canvas:d.Canvas}),o.default=o.Konva})(ma)),ma}var Sr={},Yl;function zh(){if(Yl)return Sr;Yl=1,Object.defineProperty(Sr,"__esModule",{value:!0}),Sr.Arc=void 0;const o=St(),p=Zt(),A=vt(),O=Ct(),R=vt();let S=class extends p.Shape{_sceneFunc(f){const g=A.Konva.getAngle(this.angle()),m=this.clockwise();f.beginPath(),f.arc(0,0,this.outerRadius(),0,g,m),f.arc(0,0,this.innerRadius(),g,0,!m),f.closePath(),f.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(f){this.outerRadius(f/2)}setHeight(f){this.outerRadius(f/2)}getSelfRect(){const f=this.innerRadius(),g=this.outerRadius(),m=this.clockwise(),y=A.Konva.getAngle(m?360-this.angle():this.angle()),w=Math.cos(Math.min(y,Math.PI)),c=1,l=Math.sin(Math.min(Math.max(Math.PI,y),3*Math.PI/2)),d=Math.sin(Math.min(y,Math.PI/2)),C=w*(w>0?f:g),k=c*g,b=l*(l>0?f:g),h=d*(d>0?g:f);return{x:C,y:m?-1*h:b,width:k-C,height:h-b}}};return Sr.Arc=S,S.prototype._centroid=!0,S.prototype.className="Arc",S.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"],(0,R._registerNode)(S),o.Factory.addGetterSetter(S,"innerRadius",0,(0,O.getNumberValidator)()),o.Factory.addGetterSetter(S,"outerRadius",0,(0,O.getNumberValidator)()),o.Factory.addGetterSetter(S,"angle",0,(0,O.getNumberValidator)()),o.Factory.addGetterSetter(S,"clockwise",!1,(0,O.getBooleanValidator)()),Sr}var Cr={},wr={},Xl;function ic(){if(Xl)return wr;Xl=1,Object.defineProperty(wr,"__esModule",{value:!0}),wr.Line=void 0;const o=St(),p=vt(),A=Zt(),O=Ct();function R(f,g,m,y,w,c,l){const d=Math.sqrt(Math.pow(m-f,2)+Math.pow(y-g,2)),C=Math.sqrt(Math.pow(w-m,2)+Math.pow(c-y,2)),k=l*d/(d+C),b=l*C/(d+C),h=m-k*(w-f),s=y-k*(c-g),v=m+b*(w-f),P=y+b*(c-g);return[h,s,v,P]}function S(f,g){const m=f.length,y=[];for(let w=2;w<m-2;w+=2){const c=R(f[w-2],f[w-1],f[w],f[w+1],f[w+2],f[w+3],g);isNaN(c[0])||(y.push(c[0]),y.push(c[1]),y.push(f[w]),y.push(f[w+1]),y.push(c[2]),y.push(c[3]))}return y}let a=class extends A.Shape{constructor(g){super(g),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(g){const m=this.points(),y=m.length,w=this.tension(),c=this.closed(),l=this.bezier();if(!y)return;let d=0;if(g.beginPath(),g.moveTo(m[0],m[1]),w!==0&&y>4){const C=this.getTensionPoints(),k=C.length;for(d=c?0:4,c||g.quadraticCurveTo(C[0],C[1],C[2],C[3]);d<k-2;)g.bezierCurveTo(C[d++],C[d++],C[d++],C[d++],C[d++],C[d++]);c||g.quadraticCurveTo(C[k-2],C[k-1],m[y-2],m[y-1])}else if(l)for(d=2;d<y;)g.bezierCurveTo(m[d++],m[d++],m[d++],m[d++],m[d++],m[d++]);else for(d=2;d<y;d+=2)g.lineTo(m[d],m[d+1]);c?(g.closePath(),g.fillStrokeShape(this)):g.strokeShape(this)}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():S(this.points(),this.tension())}_getTensionPointsClosed(){const g=this.points(),m=g.length,y=this.tension(),w=R(g[m-2],g[m-1],g[0],g[1],g[2],g[3],y),c=R(g[m-4],g[m-3],g[m-2],g[m-1],g[0],g[1],y),l=S(g,y);return[w[2],w[3]].concat(l).concat([c[0],c[1],g[m-2],g[m-1],c[2],c[3],w[0],w[1],g[0],g[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let g=this.points();if(g.length<4)return{x:g[0]||0,y:g[1]||0,width:0,height:0};this.tension()!==0?g=[g[0],g[1],...this._getTensionPoints(),g[g.length-2],g[g.length-1]]:g=this.points();let m=g[0],y=g[0],w=g[1],c=g[1],l,d;for(let C=0;C<g.length/2;C++)l=g[C*2],d=g[C*2+1],m=Math.min(m,l),y=Math.max(y,l),w=Math.min(w,d),c=Math.max(c,d);return{x:m,y:w,width:y-m,height:c-w}}};return wr.Line=a,a.prototype.className="Line",a.prototype._attrsAffectingSize=["points","bezier","tension"],(0,p._registerNode)(a),o.Factory.addGetterSetter(a,"closed",!1),o.Factory.addGetterSetter(a,"bezier",!1),o.Factory.addGetterSetter(a,"tension",0,(0,O.getNumberValidator)()),o.Factory.addGetterSetter(a,"points",[],(0,O.getNumberArrayValidator)()),wr}var xr={},Pa={},Ql;function Bh(){return Ql||(Ql=1,(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.t2length=o.getQuadraticArcLength=o.getCubicArcLength=o.binomialCoefficients=o.cValues=o.tValues=void 0,o.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],o.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],o.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const p=(a,f,g)=>{let m,y;const c=g/2;m=0;for(let l=0;l<20;l++)y=c*o.tValues[20][l]+c,m+=o.cValues[20][l]*O(a,f,y);return c*m};o.getCubicArcLength=p;const A=(a,f,g)=>{g===void 0&&(g=1);const m=a[0]-2*a[1]+a[2],y=f[0]-2*f[1]+f[2],w=2*a[1]-2*a[0],c=2*f[1]-2*f[0],l=4*(m*m+y*y),d=4*(m*w+y*c),C=w*w+c*c;if(l===0)return g*Math.sqrt(Math.pow(a[2]-a[0],2)+Math.pow(f[2]-f[0],2));const k=d/(2*l),b=C/l,h=g+k,s=b-k*k,v=h*h+s>0?Math.sqrt(h*h+s):0,P=k*k+s>0?Math.sqrt(k*k+s):0,I=k+Math.sqrt(k*k+s)!==0?s*Math.log(Math.abs((h+v)/(k+P))):0;return Math.sqrt(l)/2*(h*v-k*P+I)};o.getQuadraticArcLength=A;function O(a,f,g){const m=R(1,g,a),y=R(1,g,f),w=m*m+y*y;return Math.sqrt(w)}const R=(a,f,g)=>{const m=g.length-1;let y,w;if(m===0)return 0;if(a===0){w=0;for(let c=0;c<=m;c++)w+=o.binomialCoefficients[m][c]*Math.pow(1-f,m-c)*Math.pow(f,c)*g[c];return w}else{y=new Array(m);for(let c=0;c<m;c++)y[c]=m*(g[c+1]-g[c]);return R(a-1,f,y)}},S=(a,f,g)=>{let m=1,y=a/f,w=(a-g(y))/f,c=0;for(;m>.001;){const l=g(y+w),d=Math.abs(a-l)/f;if(d<m)m=d,y+=w;else{const C=g(y-w),k=Math.abs(a-C)/f;k<m?(m=k,y-=w):w/=2}if(c++,c>500)break}return y};o.t2length=S})(Pa)),Pa}var Jl;function Da(){if(Jl)return xr;Jl=1,Object.defineProperty(xr,"__esModule",{value:!0}),xr.Path=void 0;const o=St(),p=vt(),A=Zt(),O=Bh();let R=class ve extends A.Shape{constructor(a){super(a),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=ve.parsePathData(this.data()),this.pathLength=ve.getPathLength(this.dataArray)}_sceneFunc(a){const f=this.dataArray;a.beginPath();let g=!1;for(let m=0;m<f.length;m++){const y=f[m].command,w=f[m].points;switch(y){case"L":a.lineTo(w[0],w[1]);break;case"M":a.moveTo(w[0],w[1]);break;case"C":a.bezierCurveTo(w[0],w[1],w[2],w[3],w[4],w[5]);break;case"Q":a.quadraticCurveTo(w[0],w[1],w[2],w[3]);break;case"A":const c=w[0],l=w[1],d=w[2],C=w[3],k=w[4],b=w[5],h=w[6],s=w[7],v=d>C?d:C,P=d>C?1:d/C,I=d>C?C/d:1;a.translate(c,l),a.rotate(h),a.scale(P,I),a.arc(0,0,v,k,k+b,1-s),a.scale(1/P,1/I),a.rotate(-h),a.translate(-c,-l);break;case"z":g=!0,a.closePath();break}}!g&&!this.hasFill()?a.strokeShape(this):a.fillStrokeShape(this)}getSelfRect(){let a=[];this.dataArray.forEach(function(l){if(l.command==="A"){const d=l.points[4],C=l.points[5],k=l.points[4]+C;let b=Math.PI/180;if(Math.abs(d-k)<b&&(b=Math.abs(d-k)),C<0)for(let h=d-b;h>k;h-=b){const s=ve.getPointOnEllipticalArc(l.points[0],l.points[1],l.points[2],l.points[3],h,0);a.push(s.x,s.y)}else for(let h=d+b;h<k;h+=b){const s=ve.getPointOnEllipticalArc(l.points[0],l.points[1],l.points[2],l.points[3],h,0);a.push(s.x,s.y)}}else if(l.command==="C")for(let d=0;d<=1;d+=.01){const C=ve.getPointOnCubicBezier(d,l.start.x,l.start.y,l.points[0],l.points[1],l.points[2],l.points[3],l.points[4],l.points[5]);a.push(C.x,C.y)}else a=a.concat(l.points)});let f=a[0],g=a[0],m=a[1],y=a[1],w,c;for(let l=0;l<a.length/2;l++)w=a[l*2],c=a[l*2+1],isNaN(w)||(f=Math.min(f,w),g=Math.max(g,w)),isNaN(c)||(m=Math.min(m,c),y=Math.max(y,c));return{x:f,y:m,width:g-f,height:y-m}}getLength(){return this.pathLength}getPointAtLength(a){return ve.getPointAtLengthOfDataArray(a,this.dataArray)}static getLineLength(a,f,g,m){return Math.sqrt((g-a)*(g-a)+(m-f)*(m-f))}static getPathLength(a){let f=0;for(let g=0;g<a.length;++g)f+=a[g].pathLength;return f}static getPointAtLengthOfDataArray(a,f){let g,m=0,y=f.length;if(!y)return null;for(;m<y&&a>f[m].pathLength;)a-=f[m].pathLength,++m;if(m===y)return g=f[m-1].points.slice(-2),{x:g[0],y:g[1]};if(a<.01)return f[m].command==="M"?(g=f[m].points.slice(0,2),{x:g[0],y:g[1]}):{x:f[m].start.x,y:f[m].start.y};const w=f[m],c=w.points;switch(w.command){case"L":return ve.getPointOnLine(a,w.start.x,w.start.y,c[0],c[1]);case"C":return ve.getPointOnCubicBezier((0,O.t2length)(a,ve.getPathLength(f),v=>(0,O.getCubicArcLength)([w.start.x,c[0],c[2],c[4]],[w.start.y,c[1],c[3],c[5]],v)),w.start.x,w.start.y,c[0],c[1],c[2],c[3],c[4],c[5]);case"Q":return ve.getPointOnQuadraticBezier((0,O.t2length)(a,ve.getPathLength(f),v=>(0,O.getQuadraticArcLength)([w.start.x,c[0],c[2]],[w.start.y,c[1],c[3]],v)),w.start.x,w.start.y,c[0],c[1],c[2],c[3]);case"A":const l=c[0],d=c[1],C=c[2],k=c[3],b=c[5],h=c[6];let s=c[4];return s+=b*a/w.pathLength,ve.getPointOnEllipticalArc(l,d,C,k,s,h)}return null}static getPointOnLine(a,f,g,m,y,w,c){w=w??f,c=c??g;const l=this.getLineLength(f,g,m,y);if(l<1e-10)return{x:f,y:g};if(m===f)return{x:w,y:c+(y>g?a:-a)};const d=(y-g)/(m-f),C=Math.sqrt(a*a/(1+d*d))*(m<f?-1:1),k=d*C;if(Math.abs(c-g-d*(w-f))<1e-10)return{x:w+C,y:c+k};const b=((w-f)*(m-f)+(c-g)*(y-g))/(l*l),h=f+b*(m-f),s=g+b*(y-g),v=this.getLineLength(w,c,h,s),P=Math.sqrt(a*a-v*v),I=Math.sqrt(P*P/(1+d*d))*(m<f?-1:1),z=d*I;return{x:h+I,y:s+z}}static getPointOnCubicBezier(a,f,g,m,y,w,c,l,d){function C(P){return P*P*P}function k(P){return 3*P*P*(1-P)}function b(P){return 3*P*(1-P)*(1-P)}function h(P){return(1-P)*(1-P)*(1-P)}const s=l*C(a)+w*k(a)+m*b(a)+f*h(a),v=d*C(a)+c*k(a)+y*b(a)+g*h(a);return{x:s,y:v}}static getPointOnQuadraticBezier(a,f,g,m,y,w,c){function l(h){return h*h}function d(h){return 2*h*(1-h)}function C(h){return(1-h)*(1-h)}const k=w*l(a)+m*d(a)+f*C(a),b=c*l(a)+y*d(a)+g*C(a);return{x:k,y:b}}static getPointOnEllipticalArc(a,f,g,m,y,w){const c=Math.cos(w),l=Math.sin(w),d={x:g*Math.cos(y),y:m*Math.sin(y)};return{x:a+(d.x*c-d.y*l),y:f+(d.x*l+d.y*c)}}static parsePathData(a){if(!a)return[];let f=a;const g=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];f=f.replace(new RegExp(" ","g"),",");for(let k=0;k<g.length;k++)f=f.replace(new RegExp(g[k],"g"),"|"+g[k]);const m=f.split("|"),y=[],w=[];let c=0,l=0;const d=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let C;for(let k=1;k<m.length;k++){let b=m[k],h=b.charAt(0);for(b=b.slice(1),w.length=0;C=d.exec(b);)w.push(C[0]);const s=[];for(let v=0,P=w.length;v<P;v++){if(w[v]==="00"){s.push(0,0);continue}const I=parseFloat(w[v]);isNaN(I)?s.push(0):s.push(I)}for(;s.length>0&&!isNaN(s[0]);){let v="",P=[];const I=c,z=l;let E,T,M,U,B,W,Y,V,et,x;switch(h){case"l":c+=s.shift(),l+=s.shift(),v="L",P.push(c,l);break;case"L":c=s.shift(),l=s.shift(),P.push(c,l);break;case"m":const _=s.shift(),F=s.shift();if(c+=_,l+=F,v="M",y.length>2&&y[y.length-1].command==="z"){for(let N=y.length-2;N>=0;N--)if(y[N].command==="M"){c=y[N].points[0]+_,l=y[N].points[1]+F;break}}P.push(c,l),h="l";break;case"M":c=s.shift(),l=s.shift(),v="M",P.push(c,l),h="L";break;case"h":c+=s.shift(),v="L",P.push(c,l);break;case"H":c=s.shift(),v="L",P.push(c,l);break;case"v":l+=s.shift(),v="L",P.push(c,l);break;case"V":l=s.shift(),v="L",P.push(c,l);break;case"C":P.push(s.shift(),s.shift(),s.shift(),s.shift()),c=s.shift(),l=s.shift(),P.push(c,l);break;case"c":P.push(c+s.shift(),l+s.shift(),c+s.shift(),l+s.shift()),c+=s.shift(),l+=s.shift(),v="C",P.push(c,l);break;case"S":T=c,M=l,E=y[y.length-1],E.command==="C"&&(T=c+(c-E.points[2]),M=l+(l-E.points[3])),P.push(T,M,s.shift(),s.shift()),c=s.shift(),l=s.shift(),v="C",P.push(c,l);break;case"s":T=c,M=l,E=y[y.length-1],E.command==="C"&&(T=c+(c-E.points[2]),M=l+(l-E.points[3])),P.push(T,M,c+s.shift(),l+s.shift()),c+=s.shift(),l+=s.shift(),v="C",P.push(c,l);break;case"Q":P.push(s.shift(),s.shift()),c=s.shift(),l=s.shift(),P.push(c,l);break;case"q":P.push(c+s.shift(),l+s.shift()),c+=s.shift(),l+=s.shift(),v="Q",P.push(c,l);break;case"T":T=c,M=l,E=y[y.length-1],E.command==="Q"&&(T=c+(c-E.points[0]),M=l+(l-E.points[1])),c=s.shift(),l=s.shift(),v="Q",P.push(T,M,c,l);break;case"t":T=c,M=l,E=y[y.length-1],E.command==="Q"&&(T=c+(c-E.points[0]),M=l+(l-E.points[1])),c+=s.shift(),l+=s.shift(),v="Q",P.push(T,M,c,l);break;case"A":U=s.shift(),B=s.shift(),W=s.shift(),Y=s.shift(),V=s.shift(),et=c,x=l,c=s.shift(),l=s.shift(),v="A",P=this.convertEndpointToCenterParameterization(et,x,c,l,Y,V,U,B,W);break;case"a":U=s.shift(),B=s.shift(),W=s.shift(),Y=s.shift(),V=s.shift(),et=c,x=l,c+=s.shift(),l+=s.shift(),v="A",P=this.convertEndpointToCenterParameterization(et,x,c,l,Y,V,U,B,W);break}y.push({command:v||h,points:P,start:{x:I,y:z},pathLength:this.calcLength(I,z,v||h,P)})}(h==="z"||h==="Z")&&y.push({command:"z",points:[],start:void 0,pathLength:0})}return y}static calcLength(a,f,g,m){let y,w,c,l;const d=ve;switch(g){case"L":return d.getLineLength(a,f,m[0],m[1]);case"C":return(0,O.getCubicArcLength)([a,m[0],m[2],m[4]],[f,m[1],m[3],m[5]],1);case"Q":return(0,O.getQuadraticArcLength)([a,m[0],m[2]],[f,m[1],m[3]],1);case"A":y=0;const C=m[4],k=m[5],b=m[4]+k;let h=Math.PI/180;if(Math.abs(C-b)<h&&(h=Math.abs(C-b)),w=d.getPointOnEllipticalArc(m[0],m[1],m[2],m[3],C,0),k<0)for(l=C-h;l>b;l-=h)c=d.getPointOnEllipticalArc(m[0],m[1],m[2],m[3],l,0),y+=d.getLineLength(w.x,w.y,c.x,c.y),w=c;else for(l=C+h;l<b;l+=h)c=d.getPointOnEllipticalArc(m[0],m[1],m[2],m[3],l,0),y+=d.getLineLength(w.x,w.y,c.x,c.y),w=c;return c=d.getPointOnEllipticalArc(m[0],m[1],m[2],m[3],b,0),y+=d.getLineLength(w.x,w.y,c.x,c.y),y}return 0}static convertEndpointToCenterParameterization(a,f,g,m,y,w,c,l,d){const C=d*(Math.PI/180),k=Math.cos(C)*(a-g)/2+Math.sin(C)*(f-m)/2,b=-1*Math.sin(C)*(a-g)/2+Math.cos(C)*(f-m)/2,h=k*k/(c*c)+b*b/(l*l);h>1&&(c*=Math.sqrt(h),l*=Math.sqrt(h));let s=Math.sqrt((c*c*(l*l)-c*c*(b*b)-l*l*(k*k))/(c*c*(b*b)+l*l*(k*k)));y===w&&(s*=-1),isNaN(s)&&(s=0);const v=s*c*b/l,P=s*-l*k/c,I=(a+g)/2+Math.cos(C)*v-Math.sin(C)*P,z=(f+m)/2+Math.sin(C)*v+Math.cos(C)*P,E=function(V){return Math.sqrt(V[0]*V[0]+V[1]*V[1])},T=function(V,et){return(V[0]*et[0]+V[1]*et[1])/(E(V)*E(et))},M=function(V,et){return(V[0]*et[1]<V[1]*et[0]?-1:1)*Math.acos(T(V,et))},U=M([1,0],[(k-v)/c,(b-P)/l]),B=[(k-v)/c,(b-P)/l],W=[(-1*k-v)/c,(-1*b-P)/l];let Y=M(B,W);return T(B,W)<=-1&&(Y=Math.PI),T(B,W)>=1&&(Y=0),w===0&&Y>0&&(Y=Y-2*Math.PI),w===1&&Y<0&&(Y=Y+2*Math.PI),[I,z,c,l,U,Y,C,w]}};return xr.Path=R,R.prototype.className="Path",R.prototype._attrsAffectingSize=["data"],(0,p._registerNode)(R),o.Factory.addGetterSetter(R,"data"),xr}var Zl;function Vh(){if(Zl)return Cr;Zl=1,Object.defineProperty(Cr,"__esModule",{value:!0}),Cr.Arrow=void 0;const o=St(),p=ic(),A=Ct(),O=vt(),R=Da();let S=class extends p.Line{_sceneFunc(f){super._sceneFunc(f);const g=Math.PI*2,m=this.points();let y=m;const w=this.tension()!==0&&m.length>4;w&&(y=this.getTensionPoints());const c=this.pointerLength(),l=m.length;let d,C;if(w){const h=[y[y.length-4],y[y.length-3],y[y.length-2],y[y.length-1],m[l-2],m[l-1]],s=R.Path.calcLength(y[y.length-4],y[y.length-3],"C",h),v=R.Path.getPointOnQuadraticBezier(Math.min(1,1-c/s),h[0],h[1],h[2],h[3],h[4],h[5]);d=m[l-2]-v.x,C=m[l-1]-v.y}else d=m[l-2]-m[l-4],C=m[l-1]-m[l-3];const k=(Math.atan2(C,d)+g)%g,b=this.pointerWidth();this.pointerAtEnding()&&(f.save(),f.beginPath(),f.translate(m[l-2],m[l-1]),f.rotate(k),f.moveTo(0,0),f.lineTo(-c,b/2),f.lineTo(-c,-b/2),f.closePath(),f.restore(),this.__fillStroke(f)),this.pointerAtBeginning()&&(f.save(),f.beginPath(),f.translate(m[0],m[1]),w?(d=(y[0]+y[2])/2-m[0],C=(y[1]+y[3])/2-m[1]):(d=m[2]-m[0],C=m[3]-m[1]),f.rotate((Math.atan2(-C,-d)+g)%g),f.moveTo(0,0),f.lineTo(-c,b/2),f.lineTo(-c,-b/2),f.closePath(),f.restore(),this.__fillStroke(f))}__fillStroke(f){const g=this.dashEnabled();g&&(this.attrs.dashEnabled=!1,f.setLineDash([])),f.fillStrokeShape(this),g&&(this.attrs.dashEnabled=!0)}getSelfRect(){const f=super.getSelfRect(),g=this.pointerWidth()/2;return{x:f.x,y:f.y-g,width:f.width,height:f.height+g*2}}};return Cr.Arrow=S,S.prototype.className="Arrow",(0,O._registerNode)(S),o.Factory.addGetterSetter(S,"pointerLength",10,(0,A.getNumberValidator)()),o.Factory.addGetterSetter(S,"pointerWidth",10,(0,A.getNumberValidator)()),o.Factory.addGetterSetter(S,"pointerAtBeginning",!1),o.Factory.addGetterSetter(S,"pointerAtEnding",!0),Cr}var Pr={},$l;function Hh(){if($l)return Pr;$l=1,Object.defineProperty(Pr,"__esModule",{value:!0}),Pr.Circle=void 0;const o=St(),p=Zt(),A=Ct(),O=vt();let R=class extends p.Shape{_sceneFunc(a){a.beginPath(),a.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),a.closePath(),a.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(a){this.radius()!==a/2&&this.radius(a/2)}setHeight(a){this.radius()!==a/2&&this.radius(a/2)}};return Pr.Circle=R,R.prototype._centroid=!0,R.prototype.className="Circle",R.prototype._attrsAffectingSize=["radius"],(0,O._registerNode)(R),o.Factory.addGetterSetter(R,"radius",0,(0,A.getNumberValidator)()),Pr}var kr={},tu;function Wh(){if(tu)return kr;tu=1,Object.defineProperty(kr,"__esModule",{value:!0}),kr.Ellipse=void 0;const o=St(),p=Zt(),A=Ct(),O=vt();let R=class extends p.Shape{_sceneFunc(a){const f=this.radiusX(),g=this.radiusY();a.beginPath(),a.save(),f!==g&&a.scale(1,g/f),a.arc(0,0,f,0,Math.PI*2,!1),a.restore(),a.closePath(),a.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(a){this.radiusX(a/2)}setHeight(a){this.radiusY(a/2)}};return kr.Ellipse=R,R.prototype.className="Ellipse",R.prototype._centroid=!0,R.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,O._registerNode)(R),o.Factory.addComponentsGetterSetter(R,"radius",["x","y"]),o.Factory.addGetterSetter(R,"radiusX",0,(0,A.getNumberValidator)()),o.Factory.addGetterSetter(R,"radiusY",0,(0,A.getNumberValidator)()),kr}var Er={},eu;function qh(){if(eu)return Er;eu=1,Object.defineProperty(Er,"__esModule",{value:!0}),Er.Image=void 0;const o=Ut(),p=St(),A=Zt(),O=vt(),R=Ct();class S extends A.Shape{constructor(f){super(f),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",g=>{this._removeImageLoad(g.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const f=this.image();f&&f.complete||f&&f.readyState===4||f&&f.addEventListener&&f.addEventListener("load",this._loadListener)}_removeImageLoad(f){f&&f.removeEventListener&&f.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const f=!!this.cornerRadius(),g=this.hasShadow();return f&&g?!0:super._useBufferCanvas(!0)}_sceneFunc(f){const g=this.getWidth(),m=this.getHeight(),y=this.cornerRadius(),w=this.attrs.image;let c;if(w){const l=this.attrs.cropWidth,d=this.attrs.cropHeight;l&&d?c=[w,this.cropX(),this.cropY(),l,d,0,0,g,m]:c=[w,0,0,g,m]}(this.hasFill()||this.hasStroke()||y)&&(f.beginPath(),y?o.Util.drawRoundedRectPath(f,g,m,y):f.rect(0,0,g,m),f.closePath(),f.fillStrokeShape(this)),w&&(y&&f.clip(),f.drawImage.apply(f,c))}_hitFunc(f){const g=this.width(),m=this.height(),y=this.cornerRadius();f.beginPath(),y?o.Util.drawRoundedRectPath(f,g,m,y):f.rect(0,0,g,m),f.closePath(),f.fillStrokeShape(this)}getWidth(){var f,g;return(f=this.attrs.width)!==null&&f!==void 0?f:(g=this.image())===null||g===void 0?void 0:g.width}getHeight(){var f,g;return(f=this.attrs.height)!==null&&f!==void 0?f:(g=this.image())===null||g===void 0?void 0:g.height}static fromURL(f,g,m=null){const y=o.Util.createImageElement();y.onload=function(){const w=new S({image:y});g(w)},y.onerror=m,y.crossOrigin="Anonymous",y.src=f}}return Er.Image=S,S.prototype.className="Image",(0,O._registerNode)(S),p.Factory.addGetterSetter(S,"cornerRadius",0,(0,R.getNumberOrArrayOfNumbersValidator)(4)),p.Factory.addGetterSetter(S,"image"),p.Factory.addComponentsGetterSetter(S,"crop",["x","y","width","height"]),p.Factory.addGetterSetter(S,"cropX",0,(0,R.getNumberValidator)()),p.Factory.addGetterSetter(S,"cropY",0,(0,R.getNumberValidator)()),p.Factory.addGetterSetter(S,"cropWidth",0,(0,R.getNumberValidator)()),p.Factory.addGetterSetter(S,"cropHeight",0,(0,R.getNumberValidator)()),Er}var Fn={},nu;function jh(){if(nu)return Fn;nu=1,Object.defineProperty(Fn,"__esModule",{value:!0}),Fn.Tag=Fn.Label=void 0;const o=St(),p=Zt(),A=Oa(),O=Ct(),R=vt(),S=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],a="Change.konva",f="none",g="up",m="right",y="down",w="left",c=S.length;let l=class extends A.Group{constructor(k){super(k),this.on("add.konva",function(b){this._addListeners(b.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(k){let b=this,h;const s=function(){b._sync()};for(h=0;h<c;h++)k.on(S[h]+a,s)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let k=this.getText(),b=this.getTag(),h,s,v,P,I,z,E;if(k&&b){switch(h=k.width(),s=k.height(),v=b.pointerDirection(),P=b.pointerWidth(),E=b.pointerHeight(),I=0,z=0,v){case g:I=h/2,z=-1*E;break;case m:I=h+P,z=s/2;break;case y:I=h/2,z=s+E;break;case w:I=-1*P,z=s/2;break}b.setAttrs({x:-1*I,y:-1*z,width:h,height:s}),k.setAttrs({x:-1*I,y:-1*z})}}};Fn.Label=l,l.prototype.className="Label",(0,R._registerNode)(l);class d extends p.Shape{_sceneFunc(k){const b=this.width(),h=this.height(),s=this.pointerDirection(),v=this.pointerWidth(),P=this.pointerHeight(),I=this.cornerRadius();let z=0,E=0,T=0,M=0;typeof I=="number"?z=E=T=M=Math.min(I,b/2,h/2):(z=Math.min(I[0]||0,b/2,h/2),E=Math.min(I[1]||0,b/2,h/2),M=Math.min(I[2]||0,b/2,h/2),T=Math.min(I[3]||0,b/2,h/2)),k.beginPath(),k.moveTo(z,0),s===g&&(k.lineTo((b-v)/2,0),k.lineTo(b/2,-1*P),k.lineTo((b+v)/2,0)),k.lineTo(b-E,0),k.arc(b-E,E,E,Math.PI*3/2,0,!1),s===m&&(k.lineTo(b,(h-P)/2),k.lineTo(b+v,h/2),k.lineTo(b,(h+P)/2)),k.lineTo(b,h-M),k.arc(b-M,h-M,M,0,Math.PI/2,!1),s===y&&(k.lineTo((b+v)/2,h),k.lineTo(b/2,h+P),k.lineTo((b-v)/2,h)),k.lineTo(T,h),k.arc(T,h-T,T,Math.PI/2,Math.PI,!1),s===w&&(k.lineTo(0,(h+P)/2),k.lineTo(-1*v,h/2),k.lineTo(0,(h-P)/2)),k.lineTo(0,z),k.arc(z,z,z,Math.PI,Math.PI*3/2,!1),k.closePath(),k.fillStrokeShape(this)}getSelfRect(){let k=0,b=0,h=this.pointerWidth(),s=this.pointerHeight(),v=this.pointerDirection(),P=this.width(),I=this.height();return v===g?(b-=s,I+=s):v===y?I+=s:v===w?(k-=h*1.5,P+=h):v===m&&(P+=h*1.5),{x:k,y:b,width:P,height:I}}}return Fn.Tag=d,d.prototype.className="Tag",(0,R._registerNode)(d),o.Factory.addGetterSetter(d,"pointerDirection",f),o.Factory.addGetterSetter(d,"pointerWidth",0,(0,O.getNumberValidator)()),o.Factory.addGetterSetter(d,"pointerHeight",0,(0,O.getNumberValidator)()),o.Factory.addGetterSetter(d,"cornerRadius",0,(0,O.getNumberOrArrayOfNumbersValidator)(4)),Fn}var Rr={},ru;function sc(){if(ru)return Rr;ru=1,Object.defineProperty(Rr,"__esModule",{value:!0}),Rr.Rect=void 0;const o=St(),p=Zt(),A=vt(),O=Ut(),R=Ct();class S extends p.Shape{_sceneFunc(f){const g=this.cornerRadius(),m=this.width(),y=this.height();f.beginPath(),g?O.Util.drawRoundedRectPath(f,m,y,g):f.rect(0,0,m,y),f.closePath(),f.fillStrokeShape(this)}}return Rr.Rect=S,S.prototype.className="Rect",(0,A._registerNode)(S),o.Factory.addGetterSetter(S,"cornerRadius",0,(0,R.getNumberOrArrayOfNumbersValidator)(4)),Rr}var Tr={},iu;function Kh(){if(iu)return Tr;iu=1,Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.RegularPolygon=void 0;const o=St(),p=Zt(),A=Ct(),O=vt();let R=class extends p.Shape{_sceneFunc(a){const f=this._getPoints();a.beginPath(),a.moveTo(f[0].x,f[0].y);for(let g=1;g<f.length;g++)a.lineTo(f[g].x,f[g].y);a.closePath(),a.fillStrokeShape(this)}_getPoints(){const a=this.attrs.sides,f=this.attrs.radius||0,g=[];for(let m=0;m<a;m++)g.push({x:f*Math.sin(m*2*Math.PI/a),y:-1*f*Math.cos(m*2*Math.PI/a)});return g}getSelfRect(){const a=this._getPoints();let f=a[0].x,g=a[0].y,m=a[0].x,y=a[0].y;return a.forEach(w=>{f=Math.min(f,w.x),g=Math.max(g,w.x),m=Math.min(m,w.y),y=Math.max(y,w.y)}),{x:f,y:m,width:g-f,height:y-m}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(a){this.radius(a/2)}setHeight(a){this.radius(a/2)}};return Tr.RegularPolygon=R,R.prototype.className="RegularPolygon",R.prototype._centroid=!0,R.prototype._attrsAffectingSize=["radius"],(0,O._registerNode)(R),o.Factory.addGetterSetter(R,"radius",0,(0,A.getNumberValidator)()),o.Factory.addGetterSetter(R,"sides",0,(0,A.getNumberValidator)()),Tr}var Nr={},su;function Yh(){if(su)return Nr;su=1,Object.defineProperty(Nr,"__esModule",{value:!0}),Nr.Ring=void 0;const o=St(),p=Zt(),A=Ct(),O=vt(),R=Math.PI*2;let S=class extends p.Shape{_sceneFunc(f){f.beginPath(),f.arc(0,0,this.innerRadius(),0,R,!1),f.moveTo(this.outerRadius(),0),f.arc(0,0,this.outerRadius(),R,0,!0),f.closePath(),f.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(f){this.outerRadius(f/2)}setHeight(f){this.outerRadius(f/2)}};return Nr.Ring=S,S.prototype.className="Ring",S.prototype._centroid=!0,S.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,O._registerNode)(S),o.Factory.addGetterSetter(S,"innerRadius",0,(0,A.getNumberValidator)()),o.Factory.addGetterSetter(S,"outerRadius",0,(0,A.getNumberValidator)()),Nr}var Fr={},au;function Xh(){if(au)return Fr;au=1,Object.defineProperty(Fr,"__esModule",{value:!0}),Fr.Sprite=void 0;const o=St(),p=Zt(),A=Ga(),O=Ct(),R=vt();let S=class extends p.Shape{constructor(f){super(f),this._updated=!0,this.anim=new A.Animation(()=>{const g=this._updated;return this._updated=!1,g}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(f){const g=this.animation(),m=this.frameIndex(),y=m*4,w=this.animations()[g],c=this.frameOffsets(),l=w[y+0],d=w[y+1],C=w[y+2],k=w[y+3],b=this.image();if((this.hasFill()||this.hasStroke())&&(f.beginPath(),f.rect(0,0,C,k),f.closePath(),f.fillStrokeShape(this)),b)if(c){const h=c[g],s=m*2;f.drawImage(b,l,d,C,k,h[s+0],h[s+1],C,k)}else f.drawImage(b,l,d,C,k,0,0,C,k)}_hitFunc(f){const g=this.animation(),m=this.frameIndex(),y=m*4,w=this.animations()[g],c=this.frameOffsets(),l=w[y+2],d=w[y+3];if(f.beginPath(),c){const C=c[g],k=m*2;f.rect(C[k+0],C[k+1],l,d)}else f.rect(0,0,l,d);f.closePath(),f.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const f=this;this.interval=setInterval(function(){f._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const f=this.getLayer();this.anim.setLayers(f),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const f=this.frameIndex(),g=this.animation(),m=this.animations(),y=m[g],w=y.length/4;f<w-1?this.frameIndex(f+1):this.frameIndex(0)}};return Fr.Sprite=S,S.prototype.className="Sprite",(0,R._registerNode)(S),o.Factory.addGetterSetter(S,"animation"),o.Factory.addGetterSetter(S,"animations"),o.Factory.addGetterSetter(S,"frameOffsets"),o.Factory.addGetterSetter(S,"image"),o.Factory.addGetterSetter(S,"frameIndex",0,(0,O.getNumberValidator)()),o.Factory.addGetterSetter(S,"frameRate",17,(0,O.getNumberValidator)()),o.Factory.backCompat(S,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),Fr}var Ar={},ou;function Qh(){if(ou)return Ar;ou=1,Object.defineProperty(Ar,"__esModule",{value:!0}),Ar.Star=void 0;const o=St(),p=Zt(),A=Ct(),O=vt();let R=class extends p.Shape{_sceneFunc(a){const f=this.innerRadius(),g=this.outerRadius(),m=this.numPoints();a.beginPath(),a.moveTo(0,0-g);for(let y=1;y<m*2;y++){const w=y%2===0?g:f,c=w*Math.sin(y*Math.PI/m),l=-1*w*Math.cos(y*Math.PI/m);a.lineTo(c,l)}a.closePath(),a.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(a){this.outerRadius(a/2)}setHeight(a){this.outerRadius(a/2)}};return Ar.Star=R,R.prototype.className="Star",R.prototype._centroid=!0,R.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,O._registerNode)(R),o.Factory.addGetterSetter(R,"numPoints",5,(0,A.getNumberValidator)()),o.Factory.addGetterSetter(R,"innerRadius",0,(0,A.getNumberValidator)()),o.Factory.addGetterSetter(R,"outerRadius",0,(0,A.getNumberValidator)()),Ar}var jn={},lu;function ac(){if(lu)return jn;lu=1,Object.defineProperty(jn,"__esModule",{value:!0}),jn.Text=void 0,jn.stringToArray=a;const o=Ut(),p=St(),A=Zt(),O=vt(),R=Ct(),S=vt();function a(K){return[...K].reduce((H,tt,nt,X)=>{if(new RegExp("\\p{Emoji}","u").test(tt)){const D=X[nt+1];D&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(D)?(H.push(tt+D),X[nt+1]=""):H.push(tt)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(tt+(X[nt+1]||""))?H.push(tt+X[nt+1]):nt>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(tt)?H[H.length-1]+=tt:tt&&H.push(tt);return H},[])}const f="auto",g="center",m="inherit",y="justify",w="Change.konva",c="2d",l="-",d="left",C="text",k="Text",b="top",h="bottom",s="middle",v="normal",P="px ",I=" ",z="right",E="rtl",T="word",M="char",U="none",B="",W=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],Y=W.length;function V(K){return K.split(",").map(H=>{H=H.trim();const tt=H.indexOf(" ")>=0,nt=H.indexOf('"')>=0||H.indexOf("'")>=0;return tt&&!nt&&(H=`"${H}"`),H}).join(", ")}let et;function x(){return et||(et=o.Util.createCanvasElement().getContext(c),et)}function _(K){K.fillText(this._partialText,this._partialTextX,this._partialTextY)}function F(K){K.setAttr("miterLimit",2),K.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function N(K){return K=K||{},!K.fillLinearGradientColorStops&&!K.fillRadialGradientColorStops&&!K.fillPatternImage&&(K.fill=K.fill||"black"),K}class G extends A.Shape{constructor(H){super(N(H)),this._partialTextX=0,this._partialTextY=0;for(let tt=0;tt<Y;tt++)this.on(W[tt]+w,this._setTextData);this._setTextData()}_sceneFunc(H){const tt=this.textArr,nt=tt.length;if(!this.text())return;let X=this.padding(),D=this.fontSize(),Q=this.lineHeight()*D,it=this.verticalAlign(),st=this.direction(),at=0,ft=this.align(),ht=this.getWidth(),kt=this.letterSpacing(),gt=this.fill(),Ht=this.textDecoration(),Et=Ht.indexOf("underline")!==-1,Ot=Ht.indexOf("line-through")!==-1,rn;st=st===m?H.direction:st;let jt=Q/2,vn=s;if(O.Konva._fixTextRendering){const Tt=this.measureSize("M");vn="alphabetic",jt=(Tt.fontBoundingBoxAscent-Tt.fontBoundingBoxDescent)/2+Q/2}for(st===E&&H.setAttr("direction",st),H.setAttr("font",this._getContextFont()),H.setAttr("textBaseline",vn),H.setAttr("textAlign",d),it===s?at=(this.getHeight()-nt*Q-X*2)/2:it===h&&(at=this.getHeight()-nt*Q-X*2),H.translate(X,at+X),rn=0;rn<nt;rn++){let Tt=0,_e=0;const ee=tt[rn],Ke=ee.text,ne=ee.width,De=ee.lastInParagraph;if(H.save(),ft===z?Tt+=ht-ne-X*2:ft===g&&(Tt+=(ht-ne-X*2)/2),Et){H.save(),H.beginPath();const Se=O.Konva._fixTextRendering?Math.round(D/4):Math.round(D/2),xe=Tt,re=jt+_e+Se;H.moveTo(xe,re);const ie=ft===y&&!De?ht-X*2:ne;H.lineTo(xe+Math.round(ie),re),H.lineWidth=D/15;const _n=this._getLinearGradient();H.strokeStyle=_n||gt,H.stroke(),H.restore()}if(Ot){H.save(),H.beginPath();const Se=O.Konva._fixTextRendering?-Math.round(D/4):0;H.moveTo(Tt,jt+_e+Se);const xe=ft===y&&!De?ht-X*2:ne;H.lineTo(Tt+Math.round(xe),jt+_e+Se),H.lineWidth=D/15;const re=this._getLinearGradient();H.strokeStyle=re||gt,H.stroke(),H.restore()}if(st!==E&&(kt!==0||ft===y)){const Se=Ke.split(" ").length-1,xe=a(Ke);for(let re=0;re<xe.length;re++){const ie=xe[re];ie===" "&&!De&&ft===y&&(Tt+=(ht-X*2-ne)/Se),this._partialTextX=Tt,this._partialTextY=jt+_e,this._partialText=ie,H.fillStrokeShape(this),Tt+=this.measureSize(ie).width+kt}}else kt!==0&&H.setAttr("letterSpacing",`${kt}px`),this._partialTextX=Tt,this._partialTextY=jt+_e,this._partialText=Ke,H.fillStrokeShape(this);H.restore(),nt>1&&(jt+=Q)}}_hitFunc(H){const tt=this.getWidth(),nt=this.getHeight();H.beginPath(),H.rect(0,0,tt,nt),H.closePath(),H.fillStrokeShape(this)}setText(H){const tt=o.Util._isString(H)?H:H==null?"":H+"";return this._setAttr(C,tt),this}getWidth(){return this.attrs.width===f||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===f||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return o.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(H){var tt,nt,X,D,Q,it,st,at,ft,ht,kt;let gt=x(),Ht=this.fontSize(),Et;gt.save(),gt.font=this._getContextFont(),Et=gt.measureText(H),gt.restore();const Ot=Ht/100;return{actualBoundingBoxAscent:(tt=Et.actualBoundingBoxAscent)!==null&&tt!==void 0?tt:71.58203125*Ot,actualBoundingBoxDescent:(nt=Et.actualBoundingBoxDescent)!==null&&nt!==void 0?nt:0,actualBoundingBoxLeft:(X=Et.actualBoundingBoxLeft)!==null&&X!==void 0?X:-7.421875*Ot,actualBoundingBoxRight:(D=Et.actualBoundingBoxRight)!==null&&D!==void 0?D:75.732421875*Ot,alphabeticBaseline:(Q=Et.alphabeticBaseline)!==null&&Q!==void 0?Q:0,emHeightAscent:(it=Et.emHeightAscent)!==null&&it!==void 0?it:100*Ot,emHeightDescent:(st=Et.emHeightDescent)!==null&&st!==void 0?st:-20*Ot,fontBoundingBoxAscent:(at=Et.fontBoundingBoxAscent)!==null&&at!==void 0?at:91*Ot,fontBoundingBoxDescent:(ft=Et.fontBoundingBoxDescent)!==null&&ft!==void 0?ft:21*Ot,hangingBaseline:(ht=Et.hangingBaseline)!==null&&ht!==void 0?ht:72.80000305175781*Ot,ideographicBaseline:(kt=Et.ideographicBaseline)!==null&&kt!==void 0?kt:-21*Ot,width:Et.width,height:Ht}}_getContextFont(){return this.fontStyle()+I+this.fontVariant()+I+(this.fontSize()+P)+V(this.fontFamily())}_addTextLine(H){this.align()===y&&(H=H.trim());const nt=this._getTextWidth(H);return this.textArr.push({text:H,width:nt,lastInParagraph:!1})}_getTextWidth(H){const tt=this.letterSpacing(),nt=H.length;return x().measureText(H).width+tt*nt}_setTextData(){let H=this.text().split(`
`),tt=+this.fontSize(),nt=0,X=this.lineHeight()*tt,D=this.attrs.width,Q=this.attrs.height,it=D!==f&&D!==void 0,st=Q!==f&&Q!==void 0,at=this.padding(),ft=D-at*2,ht=Q-at*2,kt=0,gt=this.wrap(),Ht=gt!==U,Et=gt!==M&&Ht,Ot=this.ellipsis();this.textArr=[],x().font=this._getContextFont();const rn=Ot?this._getTextWidth(B):0;for(let jt=0,vn=H.length;jt<vn;++jt){let Tt=H[jt],_e=this._getTextWidth(Tt);if(it&&_e>ft)for(;Tt.length>0;){let ee=0,Ke=a(Tt).length,ne="",De=0;for(;ee<Ke;){const Se=ee+Ke>>>1,xe=a(Tt),re=xe.slice(0,Se+1).join(""),ie=this._getTextWidth(re);(Ot&&st&&kt+X>ht?ie+rn:ie)<=ft?(ee=Se+1,ne=re,De=ie):Ke=Se}if(ne){if(Et){const re=a(Tt),ie=a(ne),_n=re[ie.length],ni=_n===I||_n===l;let An;if(ni&&De<=ft)An=ie.length;else{const ts=ie.lastIndexOf(I),es=ie.lastIndexOf(l);An=Math.max(ts,es)+1}An>0&&(ee=An,ne=re.slice(0,ee).join(""),De=this._getTextWidth(ne))}if(ne=ne.trimRight(),this._addTextLine(ne),nt=Math.max(nt,De),kt+=X,this._shouldHandleEllipsis(kt)){this._tryToAddEllipsisToLastLine();break}if(Tt=a(Tt).slice(ee).join("").trimLeft(),Tt.length>0&&(_e=this._getTextWidth(Tt),_e<=ft)){this._addTextLine(Tt),kt+=X,nt=Math.max(nt,_e);break}}else break}else this._addTextLine(Tt),kt+=X,nt=Math.max(nt,_e),this._shouldHandleEllipsis(kt)&&jt<vn-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),st&&kt+X>ht)break}this.textHeight=tt,this.textWidth=nt}_shouldHandleEllipsis(H){const tt=+this.fontSize(),nt=this.lineHeight()*tt,X=this.attrs.height,D=X!==f&&X!==void 0,Q=this.padding(),it=X-Q*2;return!(this.wrap()!==U)||D&&H+nt>it}_tryToAddEllipsisToLastLine(){const H=this.attrs.width,tt=H!==f&&H!==void 0,nt=this.padding(),X=H-nt*2,D=this.ellipsis(),Q=this.textArr[this.textArr.length-1];!Q||!D||(tt&&(this._getTextWidth(Q.text+B)<X||(Q.text=Q.text.slice(0,Q.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(Q.text+B))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const H=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,tt=this.hasShadow();return H&&tt?!0:super._useBufferCanvas()}}return jn.Text=G,G.prototype._fillFunc=_,G.prototype._strokeFunc=F,G.prototype.className=k,G.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,S._registerNode)(G),p.Factory.overWriteSetter(G,"width",(0,R.getNumberOrAutoValidator)()),p.Factory.overWriteSetter(G,"height",(0,R.getNumberOrAutoValidator)()),p.Factory.addGetterSetter(G,"direction",m),p.Factory.addGetterSetter(G,"fontFamily","Arial"),p.Factory.addGetterSetter(G,"fontSize",12,(0,R.getNumberValidator)()),p.Factory.addGetterSetter(G,"fontStyle",v),p.Factory.addGetterSetter(G,"fontVariant",v),p.Factory.addGetterSetter(G,"padding",0,(0,R.getNumberValidator)()),p.Factory.addGetterSetter(G,"align",d),p.Factory.addGetterSetter(G,"verticalAlign",b),p.Factory.addGetterSetter(G,"lineHeight",1,(0,R.getNumberValidator)()),p.Factory.addGetterSetter(G,"wrap",T),p.Factory.addGetterSetter(G,"ellipsis",!1,(0,R.getBooleanValidator)()),p.Factory.addGetterSetter(G,"letterSpacing",0,(0,R.getNumberValidator)()),p.Factory.addGetterSetter(G,"text","",(0,R.getStringValidator)()),p.Factory.addGetterSetter(G,"textDecoration",""),jn}var Mr={},uu;function Jh(){if(uu)return Mr;uu=1,Object.defineProperty(Mr,"__esModule",{value:!0}),Mr.TextPath=void 0;const o=Ut(),p=St(),A=Zt(),O=Da(),R=ac(),S=Ct(),a=vt(),f="",g="normal";function m(c){c.fillText(this.partialText,0,0)}function y(c){c.strokeText(this.partialText,0,0)}let w=class extends A.Shape{constructor(l){super(l),this.dummyCanvas=o.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return O.Path.getPathLength(this.dataArray)}_getPointAtLength(l){if(!this.attrs.data)return null;const d=this.pathLength;return l-1>d?null:O.Path.getPointAtLengthOfDataArray(l,this.dataArray)}_readDataAttribute(){this.dataArray=O.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(l){l.setAttr("font",this._getContextFont()),l.setAttr("textBaseline",this.textBaseline()),l.setAttr("textAlign","left"),l.save();const d=this.textDecoration(),C=this.fill(),k=this.fontSize(),b=this.glyphInfo;d==="underline"&&l.beginPath();for(let h=0;h<b.length;h++){l.save();const s=b[h].p0;l.translate(s.x,s.y),l.rotate(b[h].rotation),this.partialText=b[h].text,l.fillStrokeShape(this),d==="underline"&&(h===0&&l.moveTo(0,k/2+1),l.lineTo(k,k/2+1)),l.restore()}d==="underline"&&(l.strokeStyle=C,l.lineWidth=k/20,l.stroke()),l.restore()}_hitFunc(l){l.beginPath();const d=this.glyphInfo;if(d.length>=1){const C=d[0].p0;l.moveTo(C.x,C.y)}for(let C=0;C<d.length;C++){const k=d[C].p1;l.lineTo(k.x,k.y)}l.setAttr("lineWidth",this.fontSize()),l.setAttr("strokeStyle",this.colorKey),l.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return o.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(l){return R.Text.prototype.setText.call(this,l)}_getContextFont(){return R.Text.prototype._getContextFont.call(this)}_getTextSize(l){const C=this.dummyCanvas.getContext("2d");C.save(),C.font=this._getContextFont();const k=C.measureText(l);return C.restore(),{width:k.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:l,height:d}=this._getTextSize(this.attrs.text);if(this.textWidth=l,this.textHeight=d,this.glyphInfo=[],!this.attrs.data)return null;const C=this.letterSpacing(),k=this.align(),b=this.kerningFunc(),h=Math.max(this.textWidth+((this.attrs.text||"").length-1)*C,0);let s=0;k==="center"&&(s=Math.max(0,this.pathLength/2-h/2)),k==="right"&&(s=Math.max(0,this.pathLength-h));const v=(0,R.stringToArray)(this.text());let P=s;for(let I=0;I<v.length;I++){const z=this._getPointAtLength(P);if(!z)return;let E=this._getTextSize(v[I]).width+C;if(v[I]===" "&&k==="justify"){const Y=this.text().split(" ").length-1;E+=(this.pathLength-h)/Y}const T=this._getPointAtLength(P+E);if(!T)return;const M=O.Path.getLineLength(z.x,z.y,T.x,T.y);let U=0;if(b)try{U=b(v[I-1],v[I])*this.fontSize()}catch{U=0}z.x+=U,T.x+=U,this.textWidth+=U;const B=O.Path.getPointOnLine(U+M/2,z.x,z.y,T.x,T.y),W=Math.atan2(T.y-z.y,T.x-z.x);this.glyphInfo.push({transposeX:B.x,transposeY:B.y,text:v[I],rotation:W,p0:z,p1:T}),P+=E}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const l=[];this.glyphInfo.forEach(function(P){l.push(P.p0.x),l.push(P.p0.y),l.push(P.p1.x),l.push(P.p1.y)});let d=l[0]||0,C=l[0]||0,k=l[1]||0,b=l[1]||0,h,s;for(let P=0;P<l.length/2;P++)h=l[P*2],s=l[P*2+1],d=Math.min(d,h),C=Math.max(C,h),k=Math.min(k,s),b=Math.max(b,s);const v=this.fontSize();return{x:d-v/2,y:k-v/2,width:C-d+v,height:b-k+v}}destroy(){return o.Util.releaseCanvas(this.dummyCanvas),super.destroy()}};return Mr.TextPath=w,w.prototype._fillFunc=m,w.prototype._strokeFunc=y,w.prototype._fillFuncHit=m,w.prototype._strokeFuncHit=y,w.prototype.className="TextPath",w.prototype._attrsAffectingSize=["text","fontSize","data"],(0,a._registerNode)(w),p.Factory.addGetterSetter(w,"data"),p.Factory.addGetterSetter(w,"fontFamily","Arial"),p.Factory.addGetterSetter(w,"fontSize",12,(0,S.getNumberValidator)()),p.Factory.addGetterSetter(w,"fontStyle",g),p.Factory.addGetterSetter(w,"align","left"),p.Factory.addGetterSetter(w,"letterSpacing",0,(0,S.getNumberValidator)()),p.Factory.addGetterSetter(w,"textBaseline","middle"),p.Factory.addGetterSetter(w,"fontVariant",g),p.Factory.addGetterSetter(w,"text",f),p.Factory.addGetterSetter(w,"textDecoration",""),p.Factory.addGetterSetter(w,"kerningFunc",void 0),Mr}var br={},cu;function Zh(){if(cu)return br;cu=1,Object.defineProperty(br,"__esModule",{value:!0}),br.Transformer=void 0;const o=Ut(),p=St(),A=Bt(),O=Zt(),R=sc(),S=Oa(),a=vt(),f=Ct(),g=vt(),m="tr-konva",y=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(E=>E+`.${m}`).join(" "),w="nodesRect",c=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],l={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},d="ontouchstart"in a.Konva._global;function C(E,T,M){if(E==="rotater")return M;T+=o.Util.degToRad(l[E]||0);const U=(o.Util.radToDeg(T)%360+360)%360;return o.Util._inRange(U,315+22.5,360)||o.Util._inRange(U,0,22.5)?"ns-resize":o.Util._inRange(U,45-22.5,45+22.5)?"nesw-resize":o.Util._inRange(U,90-22.5,90+22.5)?"ew-resize":o.Util._inRange(U,135-22.5,135+22.5)?"nwse-resize":o.Util._inRange(U,180-22.5,180+22.5)?"ns-resize":o.Util._inRange(U,225-22.5,225+22.5)?"nesw-resize":o.Util._inRange(U,270-22.5,270+22.5)?"ew-resize":o.Util._inRange(U,315-22.5,315+22.5)?"nwse-resize":(o.Util.error("Transformer has unknown angle for cursor detection: "+U),"pointer")}const k=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function b(E){return{x:E.x+E.width/2*Math.cos(E.rotation)+E.height/2*Math.sin(-E.rotation),y:E.y+E.height/2*Math.cos(E.rotation)+E.width/2*Math.sin(E.rotation)}}function h(E,T,M){const U=M.x+(E.x-M.x)*Math.cos(T)-(E.y-M.y)*Math.sin(T),B=M.y+(E.x-M.x)*Math.sin(T)+(E.y-M.y)*Math.cos(T);return{...E,rotation:E.rotation+T,x:U,y:B}}function s(E,T){const M=b(E);return h(E,T,M)}function v(E,T,M){let U=T;for(let B=0;B<E.length;B++){const W=a.Konva.getAngle(E[B]),Y=Math.abs(W-T)%(Math.PI*2);Math.min(Y,Math.PI*2-Y)<M&&(U=W)}return U}let P=0;class I extends S.Group{constructor(T){super(T),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(y,this.update),this.getNode()&&this.update()}attachTo(T){return this.setNode(T),this}setNode(T){return o.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([T])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return m+this._id}setNodes(T=[]){this._nodes&&this._nodes.length&&this.detach();const M=T.filter(B=>B.isAncestorOf(this)?(o.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=T=M,T.length===1&&this.useSingleNodeRotation()?this.rotation(T[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(B=>{const W=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(B._attrsAffectingSize.length){const Y=B._attrsAffectingSize.map(V=>V+"Change."+this._getEventNamespace()).join(" ");B.on(Y,W)}B.on(c.map(Y=>Y+`.${this._getEventNamespace()}`).join(" "),W),B.on(`absoluteTransformChange.${this._getEventNamespace()}`,W),this._proxyDrag(B)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(T){let M;T.on(`dragstart.${this._getEventNamespace()}`,U=>{M=T.getAbsolutePosition(),!this.isDragging()&&T!==this.findOne(".back")&&this.startDrag(U,!1)}),T.on(`dragmove.${this._getEventNamespace()}`,U=>{if(!M)return;const B=T.getAbsolutePosition(),W=B.x-M.x,Y=B.y-M.y;this.nodes().forEach(V=>{if(V===T||V.isDragging())return;const et=V.getAbsolutePosition();V.setAbsolutePosition({x:et.x+W,y:et.y+Y}),V.startDrag(U)}),M=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(T=>{T.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(w),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(w,this.__getNodeRect)}__getNodeShape(T,M=this.rotation(),U){const B=T.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),W=T.getAbsoluteScale(U),Y=T.getAbsolutePosition(U),V=B.x*W.x-T.offsetX()*W.x,et=B.y*W.y-T.offsetY()*W.y,x=(a.Konva.getAngle(T.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),_={x:Y.x+V*Math.cos(x)+et*Math.sin(-x),y:Y.y+et*Math.cos(x)+V*Math.sin(x),width:B.width*W.x,height:B.height*W.y,rotation:x};return h(_,-a.Konva.getAngle(M),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const M=[];this.nodes().map(x=>{const _=x.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),F=[{x:_.x,y:_.y},{x:_.x+_.width,y:_.y},{x:_.x+_.width,y:_.y+_.height},{x:_.x,y:_.y+_.height}],N=x.getAbsoluteTransform();F.forEach(function(G){const K=N.point(G);M.push(K)})});const U=new o.Transform;U.rotate(-a.Konva.getAngle(this.rotation()));let B=1/0,W=1/0,Y=-1/0,V=-1/0;M.forEach(function(x){const _=U.point(x);B===void 0&&(B=Y=_.x,W=V=_.y),B=Math.min(B,_.x),W=Math.min(W,_.y),Y=Math.max(Y,_.x),V=Math.max(V,_.y)}),U.invert();const et=U.point({x:B,y:W});return{x:et.x,y:et.y,width:Y-B,height:V-W,rotation:a.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),k.forEach(T=>{this._createAnchor(T)}),this._createAnchor("rotater")}_createAnchor(T){const M=new R.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:T+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:d?10:"auto"}),U=this;M.on("mousedown touchstart",function(B){U._handleMouseDown(B)}),M.on("dragstart",B=>{M.stopDrag(),B.cancelBubble=!0}),M.on("dragend",B=>{B.cancelBubble=!0}),M.on("mouseenter",()=>{const B=a.Konva.getAngle(this.rotation()),W=this.rotateAnchorCursor(),Y=C(T,B,W);M.getStage().content&&(M.getStage().content.style.cursor=Y),this._cursorChange=!0}),M.on("mouseout",()=>{M.getStage().content&&(M.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(M)}_createBack(){const T=new O.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(M,U){const B=U.getParent(),W=B.padding();M.beginPath(),M.rect(-W,-W,U.width()+W*2,U.height()+W*2),M.moveTo(U.width()/2,-W),B.rotateEnabled()&&B.rotateLineVisible()&&M.lineTo(U.width()/2,-B.rotateAnchorOffset()*o.Util._sign(U.height())-W),M.fillStrokeShape(U)},hitFunc:(M,U)=>{if(!this.shouldOverdrawWholeArea())return;const B=this.padding();M.beginPath(),M.rect(-B,-B,U.width()+B*2,U.height()+B*2),M.fillStrokeShape(U)}});this.add(T),this._proxyDrag(T),T.on("dragstart",M=>{M.cancelBubble=!0}),T.on("dragmove",M=>{M.cancelBubble=!0}),T.on("dragend",M=>{M.cancelBubble=!0}),this.on("dragmove",M=>{this.update()})}_handleMouseDown(T){if(this._transforming)return;this._movingAnchorName=T.target.name().split(" ")[0];const M=this._getNodeRect(),U=M.width,B=M.height,W=Math.sqrt(Math.pow(U,2)+Math.pow(B,2));this.sin=Math.abs(B/W),this.cos=Math.abs(U/W),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const Y=T.target.getAbsolutePosition(),V=T.target.getStage().getPointerPosition();this._anchorDragOffset={x:V.x-Y.x,y:V.y-Y.y},P++,this._fire("transformstart",{evt:T.evt,target:this.getNode()}),this._nodes.forEach(et=>{et._fire("transformstart",{evt:T.evt,target:et})})}_handleMouseMove(T){let M,U,B;const W=this.findOne("."+this._movingAnchorName),Y=W.getStage();Y.setPointersPositions(T);const V=Y.getPointerPosition();let et={x:V.x-this._anchorDragOffset.x,y:V.y-this._anchorDragOffset.y};const x=W.getAbsolutePosition();this.anchorDragBoundFunc()&&(et=this.anchorDragBoundFunc()(x,et,T)),W.setAbsolutePosition(et);const _=W.getAbsolutePosition();if(x.x===_.x&&x.y===_.y)return;if(this._movingAnchorName==="rotater"){const X=this._getNodeRect();M=W.x()-X.width/2,U=-W.y()+X.height/2;let D=Math.atan2(-U,M)+Math.PI/2;X.height<0&&(D-=Math.PI);const it=a.Konva.getAngle(this.rotation())+D,st=a.Konva.getAngle(this.rotationSnapTolerance()),ft=v(this.rotationSnaps(),it,st)-X.rotation,ht=s(X,ft);this._fitNodesInto(ht,T);return}const F=this.shiftBehavior();let N;F==="inverted"?N=this.keepRatio()&&!T.shiftKey:F==="none"?N=this.keepRatio():N=this.keepRatio()||T.shiftKey;let G=this.centeredScaling()||T.altKey;if(this._movingAnchorName==="top-left"){if(N){const X=G?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};B=Math.sqrt(Math.pow(X.x-W.x(),2)+Math.pow(X.y-W.y(),2));const D=this.findOne(".top-left").x()>X.x?-1:1,Q=this.findOne(".top-left").y()>X.y?-1:1;M=B*this.cos*D,U=B*this.sin*Q,this.findOne(".top-left").x(X.x-M),this.findOne(".top-left").y(X.y-U)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(W.y());else if(this._movingAnchorName==="top-right"){if(N){const X=G?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};B=Math.sqrt(Math.pow(W.x()-X.x,2)+Math.pow(X.y-W.y(),2));const D=this.findOne(".top-right").x()<X.x?-1:1,Q=this.findOne(".top-right").y()>X.y?-1:1;M=B*this.cos*D,U=B*this.sin*Q,this.findOne(".top-right").x(X.x+M),this.findOne(".top-right").y(X.y-U)}var K=W.position();this.findOne(".top-left").y(K.y),this.findOne(".bottom-right").x(K.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(W.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(W.x());else if(this._movingAnchorName==="bottom-left"){if(N){const X=G?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};B=Math.sqrt(Math.pow(X.x-W.x(),2)+Math.pow(W.y()-X.y,2));const D=X.x<W.x()?-1:1,Q=W.y()<X.y?-1:1;M=B*this.cos*D,U=B*this.sin*Q,W.x(X.x-M),W.y(X.y+U)}K=W.position(),this.findOne(".top-left").x(K.x),this.findOne(".bottom-right").y(K.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(W.y());else if(this._movingAnchorName==="bottom-right"){if(N){const X=G?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};B=Math.sqrt(Math.pow(W.x()-X.x,2)+Math.pow(W.y()-X.y,2));const D=this.findOne(".bottom-right").x()<X.x?-1:1,Q=this.findOne(".bottom-right").y()<X.y?-1:1;M=B*this.cos*D,U=B*this.sin*Q,this.findOne(".bottom-right").x(X.x+M),this.findOne(".bottom-right").y(X.y+U)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(G=this.centeredScaling()||T.altKey,G){const X=this.findOne(".top-left"),D=this.findOne(".bottom-right"),Q=X.x(),it=X.y(),st=this.getWidth()-D.x(),at=this.getHeight()-D.y();D.move({x:-Q,y:-it}),X.move({x:st,y:at})}const H=this.findOne(".top-left").getAbsolutePosition();M=H.x,U=H.y;const tt=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),nt=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:M,y:U,width:tt,height:nt,rotation:a.Konva.getAngle(this.rotation())},T)}_handleMouseUp(T){this._removeEvents(T)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(T){var M;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const U=this.getNode();P--,this._fire("transformend",{evt:T,target:U}),(M=this.getLayer())===null||M===void 0||M.batchDraw(),U&&this._nodes.forEach(B=>{var W;B._fire("transformend",{evt:T,target:B}),(W=B.getLayer())===null||W===void 0||W.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(T,M){const U=this._getNodeRect(),B=1;if(o.Util._inRange(T.width,-this.padding()*2-B,B)){this.update();return}if(o.Util._inRange(T.height,-this.padding()*2-B,B)){this.update();return}const W=new o.Transform;if(W.rotate(a.Konva.getAngle(this.rotation())),this._movingAnchorName&&T.width<0&&this._movingAnchorName.indexOf("left")>=0){const N=W.point({x:-this.padding()*2,y:0});T.x+=N.x,T.y+=N.y,T.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=N.x,this._anchorDragOffset.y-=N.y}else if(this._movingAnchorName&&T.width<0&&this._movingAnchorName.indexOf("right")>=0){const N=W.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=N.x,this._anchorDragOffset.y-=N.y,T.width+=this.padding()*2}if(this._movingAnchorName&&T.height<0&&this._movingAnchorName.indexOf("top")>=0){const N=W.point({x:0,y:-this.padding()*2});T.x+=N.x,T.y+=N.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=N.x,this._anchorDragOffset.y-=N.y,T.height+=this.padding()*2}else if(this._movingAnchorName&&T.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const N=W.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=N.x,this._anchorDragOffset.y-=N.y,T.height+=this.padding()*2}if(this.boundBoxFunc()){const N=this.boundBoxFunc()(U,T);N?T=N:o.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const Y=1e7,V=new o.Transform;V.translate(U.x,U.y),V.rotate(U.rotation),V.scale(U.width/Y,U.height/Y);const et=new o.Transform,x=T.width/Y,_=T.height/Y;this.flipEnabled()===!1?(et.translate(T.x,T.y),et.rotate(T.rotation),et.translate(T.width<0?T.width:0,T.height<0?T.height:0),et.scale(Math.abs(x),Math.abs(_))):(et.translate(T.x,T.y),et.rotate(T.rotation),et.scale(x,_));const F=et.multiply(V.invert());this._nodes.forEach(N=>{var G;const K=N.getParent().getAbsoluteTransform(),H=N.getTransform().copy();H.translate(N.offsetX(),N.offsetY());const tt=new o.Transform;tt.multiply(K.copy().invert()).multiply(F).multiply(K).multiply(H);const nt=tt.decompose();N.setAttrs(nt),(G=N.getLayer())===null||G===void 0||G.batchDraw()}),this.rotation(o.Util._getRotation(T.rotation)),this._nodes.forEach(N=>{this._fire("transform",{evt:M,target:N}),N._fire("transform",{evt:M,target:N})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(T,M){this.findOne(T).setAttrs(M)}update(){var T;const M=this._getNodeRect();this.rotation(o.Util._getRotation(M.rotation));const U=M.width,B=M.height,W=this.enabledAnchors(),Y=this.resizeEnabled(),V=this.padding(),et=this.anchorSize(),x=this.find("._anchor");x.forEach(F=>{F.setAttrs({width:et,height:et,offsetX:et/2,offsetY:et/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:et/2+V,offsetY:et/2+V,visible:Y&&W.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:U/2,y:0,offsetY:et/2+V,visible:Y&&W.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:U,y:0,offsetX:et/2-V,offsetY:et/2+V,visible:Y&&W.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:B/2,offsetX:et/2+V,visible:Y&&W.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:U,y:B/2,offsetX:et/2-V,visible:Y&&W.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:B,offsetX:et/2+V,offsetY:et/2-V,visible:Y&&W.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:U/2,y:B,offsetY:et/2-V,visible:Y&&W.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:U,y:B,offsetX:et/2-V,offsetY:et/2-V,visible:Y&&W.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:U/2,y:-this.rotateAnchorOffset()*o.Util._sign(B)-V,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:U,height:B,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const _=this.anchorStyleFunc();_&&x.forEach(F=>{_(F)}),(T=this.getLayer())===null||T===void 0||T.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const T=this.findOne("."+this._movingAnchorName);T&&T.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),S.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return A.Node.prototype.toObject.call(this)}clone(T){return A.Node.prototype.clone.call(this,T)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}br.Transformer=I,I.isTransforming=()=>P>0;function z(E){return E instanceof Array||o.Util.warn("enabledAnchors value should be an array"),E instanceof Array&&E.forEach(function(T){k.indexOf(T)===-1&&o.Util.warn("Unknown anchor name: "+T+". Available names are: "+k.join(", "))}),E||[]}return I.prototype.className="Transformer",(0,g._registerNode)(I),p.Factory.addGetterSetter(I,"enabledAnchors",k,z),p.Factory.addGetterSetter(I,"flipEnabled",!0,(0,f.getBooleanValidator)()),p.Factory.addGetterSetter(I,"resizeEnabled",!0),p.Factory.addGetterSetter(I,"anchorSize",10,(0,f.getNumberValidator)()),p.Factory.addGetterSetter(I,"rotateEnabled",!0),p.Factory.addGetterSetter(I,"rotateLineVisible",!0),p.Factory.addGetterSetter(I,"rotationSnaps",[]),p.Factory.addGetterSetter(I,"rotateAnchorOffset",50,(0,f.getNumberValidator)()),p.Factory.addGetterSetter(I,"rotateAnchorCursor","crosshair"),p.Factory.addGetterSetter(I,"rotationSnapTolerance",5,(0,f.getNumberValidator)()),p.Factory.addGetterSetter(I,"borderEnabled",!0),p.Factory.addGetterSetter(I,"anchorStroke","rgb(0, 161, 255)"),p.Factory.addGetterSetter(I,"anchorStrokeWidth",1,(0,f.getNumberValidator)()),p.Factory.addGetterSetter(I,"anchorFill","white"),p.Factory.addGetterSetter(I,"anchorCornerRadius",0,(0,f.getNumberValidator)()),p.Factory.addGetterSetter(I,"borderStroke","rgb(0, 161, 255)"),p.Factory.addGetterSetter(I,"borderStrokeWidth",1,(0,f.getNumberValidator)()),p.Factory.addGetterSetter(I,"borderDash"),p.Factory.addGetterSetter(I,"keepRatio",!0),p.Factory.addGetterSetter(I,"shiftBehavior","default"),p.Factory.addGetterSetter(I,"centeredScaling",!1),p.Factory.addGetterSetter(I,"ignoreStroke",!1),p.Factory.addGetterSetter(I,"padding",0,(0,f.getNumberValidator)()),p.Factory.addGetterSetter(I,"nodes"),p.Factory.addGetterSetter(I,"node"),p.Factory.addGetterSetter(I,"boundBoxFunc"),p.Factory.addGetterSetter(I,"anchorDragBoundFunc"),p.Factory.addGetterSetter(I,"anchorStyleFunc"),p.Factory.addGetterSetter(I,"shouldOverdrawWholeArea",!1),p.Factory.addGetterSetter(I,"useSingleNodeRotation",!0),p.Factory.backCompat(I,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"}),br}var Lr={},hu;function $h(){if(hu)return Lr;hu=1,Object.defineProperty(Lr,"__esModule",{value:!0}),Lr.Wedge=void 0;const o=St(),p=Zt(),A=vt(),O=Ct(),R=vt();let S=class extends p.Shape{_sceneFunc(f){f.beginPath(),f.arc(0,0,this.radius(),0,A.Konva.getAngle(this.angle()),this.clockwise()),f.lineTo(0,0),f.closePath(),f.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(f){this.radius(f/2)}setHeight(f){this.radius(f/2)}};return Lr.Wedge=S,S.prototype.className="Wedge",S.prototype._centroid=!0,S.prototype._attrsAffectingSize=["radius"],(0,R._registerNode)(S),o.Factory.addGetterSetter(S,"radius",0,(0,O.getNumberValidator)()),o.Factory.addGetterSetter(S,"angle",0,(0,O.getNumberValidator)()),o.Factory.addGetterSetter(S,"clockwise",!1),o.Factory.backCompat(S,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),Lr}var Ir={},du;function td(){if(du)return Ir;du=1,Object.defineProperty(Ir,"__esModule",{value:!0}),Ir.Blur=void 0;const o=St(),p=Bt(),A=Ct();function O(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const R=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],S=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function a(g,m){const y=g.data,w=g.width,c=g.height;let l,d,C,k,b,h,s,v,P,I,z,E,T,M,U,B,W,Y,V,et;const x=m+m+1,_=w-1,F=c-1,N=m+1,G=N*(N+1)/2,K=new O,H=R[m],tt=S[m];let nt=null,X=K,D=null,Q=null;for(let it=1;it<x;it++)X=X.next=new O,it===N&&(nt=X);X.next=K,C=d=0;for(let it=0;it<c;it++){E=T=M=U=k=b=h=s=0,v=N*(B=y[d]),P=N*(W=y[d+1]),I=N*(Y=y[d+2]),z=N*(V=y[d+3]),k+=G*B,b+=G*W,h+=G*Y,s+=G*V,X=K;for(let st=0;st<N;st++)X.r=B,X.g=W,X.b=Y,X.a=V,X=X.next;for(let st=1;st<N;st++)l=d+((_<st?_:st)<<2),k+=(X.r=B=y[l])*(et=N-st),b+=(X.g=W=y[l+1])*et,h+=(X.b=Y=y[l+2])*et,s+=(X.a=V=y[l+3])*et,E+=B,T+=W,M+=Y,U+=V,X=X.next;D=K,Q=nt;for(let st=0;st<w;st++)y[d+3]=V=s*H>>tt,V!==0?(V=255/V,y[d]=(k*H>>tt)*V,y[d+1]=(b*H>>tt)*V,y[d+2]=(h*H>>tt)*V):y[d]=y[d+1]=y[d+2]=0,k-=v,b-=P,h-=I,s-=z,v-=D.r,P-=D.g,I-=D.b,z-=D.a,l=C+((l=st+m+1)<_?l:_)<<2,E+=D.r=y[l],T+=D.g=y[l+1],M+=D.b=y[l+2],U+=D.a=y[l+3],k+=E,b+=T,h+=M,s+=U,D=D.next,v+=B=Q.r,P+=W=Q.g,I+=Y=Q.b,z+=V=Q.a,E-=B,T-=W,M-=Y,U-=V,Q=Q.next,d+=4;C+=w}for(let it=0;it<w;it++){T=M=U=E=b=h=s=k=0,d=it<<2,v=N*(B=y[d]),P=N*(W=y[d+1]),I=N*(Y=y[d+2]),z=N*(V=y[d+3]),k+=G*B,b+=G*W,h+=G*Y,s+=G*V,X=K;for(let at=0;at<N;at++)X.r=B,X.g=W,X.b=Y,X.a=V,X=X.next;let st=w;for(let at=1;at<=m;at++)d=st+it<<2,k+=(X.r=B=y[d])*(et=N-at),b+=(X.g=W=y[d+1])*et,h+=(X.b=Y=y[d+2])*et,s+=(X.a=V=y[d+3])*et,E+=B,T+=W,M+=Y,U+=V,X=X.next,at<F&&(st+=w);d=it,D=K,Q=nt;for(let at=0;at<c;at++)l=d<<2,y[l+3]=V=s*H>>tt,V>0?(V=255/V,y[l]=(k*H>>tt)*V,y[l+1]=(b*H>>tt)*V,y[l+2]=(h*H>>tt)*V):y[l]=y[l+1]=y[l+2]=0,k-=v,b-=P,h-=I,s-=z,v-=D.r,P-=D.g,I-=D.b,z-=D.a,l=it+((l=at+N)<F?l:F)*w<<2,k+=E+=D.r=y[l],b+=T+=D.g=y[l+1],h+=M+=D.b=y[l+2],s+=U+=D.a=y[l+3],D=D.next,v+=B=Q.r,P+=W=Q.g,I+=Y=Q.b,z+=V=Q.a,E-=B,T-=W,M-=Y,U-=V,Q=Q.next,d+=w}}const f=function(m){const y=Math.round(this.blurRadius());y>0&&a(m,y)};return Ir.Blur=f,o.Factory.addGetterSetter(p.Node,"blurRadius",0,(0,A.getNumberValidator)(),o.Factory.afterSetFilter),Ir}var Or={},fu;function ed(){if(fu)return Or;fu=1,Object.defineProperty(Or,"__esModule",{value:!0}),Or.Brighten=void 0;const o=St(),p=Bt(),A=Ct(),O=function(R){const S=this.brightness()*255,a=R.data,f=a.length;for(let g=0;g<f;g+=4)a[g]+=S,a[g+1]+=S,a[g+2]+=S};return Or.Brighten=O,o.Factory.addGetterSetter(p.Node,"brightness",0,(0,A.getNumberValidator)(),o.Factory.afterSetFilter),Or}var Gr={},gu;function nd(){if(gu)return Gr;gu=1,Object.defineProperty(Gr,"__esModule",{value:!0}),Gr.Contrast=void 0;const o=St(),p=Bt(),A=Ct(),O=function(R){const S=Math.pow((this.contrast()+100)/100,2),a=R.data,f=a.length;let g=150,m=150,y=150;for(let w=0;w<f;w+=4)g=a[w],m=a[w+1],y=a[w+2],g/=255,g-=.5,g*=S,g+=.5,g*=255,m/=255,m-=.5,m*=S,m+=.5,m*=255,y/=255,y-=.5,y*=S,y+=.5,y*=255,g=g<0?0:g>255?255:g,m=m<0?0:m>255?255:m,y=y<0?0:y>255?255:y,a[w]=g,a[w+1]=m,a[w+2]=y};return Gr.Contrast=O,o.Factory.addGetterSetter(p.Node,"contrast",0,(0,A.getNumberValidator)(),o.Factory.afterSetFilter),Gr}var Dr={},pu;function rd(){if(pu)return Dr;pu=1,Object.defineProperty(Dr,"__esModule",{value:!0}),Dr.Emboss=void 0;const o=St(),p=Bt(),A=Ut(),O=Ct(),R=function(S){const a=this.embossStrength()*10,f=this.embossWhiteLevel()*255,g=this.embossDirection(),m=this.embossBlend(),y=S.data,w=S.width,c=S.height,l=w*4;let d=0,C=0,k=c;switch(g){case"top-left":d=-1,C=-1;break;case"top":d=-1,C=0;break;case"top-right":d=-1,C=1;break;case"right":d=0,C=1;break;case"bottom-right":d=1,C=1;break;case"bottom":d=1,C=0;break;case"bottom-left":d=1,C=-1;break;case"left":d=0,C=-1;break;default:A.Util.error("Unknown emboss direction: "+g)}do{const b=(k-1)*l;let h=d;k+h<1&&(h=0),k+h>c&&(h=0);const s=(k-1+h)*w*4;let v=w;do{const P=b+(v-1)*4;let I=C;v+I<1&&(I=0),v+I>w&&(I=0);const z=s+(v-1+I)*4,E=y[P]-y[z],T=y[P+1]-y[z+1],M=y[P+2]-y[z+2];let U=E;const B=U>0?U:-U,W=T>0?T:-T,Y=M>0?M:-M;if(W>B&&(U=T),Y>B&&(U=M),U*=a,m){const V=y[P]+U,et=y[P+1]+U,x=y[P+2]+U;y[P]=V>255?255:V<0?0:V,y[P+1]=et>255?255:et<0?0:et,y[P+2]=x>255?255:x<0?0:x}else{let V=f-U;V<0?V=0:V>255&&(V=255),y[P]=y[P+1]=y[P+2]=V}}while(--v)}while(--k)};return Dr.Emboss=R,o.Factory.addGetterSetter(p.Node,"embossStrength",.5,(0,O.getNumberValidator)(),o.Factory.afterSetFilter),o.Factory.addGetterSetter(p.Node,"embossWhiteLevel",.5,(0,O.getNumberValidator)(),o.Factory.afterSetFilter),o.Factory.addGetterSetter(p.Node,"embossDirection","top-left",void 0,o.Factory.afterSetFilter),o.Factory.addGetterSetter(p.Node,"embossBlend",!1,void 0,o.Factory.afterSetFilter),Dr}var Ur={},mu;function id(){if(mu)return Ur;mu=1,Object.defineProperty(Ur,"__esModule",{value:!0}),Ur.Enhance=void 0;const o=St(),p=Bt(),A=Ct();function O(S,a,f,g,m){const y=f-a,w=m-g;if(y===0)return g+w/2;if(w===0)return g;let c=(S-a)/y;return c=w*c+g,c}const R=function(S){const a=S.data,f=a.length;let g=a[0],m=g,y,w=a[1],c=w,l,d=a[2],C=d,k;const b=this.enhance();if(b===0)return;for(let E=0;E<f;E+=4)y=a[E+0],y<g?g=y:y>m&&(m=y),l=a[E+1],l<w?w=l:l>c&&(c=l),k=a[E+2],k<d?d=k:k>C&&(C=k);m===g&&(m=255,g=0),c===w&&(c=255,w=0),C===d&&(C=255,d=0);let h,s,v,P,I,z;if(b>0)h=m+b*(255-m),s=g-b*(g-0),v=c+b*(255-c),P=w-b*(w-0),I=C+b*(255-C),z=d-b*(d-0);else{const E=(m+g)*.5;h=m+b*(m-E),s=g+b*(g-E);const T=(c+w)*.5;v=c+b*(c-T),P=w+b*(w-T);const M=(C+d)*.5;I=C+b*(C-M),z=d+b*(d-M)}for(let E=0;E<f;E+=4)a[E+0]=O(a[E+0],g,m,s,h),a[E+1]=O(a[E+1],w,c,P,v),a[E+2]=O(a[E+2],d,C,z,I)};return Ur.Enhance=R,o.Factory.addGetterSetter(p.Node,"enhance",0,(0,A.getNumberValidator)(),o.Factory.afterSetFilter),Ur}var zr={},yu;function sd(){if(yu)return zr;yu=1,Object.defineProperty(zr,"__esModule",{value:!0}),zr.Grayscale=void 0;const o=function(p){const A=p.data,O=A.length;for(let R=0;R<O;R+=4){const S=.34*A[R]+.5*A[R+1]+.16*A[R+2];A[R]=S,A[R+1]=S,A[R+2]=S}};return zr.Grayscale=o,zr}var Br={},vu;function ad(){if(vu)return Br;vu=1,Object.defineProperty(Br,"__esModule",{value:!0}),Br.HSL=void 0;const o=St(),p=Bt(),A=Ct();o.Factory.addGetterSetter(p.Node,"hue",0,(0,A.getNumberValidator)(),o.Factory.afterSetFilter),o.Factory.addGetterSetter(p.Node,"saturation",0,(0,A.getNumberValidator)(),o.Factory.afterSetFilter),o.Factory.addGetterSetter(p.Node,"luminance",0,(0,A.getNumberValidator)(),o.Factory.afterSetFilter);const O=function(R){const S=R.data,a=S.length,f=1,g=Math.pow(2,this.saturation()),m=Math.abs(this.hue()+360)%360,y=this.luminance()*127,w=f*g*Math.cos(m*Math.PI/180),c=f*g*Math.sin(m*Math.PI/180),l=.299*f+.701*w+.167*c,d=.587*f-.587*w+.33*c,C=.114*f-.114*w-.497*c,k=.299*f-.299*w-.328*c,b=.587*f+.413*w+.035*c,h=.114*f-.114*w+.293*c,s=.299*f-.3*w+1.25*c,v=.587*f-.586*w-1.05*c,P=.114*f+.886*w-.2*c;let I,z,E,T;for(let M=0;M<a;M+=4)I=S[M+0],z=S[M+1],E=S[M+2],T=S[M+3],S[M+0]=l*I+d*z+C*E+y,S[M+1]=k*I+b*z+h*E+y,S[M+2]=s*I+v*z+P*E+y,S[M+3]=T};return Br.HSL=O,Br}var Vr={},_u;function od(){if(_u)return Vr;_u=1,Object.defineProperty(Vr,"__esModule",{value:!0}),Vr.HSV=void 0;const o=St(),p=Bt(),A=Ct(),O=function(R){const S=R.data,a=S.length,f=Math.pow(2,this.value()),g=Math.pow(2,this.saturation()),m=Math.abs(this.hue()+360)%360,y=f*g*Math.cos(m*Math.PI/180),w=f*g*Math.sin(m*Math.PI/180),c=.299*f+.701*y+.167*w,l=.587*f-.587*y+.33*w,d=.114*f-.114*y-.497*w,C=.299*f-.299*y-.328*w,k=.587*f+.413*y+.035*w,b=.114*f-.114*y+.293*w,h=.299*f-.3*y+1.25*w,s=.587*f-.586*y-1.05*w,v=.114*f+.886*y-.2*w;for(let P=0;P<a;P+=4){const I=S[P+0],z=S[P+1],E=S[P+2],T=S[P+3];S[P+0]=c*I+l*z+d*E,S[P+1]=C*I+k*z+b*E,S[P+2]=h*I+s*z+v*E,S[P+3]=T}};return Vr.HSV=O,o.Factory.addGetterSetter(p.Node,"hue",0,(0,A.getNumberValidator)(),o.Factory.afterSetFilter),o.Factory.addGetterSetter(p.Node,"saturation",0,(0,A.getNumberValidator)(),o.Factory.afterSetFilter),o.Factory.addGetterSetter(p.Node,"value",0,(0,A.getNumberValidator)(),o.Factory.afterSetFilter),Vr}var Hr={},Su;function ld(){if(Su)return Hr;Su=1,Object.defineProperty(Hr,"__esModule",{value:!0}),Hr.Invert=void 0;const o=function(p){const A=p.data,O=A.length;for(let R=0;R<O;R+=4)A[R]=255-A[R],A[R+1]=255-A[R+1],A[R+2]=255-A[R+2]};return Hr.Invert=o,Hr}var Wr={},Cu;function ud(){if(Cu)return Wr;Cu=1,Object.defineProperty(Wr,"__esModule",{value:!0}),Wr.Kaleidoscope=void 0;const o=St(),p=Bt(),A=Ut(),O=Ct(),R=function(f,g,m){const y=f.data,w=g.data,c=f.width,l=f.height,d=m.polarCenterX||c/2,C=m.polarCenterY||l/2;let k=Math.sqrt(d*d+C*C),b=c-d,h=l-C;const s=Math.sqrt(b*b+h*h);k=s>k?s:k;const v=l,P=c,I=360/P*Math.PI/180;for(let z=0;z<P;z+=1){const E=Math.sin(z*I),T=Math.cos(z*I);for(let M=0;M<v;M+=1){b=Math.floor(d+k*M/v*T),h=Math.floor(C+k*M/v*E);let U=(h*c+b)*4;const B=y[U+0],W=y[U+1],Y=y[U+2],V=y[U+3];U=(z+M*c)*4,w[U+0]=B,w[U+1]=W,w[U+2]=Y,w[U+3]=V}}},S=function(f,g,m){const y=f.data,w=g.data,c=f.width,l=f.height,d=m.polarCenterX||c/2,C=m.polarCenterY||l/2;let k=Math.sqrt(d*d+C*C),b=c-d,h=l-C;const s=Math.sqrt(b*b+h*h);k=s>k?s:k;const v=l,P=c,I=0;let z,E;for(b=0;b<c;b+=1)for(h=0;h<l;h+=1){const T=b-d,M=h-C,U=Math.sqrt(T*T+M*M)*v/k;let B=(Math.atan2(M,T)*180/Math.PI+360+I)%360;B=B*P/360,z=Math.floor(B),E=Math.floor(U);let W=(E*c+z)*4;const Y=y[W+0],V=y[W+1],et=y[W+2],x=y[W+3];W=(h*c+b)*4,w[W+0]=Y,w[W+1]=V,w[W+2]=et,w[W+3]=x}},a=function(f){const g=f.width,m=f.height;let y,w,c,l,d,C,k,b,h,s,v=Math.round(this.kaleidoscopePower());const P=Math.round(this.kaleidoscopeAngle()),I=Math.floor(g*(P%360)/360);if(v<1)return;const z=A.Util.createCanvasElement();z.width=g,z.height=m;const E=z.getContext("2d").getImageData(0,0,g,m);A.Util.releaseCanvas(z),R(f,E,{polarCenterX:g/2,polarCenterY:m/2});let T=g/Math.pow(2,v);for(;T<=8;)T=T*2,v-=1;T=Math.ceil(T);let M=T,U=0,B=M,W=1;for(I+T>g&&(U=M,B=0,W=-1),w=0;w<m;w+=1)for(y=U;y!==B;y+=W)c=Math.round(y+I)%g,h=(g*w+c)*4,d=E.data[h+0],C=E.data[h+1],k=E.data[h+2],b=E.data[h+3],s=(g*w+y)*4,E.data[s+0]=d,E.data[s+1]=C,E.data[s+2]=k,E.data[s+3]=b;for(w=0;w<m;w+=1)for(M=Math.floor(T),l=0;l<v;l+=1){for(y=0;y<M+1;y+=1)h=(g*w+y)*4,d=E.data[h+0],C=E.data[h+1],k=E.data[h+2],b=E.data[h+3],s=(g*w+M*2-y-1)*4,E.data[s+0]=d,E.data[s+1]=C,E.data[s+2]=k,E.data[s+3]=b;M*=2}S(E,f,{})};return Wr.Kaleidoscope=a,o.Factory.addGetterSetter(p.Node,"kaleidoscopePower",2,(0,O.getNumberValidator)(),o.Factory.afterSetFilter),o.Factory.addGetterSetter(p.Node,"kaleidoscopeAngle",0,(0,O.getNumberValidator)(),o.Factory.afterSetFilter),Wr}var qr={},wu;function cd(){if(wu)return qr;wu=1,Object.defineProperty(qr,"__esModule",{value:!0}),qr.Mask=void 0;const o=St(),p=Bt(),A=Ct();function O(c,l,d){let C=(d*c.width+l)*4;const k=[];return k.push(c.data[C++],c.data[C++],c.data[C++],c.data[C++]),k}function R(c,l){return Math.sqrt(Math.pow(c[0]-l[0],2)+Math.pow(c[1]-l[1],2)+Math.pow(c[2]-l[2],2))}function S(c){const l=[0,0,0];for(let d=0;d<c.length;d++)l[0]+=c[d][0],l[1]+=c[d][1],l[2]+=c[d][2];return l[0]/=c.length,l[1]/=c.length,l[2]/=c.length,l}function a(c,l){const d=O(c,0,0),C=O(c,c.width-1,0),k=O(c,0,c.height-1),b=O(c,c.width-1,c.height-1),h=l||10;if(R(d,C)<h&&R(C,b)<h&&R(b,k)<h&&R(k,d)<h){const s=S([C,d,b,k]),v=[];for(let P=0;P<c.width*c.height;P++){const I=R(s,[c.data[P*4],c.data[P*4+1],c.data[P*4+2]]);v[P]=I<h?0:255}return v}}function f(c,l){for(let d=0;d<c.width*c.height;d++)c.data[4*d+3]=l[d]}function g(c,l,d){const C=[1,1,1,1,0,1,1,1,1],k=Math.round(Math.sqrt(C.length)),b=Math.floor(k/2),h=[];for(let s=0;s<d;s++)for(let v=0;v<l;v++){const P=s*l+v;let I=0;for(let z=0;z<k;z++)for(let E=0;E<k;E++){const T=s+z-b,M=v+E-b;if(T>=0&&T<d&&M>=0&&M<l){const U=T*l+M,B=C[z*k+E];I+=c[U]*B}}h[P]=I===2040?255:0}return h}function m(c,l,d){const C=[1,1,1,1,1,1,1,1,1],k=Math.round(Math.sqrt(C.length)),b=Math.floor(k/2),h=[];for(let s=0;s<d;s++)for(let v=0;v<l;v++){const P=s*l+v;let I=0;for(let z=0;z<k;z++)for(let E=0;E<k;E++){const T=s+z-b,M=v+E-b;if(T>=0&&T<d&&M>=0&&M<l){const U=T*l+M,B=C[z*k+E];I+=c[U]*B}}h[P]=I>=1020?255:0}return h}function y(c,l,d){const C=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],k=Math.round(Math.sqrt(C.length)),b=Math.floor(k/2),h=[];for(let s=0;s<d;s++)for(let v=0;v<l;v++){const P=s*l+v;let I=0;for(let z=0;z<k;z++)for(let E=0;E<k;E++){const T=s+z-b,M=v+E-b;if(T>=0&&T<d&&M>=0&&M<l){const U=T*l+M,B=C[z*k+E];I+=c[U]*B}}h[P]=I}return h}const w=function(c){const l=this.threshold();let d=a(c,l);return d&&(d=g(d,c.width,c.height),d=m(d,c.width,c.height),d=y(d,c.width,c.height),f(c,d)),c};return qr.Mask=w,o.Factory.addGetterSetter(p.Node,"threshold",0,(0,A.getNumberValidator)(),o.Factory.afterSetFilter),qr}var jr={},xu;function hd(){if(xu)return jr;xu=1,Object.defineProperty(jr,"__esModule",{value:!0}),jr.Noise=void 0;const o=St(),p=Bt(),A=Ct(),O=function(R){const S=this.noise()*255,a=R.data,f=a.length,g=S/2;for(let m=0;m<f;m+=4)a[m+0]+=g-2*g*Math.random(),a[m+1]+=g-2*g*Math.random(),a[m+2]+=g-2*g*Math.random()};return jr.Noise=O,o.Factory.addGetterSetter(p.Node,"noise",.2,(0,A.getNumberValidator)(),o.Factory.afterSetFilter),jr}var Kr={},Pu;function dd(){if(Pu)return Kr;Pu=1,Object.defineProperty(Kr,"__esModule",{value:!0}),Kr.Pixelate=void 0;const o=St(),p=Ut(),A=Bt(),O=Ct(),R=function(S){let a=Math.ceil(this.pixelSize()),f=S.width,g=S.height,m=Math.ceil(f/a),y=Math.ceil(g/a),w=S.data;if(a<=0){p.Util.error("pixelSize value can not be <= 0");return}for(let c=0;c<m;c+=1)for(let l=0;l<y;l+=1){let d=0,C=0,k=0,b=0;const h=c*a,s=h+a,v=l*a,P=v+a;let I=0;for(let z=h;z<s;z+=1)if(!(z>=f))for(let E=v;E<P;E+=1){if(E>=g)continue;const T=(f*E+z)*4;d+=w[T+0],C+=w[T+1],k+=w[T+2],b+=w[T+3],I+=1}d=d/I,C=C/I,k=k/I,b=b/I;for(let z=h;z<s;z+=1)if(!(z>=f))for(let E=v;E<P;E+=1){if(E>=g)continue;const T=(f*E+z)*4;w[T+0]=d,w[T+1]=C,w[T+2]=k,w[T+3]=b}}};return Kr.Pixelate=R,o.Factory.addGetterSetter(A.Node,"pixelSize",8,(0,O.getNumberValidator)(),o.Factory.afterSetFilter),Kr}var Yr={},ku;function fd(){if(ku)return Yr;ku=1,Object.defineProperty(Yr,"__esModule",{value:!0}),Yr.Posterize=void 0;const o=St(),p=Bt(),A=Ct(),O=function(R){const S=Math.round(this.levels()*254)+1,a=R.data,f=a.length,g=255/S;for(let m=0;m<f;m+=1)a[m]=Math.floor(a[m]/g)*g};return Yr.Posterize=O,o.Factory.addGetterSetter(p.Node,"levels",.5,(0,A.getNumberValidator)(),o.Factory.afterSetFilter),Yr}var Xr={},Eu;function gd(){if(Eu)return Xr;Eu=1,Object.defineProperty(Xr,"__esModule",{value:!0}),Xr.RGB=void 0;const o=St(),p=Bt(),A=Ct(),O=function(R){const S=R.data,a=S.length,f=this.red(),g=this.green(),m=this.blue();for(let y=0;y<a;y+=4){const w=(.34*S[y]+.5*S[y+1]+.16*S[y+2])/255;S[y]=w*f,S[y+1]=w*g,S[y+2]=w*m,S[y+3]=S[y+3]}};return Xr.RGB=O,o.Factory.addGetterSetter(p.Node,"red",0,function(R){return this._filterUpToDate=!1,R>255?255:R<0?0:Math.round(R)}),o.Factory.addGetterSetter(p.Node,"green",0,function(R){return this._filterUpToDate=!1,R>255?255:R<0?0:Math.round(R)}),o.Factory.addGetterSetter(p.Node,"blue",0,A.RGBComponent,o.Factory.afterSetFilter),Xr}var Qr={},Ru;function pd(){if(Ru)return Qr;Ru=1,Object.defineProperty(Qr,"__esModule",{value:!0}),Qr.RGBA=void 0;const o=St(),p=Bt(),A=Ct(),O=function(R){const S=R.data,a=S.length,f=this.red(),g=this.green(),m=this.blue(),y=this.alpha();for(let w=0;w<a;w+=4){const c=1-y;S[w]=f*y+S[w]*c,S[w+1]=g*y+S[w+1]*c,S[w+2]=m*y+S[w+2]*c}};return Qr.RGBA=O,o.Factory.addGetterSetter(p.Node,"red",0,function(R){return this._filterUpToDate=!1,R>255?255:R<0?0:Math.round(R)}),o.Factory.addGetterSetter(p.Node,"green",0,function(R){return this._filterUpToDate=!1,R>255?255:R<0?0:Math.round(R)}),o.Factory.addGetterSetter(p.Node,"blue",0,A.RGBComponent,o.Factory.afterSetFilter),o.Factory.addGetterSetter(p.Node,"alpha",1,function(R){return this._filterUpToDate=!1,R>1?1:R<0?0:R}),Qr}var Jr={},Tu;function md(){if(Tu)return Jr;Tu=1,Object.defineProperty(Jr,"__esModule",{value:!0}),Jr.Sepia=void 0;const o=function(p){const A=p.data,O=A.length;for(let R=0;R<O;R+=4){const S=A[R+0],a=A[R+1],f=A[R+2];A[R+0]=Math.min(255,S*.393+a*.769+f*.189),A[R+1]=Math.min(255,S*.349+a*.686+f*.168),A[R+2]=Math.min(255,S*.272+a*.534+f*.131)}};return Jr.Sepia=o,Jr}var Zr={},Nu;function yd(){if(Nu)return Zr;Nu=1,Object.defineProperty(Zr,"__esModule",{value:!0}),Zr.Solarize=void 0;const o=function(p){const A=p.data,O=p.width,R=p.height,S=O*4;let a=R;do{const f=(a-1)*S;let g=O;do{const m=f+(g-1)*4;let y=A[m],w=A[m+1],c=A[m+2];y>127&&(y=255-y),w>127&&(w=255-w),c>127&&(c=255-c),A[m]=y,A[m+1]=w,A[m+2]=c}while(--g)}while(--a)};return Zr.Solarize=o,Zr}var $r={},Fu;function vd(){if(Fu)return $r;Fu=1,Object.defineProperty($r,"__esModule",{value:!0}),$r.Threshold=void 0;const o=St(),p=Bt(),A=Ct(),O=function(R){const S=this.threshold()*255,a=R.data,f=a.length;for(let g=0;g<f;g+=1)a[g]=a[g]<S?0:255};return $r.Threshold=O,o.Factory.addGetterSetter(p.Node,"threshold",.5,(0,A.getNumberValidator)(),o.Factory.afterSetFilter),$r}var Au;function _d(){if(Au)return fr;Au=1,Object.defineProperty(fr,"__esModule",{value:!0}),fr.Konva=void 0;const o=La(),p=zh(),A=Vh(),O=Hh(),R=Wh(),S=qh(),a=jh(),f=ic(),g=Da(),m=sc(),y=Kh(),w=Yh(),c=Xh(),l=Qh(),d=ac(),C=Jh(),k=Zh(),b=$h(),h=td(),s=ed(),v=nd(),P=rd(),I=id(),z=sd(),E=ad(),T=od(),M=ld(),U=ud(),B=cd(),W=hd(),Y=dd(),V=fd(),et=gd(),x=pd(),_=md(),F=yd(),N=vd();return fr.Konva=o.Konva.Util._assign(o.Konva,{Arc:p.Arc,Arrow:A.Arrow,Circle:O.Circle,Ellipse:R.Ellipse,Image:S.Image,Label:a.Label,Tag:a.Tag,Line:f.Line,Path:g.Path,Rect:m.Rect,RegularPolygon:y.RegularPolygon,Ring:w.Ring,Sprite:c.Sprite,Star:l.Star,Text:d.Text,TextPath:C.TextPath,Transformer:k.Transformer,Wedge:b.Wedge,Filters:{Blur:h.Blur,Brighten:s.Brighten,Contrast:v.Contrast,Emboss:P.Emboss,Enhance:I.Enhance,Grayscale:z.Grayscale,HSL:E.HSL,HSV:T.HSV,Invert:M.Invert,Kaleidoscope:U.Kaleidoscope,Mask:B.Mask,Noise:W.Noise,Pixelate:Y.Pixelate,Posterize:V.Posterize,RGB:et.RGB,RGBA:x.RGBA,Sepia:_.Sepia,Solarize:F.Solarize,Threshold:N.Threshold}}),fr}var Sd=Qi.exports,Mu;function Cd(){if(Mu)return Qi.exports;Mu=1,Object.defineProperty(Sd,"__esModule",{value:!0});const o=_d();return Qi.exports=o.Konva,Qi.exports}Cd();var Xi={exports:{}},bu;function wd(){return bu||(bu=1,(function(o,p){Object.defineProperty(p,"__esModule",{value:!0}),p.Konva=void 0;var A=La();Object.defineProperty(p,"Konva",{enumerable:!0,get:function(){return A.Konva}});const O=La();o.exports=O.Konva})(Xi,Xi.exports)),Xi.exports}var xd=wd();const ei=tc(xd);var ka={exports:{}},Ea={exports:{}},Ra={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lu;function Pd(){return Lu||(Lu=1,(function(o){function p(_,F){var N=_.length;_.push(F);t:for(;0<N;){var G=N-1>>>1,K=_[G];if(0<R(K,F))_[G]=F,_[N]=K,N=G;else break t}}function A(_){return _.length===0?null:_[0]}function O(_){if(_.length===0)return null;var F=_[0],N=_.pop();if(N!==F){_[0]=N;t:for(var G=0,K=_.length,H=K>>>1;G<H;){var tt=2*(G+1)-1,nt=_[tt],X=tt+1,D=_[X];if(0>R(nt,N))X<K&&0>R(D,nt)?(_[G]=D,_[X]=N,G=X):(_[G]=nt,_[tt]=N,G=tt);else if(X<K&&0>R(D,N))_[G]=D,_[X]=N,G=X;else break t}}return F}function R(_,F){var N=_.sortIndex-F.sortIndex;return N!==0?N:_.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var S=performance;o.unstable_now=function(){return S.now()}}else{var a=Date,f=a.now();o.unstable_now=function(){return a.now()-f}}var g=[],m=[],y=1,w=null,c=3,l=!1,d=!1,C=!1,k=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,h=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function s(_){for(var F=A(m);F!==null;){if(F.callback===null)O(m);else if(F.startTime<=_)O(m),F.sortIndex=F.expirationTime,p(g,F);else break;F=A(m)}}function v(_){if(C=!1,s(_),!d)if(A(g)!==null)d=!0,et(P);else{var F=A(m);F!==null&&x(v,F.startTime-_)}}function P(_,F){d=!1,C&&(C=!1,b(E),E=-1),l=!0;var N=c;try{for(s(F),w=A(g);w!==null&&(!(w.expirationTime>F)||_&&!U());){var G=w.callback;if(typeof G=="function"){w.callback=null,c=w.priorityLevel;var K=G(w.expirationTime<=F);F=o.unstable_now(),typeof K=="function"?w.callback=K:w===A(g)&&O(g),s(F)}else O(g);w=A(g)}if(w!==null)var H=!0;else{var tt=A(m);tt!==null&&x(v,tt.startTime-F),H=!1}return H}finally{w=null,c=N,l=!1}}var I=!1,z=null,E=-1,T=5,M=-1;function U(){return!(o.unstable_now()-M<T)}function B(){if(z!==null){var _=o.unstable_now();M=_;var F=!0;try{F=z(!0,_)}finally{F?W():(I=!1,z=null)}}else I=!1}var W;if(typeof h=="function")W=function(){h(B)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,V=Y.port2;Y.port1.onmessage=B,W=function(){V.postMessage(null)}}else W=function(){k(B,0)};function et(_){z=_,I||(I=!0,W())}function x(_,F){E=k(function(){_(o.unstable_now())},F)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(_){_.callback=null},o.unstable_continueExecution=function(){d||l||(d=!0,et(P))},o.unstable_forceFrameRate=function(_){0>_||125<_?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<_?Math.floor(1e3/_):5},o.unstable_getCurrentPriorityLevel=function(){return c},o.unstable_getFirstCallbackNode=function(){return A(g)},o.unstable_next=function(_){switch(c){case 1:case 2:case 3:var F=3;break;default:F=c}var N=c;c=F;try{return _()}finally{c=N}},o.unstable_pauseExecution=function(){},o.unstable_requestPaint=function(){},o.unstable_runWithPriority=function(_,F){switch(_){case 1:case 2:case 3:case 4:case 5:break;default:_=3}var N=c;c=_;try{return F()}finally{c=N}},o.unstable_scheduleCallback=function(_,F,N){var G=o.unstable_now();switch(typeof N=="object"&&N!==null?(N=N.delay,N=typeof N=="number"&&0<N?G+N:G):N=G,_){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=N+K,_={id:y++,callback:F,priorityLevel:_,startTime:N,expirationTime:K,sortIndex:-1},N>G?(_.sortIndex=N,p(m,_),A(g)===null&&_===A(m)&&(C?(b(E),E=-1):C=!0,x(v,N-G))):(_.sortIndex=K,p(g,_),d||l||(d=!0,et(P))),_},o.unstable_shouldYield=U,o.unstable_wrapCallback=function(_){var F=c;return function(){var N=c;c=F;try{return _.apply(this,arguments)}finally{c=N}}}})(Ra)),Ra}var Iu;function kd(){return Iu||(Iu=1,Ea.exports=Pd()),Ea.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ta,Ou;function Ed(){return Ou||(Ou=1,Ta=function(p){var A={},O=bh(),R=kd(),S=Object.assign;function a(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var f=O.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,g=Symbol.for("react.element"),m=Symbol.for("react.portal"),y=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),d=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),b=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),s=Symbol.for("react.lazy"),v=Symbol.for("react.offscreen"),P=Symbol.iterator;function I(t){return t===null||typeof t!="object"?null:(t=P&&t[P]||t["@@iterator"],typeof t=="function"?t:null)}function z(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case y:return"Fragment";case m:return"Portal";case c:return"Profiler";case w:return"StrictMode";case k:return"Suspense";case b:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case d:return(t.displayName||"Context")+".Consumer";case l:return(t._context.displayName||"Context")+".Provider";case C:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case h:return e=t.displayName||null,e!==null?e:z(t.type)||"Memo";case s:e=t._payload,t=t._init;try{return z(t(e))}catch{}}return null}function E(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(e);case 8:return e===w?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function T(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,(e.flags&4098)!==0&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function M(t){if(T(t)!==t)throw Error(a(188))}function U(t){var e=t.alternate;if(!e){if(e=T(t),e===null)throw Error(a(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var u=i.alternate;if(u===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===u.child){for(u=i.child;u;){if(u===n)return M(i),t;if(u===r)return M(i),e;u=u.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=u;else{for(var L=!1,q=i.child;q;){if(q===n){L=!0,n=i,r=u;break}if(q===r){L=!0,r=i,n=u;break}q=q.sibling}if(!L){for(q=u.child;q;){if(q===n){L=!0,n=u,r=i;break}if(q===r){L=!0,r=u,n=i;break}q=q.sibling}if(!L)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(n.tag!==3)throw Error(a(188));return n.stateNode.current===n?t:e}function B(t){return t=U(t),t!==null?W(t):null}function W(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=W(t);if(e!==null)return e;t=t.sibling}return null}function Y(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){if(t.tag!==4){var e=Y(t);if(e!==null)return e}t=t.sibling}return null}var V=Array.isArray,et=p.getPublicInstance,x=p.getRootHostContext,_=p.getChildHostContext,F=p.prepareForCommit,N=p.resetAfterCommit,G=p.createInstance,K=p.appendInitialChild,H=p.finalizeInitialChildren,tt=p.prepareUpdate,nt=p.shouldSetTextContent,X=p.createTextInstance,D=p.scheduleTimeout,Q=p.cancelTimeout,it=p.noTimeout,st=p.isPrimaryRenderer,at=p.supportsMutation,ft=p.supportsPersistence,ht=p.supportsHydration,kt=p.getInstanceFromNode,gt=p.preparePortalMount,Ht=p.getCurrentEventPriority,Et=p.detachDeletedInstance,Ot=p.supportsMicrotasks,rn=p.scheduleMicrotask,jt=p.supportsTestSelectors,vn=p.findFiberRoot,Tt=p.getBoundingRect,_e=p.getTextContent,ee=p.isHiddenSubtree,Ke=p.matchAccessibilityRole,ne=p.setFocusIfFocusable,De=p.setupIntersectionObserver,Se=p.appendChild,xe=p.appendChildToContainer,re=p.commitTextUpdate,ie=p.commitMount,_n=p.commitUpdate,ni=p.insertBefore,An=p.insertInContainerBefore,ts=p.removeChild,es=p.removeChildFromContainer,Ba=p.resetTextContent,pc=p.hideInstance,mc=p.hideTextInstance,yc=p.unhideInstance,vc=p.unhideTextInstance,_c=p.clearContainer,Sc=p.cloneInstance,Va=p.createContainerChildSet,Ha=p.appendChildToContainerChildSet,Cc=p.finalizeContainerChildren,ns=p.replaceContainerChildren,Wa=p.cloneHiddenInstance,qa=p.cloneHiddenTextInstance,wc=p.canHydrateInstance,xc=p.canHydrateTextInstance,Pc=p.canHydrateSuspenseInstance,ja=p.isSuspenseInstancePending,rs=p.isSuspenseInstanceFallback,kc=p.getSuspenseInstanceFallbackErrorDetails,Ec=p.registerSuspenseInstanceRetry,ri=p.getNextHydratableSibling,Rc=p.getFirstHydratableChild,Tc=p.getFirstHydratableChildWithinContainer,Nc=p.getFirstHydratableChildWithinSuspenseInstance,Fc=p.hydrateInstance,Ac=p.hydrateTextInstance,Mc=p.hydrateSuspenseInstance,bc=p.getNextHydratableInstanceAfterSuspenseInstance,Lc=p.commitHydratedContainer,Ic=p.commitHydratedSuspenseInstance,Oc=p.clearSuspenseBoundary,Gc=p.clearSuspenseBoundaryFromContainer,Dc=p.shouldDeleteUnhydratedTailInstances,Uc=p.didNotMatchHydratedContainerTextInstance,zc=p.didNotMatchHydratedTextInstance,is;function Yn(t){if(is===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);is=e&&e[1]||""}return`
`+is+t}var ss=!1;function as(t,e){if(!t||ss)return"";ss=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(rt){var r=rt}Reflect.construct(t,[],e)}else{try{e.call()}catch(rt){r=rt}t.call(e.prototype)}else{try{throw Error()}catch(rt){r=rt}t()}}catch(rt){if(rt&&r&&typeof rt.stack=="string"){for(var i=rt.stack.split(`
`),u=r.stack.split(`
`),L=i.length-1,q=u.length-1;1<=L&&0<=q&&i[L]!==u[q];)q--;for(;1<=L&&0<=q;L--,q--)if(i[L]!==u[q]){if(L!==1||q!==1)do if(L--,q--,0>q||i[L]!==u[q]){var Z=`
`+i[L].replace(" at new "," at ");return t.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",t.displayName)),Z}while(1<=L&&0<=q);break}}}finally{ss=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Yn(t):""}var Bc=Object.prototype.hasOwnProperty,os=[],Mn=-1;function sn(t){return{current:t}}function Mt(t){0>Mn||(t.current=os[Mn],os[Mn]=null,Mn--)}function Nt(t,e){Mn++,os[Mn]=t.current,t.current=e}var an={},se=sn(an),he=sn(!1),Sn=an;function bn(t,e){var n=t.type.contextTypes;if(!n)return an;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},u;for(u in n)i[u]=e[u];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function de(t){return t=t.childContextTypes,t!=null}function ii(){Mt(he),Mt(se)}function Ka(t,e,n){if(se.current!==an)throw Error(a(168));Nt(se,e),Nt(he,n)}function Ya(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(a(108,E(t)||"Unknown",i));return S({},n,r)}function si(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||an,Sn=se.current,Nt(se,t),Nt(he,he.current),!0}function Xa(t,e,n){var r=t.stateNode;if(!r)throw Error(a(169));n?(t=Ya(t,e,Sn),r.__reactInternalMemoizedMergedChildContext=t,Mt(he),Mt(se),Nt(se,t)):Mt(he),Nt(he,n)}var Me=Math.clz32?Math.clz32:Wc,Vc=Math.log,Hc=Math.LN2;function Wc(t){return t>>>=0,t===0?32:31-(Vc(t)/Hc|0)|0}var ai=64,oi=4194304;function Xn(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function li(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,u=t.pingedLanes,L=n&268435455;if(L!==0){var q=L&~i;q!==0?r=Xn(q):(u&=L,u!==0&&(r=Xn(u)))}else L=n&~i,L!==0?r=Xn(L):u!==0&&(r=Xn(u));if(r===0)return 0;if(e!==0&&e!==r&&(e&i)===0&&(i=r&-r,u=e&-e,i>=u||i===16&&(u&4194240)!==0))return e;if((r&4)!==0&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Me(e),i=1<<n,r|=t[n],e&=~i;return r}function qc(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jc(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,u=t.pendingLanes;0<u;){var L=31-Me(u),q=1<<L,Z=i[L];Z===-1?((q&n)===0||(q&r)!==0)&&(i[L]=qc(q,e)):Z<=e&&(t.expiredLanes|=q),u&=~q}}function ls(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Qa(){var t=ai;return ai<<=1,(ai&4194240)===0&&(ai=64),t}function us(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Qn(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Me(e),t[e]=n}function Kc(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Me(n),u=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~u}}function cs(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Me(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var wt=0;function Ja(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var hs=R.unstable_scheduleCallback,Za=R.unstable_cancelCallback,Yc=R.unstable_shouldYield,Xc=R.unstable_requestPaint,Kt=R.unstable_now,ds=R.unstable_ImmediatePriority,Qc=R.unstable_UserBlockingPriority,fs=R.unstable_NormalPriority,Jc=R.unstable_IdlePriority,ui=null,Ue=null;function Zc(t){if(Ue&&typeof Ue.onCommitFiberRoot=="function")try{Ue.onCommitFiberRoot(ui,t,void 0,(t.current.flags&128)===128)}catch{}}function $c(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var be=typeof Object.is=="function"?Object.is:$c,Ye=null,ci=!1,gs=!1;function $a(t){Ye===null?Ye=[t]:Ye.push(t)}function th(t){ci=!0,$a(t)}function ze(){if(!gs&&Ye!==null){gs=!0;var t=0,e=wt;try{var n=Ye;for(wt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ye=null,ci=!1}catch(i){throw Ye!==null&&(Ye=Ye.slice(t+1)),hs(ds,ze),i}finally{wt=e,gs=!1}}return null}var Ln=[],In=0,hi=null,di=0,Pe=[],ke=0,Cn=null,Xe=1,Qe="";function wn(t,e){Ln[In++]=di,Ln[In++]=hi,hi=t,di=e}function to(t,e,n){Pe[ke++]=Xe,Pe[ke++]=Qe,Pe[ke++]=Cn,Cn=t;var r=Xe;t=Qe;var i=32-Me(r)-1;r&=~(1<<i),n+=1;var u=32-Me(e)+i;if(30<u){var L=i-i%5;u=(r&(1<<L)-1).toString(32),r>>=L,i-=L,Xe=1<<32-Me(e)+i|n<<i|r,Qe=u+t}else Xe=1<<u|n<<i|r,Qe=t}function ps(t){t.return!==null&&(wn(t,1),to(t,1,0))}function ms(t){for(;t===hi;)hi=Ln[--In],Ln[In]=null,di=Ln[--In],Ln[In]=null;for(;t===Cn;)Cn=Pe[--ke],Pe[ke]=null,Qe=Pe[--ke],Pe[ke]=null,Xe=Pe[--ke],Pe[ke]=null}var Ce=null,Ee=null,Lt=!1,Jn=!1,Le=null;function eo(t,e){var n=Ae(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function no(t,e){switch(t.tag){case 5:return e=wc(e,t.type,t.pendingProps),e!==null?(t.stateNode=e,Ce=t,Ee=Rc(e),!0):!1;case 6:return e=xc(e,t.pendingProps),e!==null?(t.stateNode=e,Ce=t,Ee=null,!0):!1;case 13:if(e=Pc(e),e!==null){var n=Cn!==null?{id:Xe,overflow:Qe}:null;return t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ae(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ce=t,Ee=null,!0}return!1;default:return!1}}function ys(t){return(t.mode&1)!==0&&(t.flags&128)===0}function vs(t){if(Lt){var e=Ee;if(e){var n=e;if(!no(t,e)){if(ys(t))throw Error(a(418));e=ri(n);var r=Ce;e&&no(t,e)?eo(r,n):(t.flags=t.flags&-4097|2,Lt=!1,Ce=t)}}else{if(ys(t))throw Error(a(418));t.flags=t.flags&-4097|2,Lt=!1,Ce=t}}}function ro(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ce=t}function fi(t){if(!ht||t!==Ce)return!1;if(!Lt)return ro(t),Lt=!0,!1;if(t.tag!==3&&(t.tag!==5||Dc(t.type)&&!nt(t.type,t.memoizedProps))){var e=Ee;if(e){if(ys(t))throw io(),Error(a(418));for(;e;)eo(t,e),e=ri(e)}}if(ro(t),t.tag===13){if(!ht)throw Error(a(316));if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));Ee=bc(t)}else Ee=Ce?ri(t.stateNode):null;return!0}function io(){for(var t=Ee;t;)t=ri(t)}function On(){ht&&(Ee=Ce=null,Jn=Lt=!1)}function _s(t){Le===null?Le=[t]:Le.push(t)}var eh=f.ReactCurrentBatchConfig;function gi(t,e){if(be(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Bc.call(e,i)||!be(t[i],e[i]))return!1}return!0}function nh(t){switch(t.tag){case 5:return Yn(t.type);case 16:return Yn("Lazy");case 13:return Yn("Suspense");case 19:return Yn("SuspenseList");case 0:case 2:case 15:return t=as(t.type,!1),t;case 11:return t=as(t.type.render,!1),t;case 1:return t=as(t.type,!0),t;default:return""}}function Zn(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,t));var i=r,u=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===u?e.ref:(e=function(L){var q=i.refs;L===null?delete q[u]:q[u]=L},e._stringRef=u,e)}if(typeof t!="string")throw Error(a(284));if(!n._owner)throw Error(a(290,t))}return t}function pi(t,e){throw t=Object.prototype.toString.call(e),Error(a(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function so(t){var e=t._init;return e(t._payload)}function ao(t){function e(J,j){if(t){var $=J.deletions;$===null?(J.deletions=[j],J.flags|=16):$.push(j)}}function n(J,j){if(!t)return null;for(;j!==null;)e(J,j),j=j.sibling;return null}function r(J,j){for(J=new Map;j!==null;)j.key!==null?J.set(j.key,j):J.set(j.index,j),j=j.sibling;return J}function i(J,j){return J=fn(J,j),J.index=0,J.sibling=null,J}function u(J,j,$){return J.index=$,t?($=J.alternate,$!==null?($=$.index,$<j?(J.flags|=2,j):$):(J.flags|=2,j)):(J.flags|=1048576,j)}function L(J){return t&&J.alternate===null&&(J.flags|=2),J}function q(J,j,$,lt){return j===null||j.tag!==6?(j=ga($,J.mode,lt),j.return=J,j):(j=i(j,$),j.return=J,j)}function Z(J,j,$,lt){var dt=$.type;return dt===y?ct(J,j,$.props.children,lt,$.key):j!==null&&(j.elementType===dt||typeof dt=="object"&&dt!==null&&dt.$$typeof===s&&so(dt)===j.type)?(lt=i(j,$.props),lt.ref=Zn(J,j,$),lt.return=J,lt):(lt=ji($.type,$.key,$.props,null,J.mode,lt),lt.ref=Zn(J,j,$),lt.return=J,lt)}function rt(J,j,$,lt){return j===null||j.tag!==4||j.stateNode.containerInfo!==$.containerInfo||j.stateNode.implementation!==$.implementation?(j=pa($,J.mode,lt),j.return=J,j):(j=i(j,$.children||[]),j.return=J,j)}function ct(J,j,$,lt,dt){return j===null||j.tag!==7?(j=Nn($,J.mode,lt,dt),j.return=J,j):(j=i(j,$),j.return=J,j)}function pt(J,j,$){if(typeof j=="string"&&j!==""||typeof j=="number")return j=ga(""+j,J.mode,$),j.return=J,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case g:return $=ji(j.type,j.key,j.props,null,J.mode,$),$.ref=Zn(J,null,j),$.return=J,$;case m:return j=pa(j,J.mode,$),j.return=J,j;case s:var lt=j._init;return pt(J,lt(j._payload),$)}if(V(j)||I(j))return j=Nn(j,J.mode,$,null),j.return=J,j;pi(J,j)}return null}function ot(J,j,$,lt){var dt=j!==null?j.key:null;if(typeof $=="string"&&$!==""||typeof $=="number")return dt!==null?null:q(J,j,""+$,lt);if(typeof $=="object"&&$!==null){switch($.$$typeof){case g:return $.key===dt?Z(J,j,$,lt):null;case m:return $.key===dt?rt(J,j,$,lt):null;case s:return dt=$._init,ot(J,j,dt($._payload),lt)}if(V($)||I($))return dt!==null?null:ct(J,j,$,lt,null);pi(J,$)}return null}function bt(J,j,$,lt,dt){if(typeof lt=="string"&&lt!==""||typeof lt=="number")return J=J.get($)||null,q(j,J,""+lt,dt);if(typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case g:return J=J.get(lt.key===null?$:lt.key)||null,Z(j,J,lt,dt);case m:return J=J.get(lt.key===null?$:lt.key)||null,rt(j,J,lt,dt);case s:var yt=lt._init;return bt(J,j,$,yt(lt._payload),dt)}if(V(lt)||I(lt))return J=J.get($)||null,ct(j,J,lt,dt,null);pi(j,lt)}return null}function Rt(J,j,$,lt){for(var dt=null,yt=null,mt=j,xt=j=0,Qt=null;mt!==null&&xt<$.length;xt++){mt.index>xt?(Qt=mt,mt=null):Qt=mt.sibling;var Pt=ot(J,mt,$[xt],lt);if(Pt===null){mt===null&&(mt=Qt);break}t&&mt&&Pt.alternate===null&&e(J,mt),j=u(Pt,j,xt),yt===null?dt=Pt:yt.sibling=Pt,yt=Pt,mt=Qt}if(xt===$.length)return n(J,mt),Lt&&wn(J,xt),dt;if(mt===null){for(;xt<$.length;xt++)mt=pt(J,$[xt],lt),mt!==null&&(j=u(mt,j,xt),yt===null?dt=mt:yt.sibling=mt,yt=mt);return Lt&&wn(J,xt),dt}for(mt=r(J,mt);xt<$.length;xt++)Qt=bt(mt,J,xt,$[xt],lt),Qt!==null&&(t&&Qt.alternate!==null&&mt.delete(Qt.key===null?xt:Qt.key),j=u(Qt,j,xt),yt===null?dt=Qt:yt.sibling=Qt,yt=Qt);return t&&mt.forEach(function(gn){return e(J,gn)}),Lt&&wn(J,xt),dt}function me(J,j,$,lt){var dt=I($);if(typeof dt!="function")throw Error(a(150));if($=dt.call($),$==null)throw Error(a(151));for(var yt=dt=null,mt=j,xt=j=0,Qt=null,Pt=$.next();mt!==null&&!Pt.done;xt++,Pt=$.next()){mt.index>xt?(Qt=mt,mt=null):Qt=mt.sibling;var gn=ot(J,mt,Pt.value,lt);if(gn===null){mt===null&&(mt=Qt);break}t&&mt&&gn.alternate===null&&e(J,mt),j=u(gn,j,xt),yt===null?dt=gn:yt.sibling=gn,yt=gn,mt=Qt}if(Pt.done)return n(J,mt),Lt&&wn(J,xt),dt;if(mt===null){for(;!Pt.done;xt++,Pt=$.next())Pt=pt(J,Pt.value,lt),Pt!==null&&(j=u(Pt,j,xt),yt===null?dt=Pt:yt.sibling=Pt,yt=Pt);return Lt&&wn(J,xt),dt}for(mt=r(J,mt);!Pt.done;xt++,Pt=$.next())Pt=bt(mt,J,xt,Pt.value,lt),Pt!==null&&(t&&Pt.alternate!==null&&mt.delete(Pt.key===null?xt:Pt.key),j=u(Pt,j,xt),yt===null?dt=Pt:yt.sibling=Pt,yt=Pt);return t&&mt.forEach(function(Mh){return e(J,Mh)}),Lt&&wn(J,xt),dt}function tn(J,j,$,lt){if(typeof $=="object"&&$!==null&&$.type===y&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case g:t:{for(var dt=$.key,yt=j;yt!==null;){if(yt.key===dt){if(dt=$.type,dt===y){if(yt.tag===7){n(J,yt.sibling),j=i(yt,$.props.children),j.return=J,J=j;break t}}else if(yt.elementType===dt||typeof dt=="object"&&dt!==null&&dt.$$typeof===s&&so(dt)===yt.type){n(J,yt.sibling),j=i(yt,$.props),j.ref=Zn(J,yt,$),j.return=J,J=j;break t}n(J,yt);break}else e(J,yt);yt=yt.sibling}$.type===y?(j=Nn($.props.children,J.mode,lt,$.key),j.return=J,J=j):(lt=ji($.type,$.key,$.props,null,J.mode,lt),lt.ref=Zn(J,j,$),lt.return=J,J=lt)}return L(J);case m:t:{for(yt=$.key;j!==null;){if(j.key===yt)if(j.tag===4&&j.stateNode.containerInfo===$.containerInfo&&j.stateNode.implementation===$.implementation){n(J,j.sibling),j=i(j,$.children||[]),j.return=J,J=j;break t}else{n(J,j);break}else e(J,j);j=j.sibling}j=pa($,J.mode,lt),j.return=J,J=j}return L(J);case s:return yt=$._init,tn(J,j,yt($._payload),lt)}if(V($))return Rt(J,j,$,lt);if(I($))return me(J,j,$,lt);pi(J,$)}return typeof $=="string"&&$!==""||typeof $=="number"?($=""+$,j!==null&&j.tag===6?(n(J,j.sibling),j=i(j,$),j.return=J,J=j):(n(J,j),j=ga($,J.mode,lt),j.return=J,J=j),L(J)):n(J,j)}return tn}var Gn=ao(!0),oo=ao(!1),mi=sn(null),yi=null,Dn=null,Ss=null;function Cs(){Ss=Dn=yi=null}function lo(t,e,n){st?(Nt(mi,e._currentValue),e._currentValue=n):(Nt(mi,e._currentValue2),e._currentValue2=n)}function ws(t){var e=mi.current;Mt(mi),st?t._currentValue=e:t._currentValue2=e}function xs(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Un(t,e){yi=t,Ss=Dn=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&e)!==0&&(fe=!0),t.firstContext=null)}function Re(t){var e=st?t._currentValue:t._currentValue2;if(Ss!==t)if(t={context:t,memoizedValue:e,next:null},Dn===null){if(yi===null)throw Error(a(308));Dn=t,yi.dependencies={lanes:0,firstContext:t}}else Dn=Dn.next=t;return e}var xn=null;function Ps(t){xn===null?xn=[t]:xn.push(t)}function uo(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Ps(e)):(n.next=i.next,i.next=n),e.interleaved=n,Be(t,r)}function Be(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var on=!1;function ks(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function co(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Je(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ln(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,(_t&2)!==0){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Be(t,n)}return i=r.interleaved,i===null?(e.next=e,Ps(r)):(e.next=i.next,i.next=e),r.interleaved=e,Be(t,n)}function vi(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,cs(t,n)}}function ho(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,u=null;if(n=n.firstBaseUpdate,n!==null){do{var L={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};u===null?i=u=L:u=u.next=L,n=n.next}while(n!==null);u===null?i=u=e:u=u.next=e}else i=u=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:u,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function _i(t,e,n,r){var i=t.updateQueue;on=!1;var u=i.firstBaseUpdate,L=i.lastBaseUpdate,q=i.shared.pending;if(q!==null){i.shared.pending=null;var Z=q,rt=Z.next;Z.next=null,L===null?u=rt:L.next=rt,L=Z;var ct=t.alternate;ct!==null&&(ct=ct.updateQueue,q=ct.lastBaseUpdate,q!==L&&(q===null?ct.firstBaseUpdate=rt:q.next=rt,ct.lastBaseUpdate=Z))}if(u!==null){var pt=i.baseState;L=0,ct=rt=Z=null,q=u;do{var ot=q.lane,bt=q.eventTime;if((r&ot)===ot){ct!==null&&(ct=ct.next={eventTime:bt,lane:0,tag:q.tag,payload:q.payload,callback:q.callback,next:null});t:{var Rt=t,me=q;switch(ot=e,bt=n,me.tag){case 1:if(Rt=me.payload,typeof Rt=="function"){pt=Rt.call(bt,pt,ot);break t}pt=Rt;break t;case 3:Rt.flags=Rt.flags&-65537|128;case 0:if(Rt=me.payload,ot=typeof Rt=="function"?Rt.call(bt,pt,ot):Rt,ot==null)break t;pt=S({},pt,ot);break t;case 2:on=!0}}q.callback!==null&&q.lane!==0&&(t.flags|=64,ot=i.effects,ot===null?i.effects=[q]:ot.push(q))}else bt={eventTime:bt,lane:ot,tag:q.tag,payload:q.payload,callback:q.callback,next:null},ct===null?(rt=ct=bt,Z=pt):ct=ct.next=bt,L|=ot;if(q=q.next,q===null){if(q=i.shared.pending,q===null)break;ot=q,q=ot.next,ot.next=null,i.lastBaseUpdate=ot,i.shared.pending=null}}while(!0);if(ct===null&&(Z=pt),i.baseState=Z,i.firstBaseUpdate=rt,i.lastBaseUpdate=ct,e=i.shared.interleaved,e!==null){i=e;do L|=i.lane,i=i.next;while(i!==e)}else u===null&&(i.shared.lanes=0);kn|=L,t.lanes=L,t.memoizedState=pt}}function fo(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(a(191,i));i.call(r)}}}var $n={},Te=sn($n),tr=sn($n),zn=sn($n);function Ve(t){if(t===$n)throw Error(a(174));return t}function Es(t,e){Nt(zn,e),Nt(tr,t),Nt(Te,$n),t=x(e),Mt(Te),Nt(Te,t)}function Bn(){Mt(Te),Mt(tr),Mt(zn)}function go(t){var e=Ve(zn.current),n=Ve(Te.current);e=_(n,t.type,e),n!==e&&(Nt(tr,t),Nt(Te,e))}function Rs(t){tr.current===t&&(Mt(Te),Mt(tr))}var Gt=sn(0);function Si(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||ja(n)||rs(n)))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&128)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ts=[];function Ns(){for(var t=0;t<Ts.length;t++){var e=Ts[t];st?e._workInProgressVersionPrimary=null:e._workInProgressVersionSecondary=null}Ts.length=0}var Ci=f.ReactCurrentDispatcher,Fs=f.ReactCurrentBatchConfig,Pn=0,Dt=null,Wt=null,Yt=null,wi=!1,er=!1,nr=0,rh=0;function ae(){throw Error(a(321))}function As(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!be(t[n],e[n]))return!1;return!0}function Ms(t,e,n,r,i,u){if(Pn=u,Dt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ci.current=t===null||t.memoizedState===null?oh:lh,t=n(r,i),er){u=0;do{if(er=!1,nr=0,25<=u)throw Error(a(301));u+=1,Yt=Wt=null,e.updateQueue=null,Ci.current=uh,t=n(r,i)}while(er)}if(Ci.current=ki,e=Wt!==null&&Wt.next!==null,Pn=0,Yt=Wt=Dt=null,wi=!1,e)throw Error(a(300));return t}function bs(){var t=nr!==0;return nr=0,t}function He(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Yt===null?Dt.memoizedState=Yt=t:Yt=Yt.next=t,Yt}function Ne(){if(Wt===null){var t=Dt.alternate;t=t!==null?t.memoizedState:null}else t=Wt.next;var e=Yt===null?Dt.memoizedState:Yt.next;if(e!==null)Yt=e,Wt=t;else{if(t===null)throw Error(a(310));Wt=t,t={memoizedState:Wt.memoizedState,baseState:Wt.baseState,baseQueue:Wt.baseQueue,queue:Wt.queue,next:null},Yt===null?Dt.memoizedState=Yt=t:Yt=Yt.next=t}return Yt}function rr(t,e){return typeof e=="function"?e(t):e}function Ls(t){var e=Ne(),n=e.queue;if(n===null)throw Error(a(311));n.lastRenderedReducer=t;var r=Wt,i=r.baseQueue,u=n.pending;if(u!==null){if(i!==null){var L=i.next;i.next=u.next,u.next=L}r.baseQueue=i=u,n.pending=null}if(i!==null){u=i.next,r=r.baseState;var q=L=null,Z=null,rt=u;do{var ct=rt.lane;if((Pn&ct)===ct)Z!==null&&(Z=Z.next={lane:0,action:rt.action,hasEagerState:rt.hasEagerState,eagerState:rt.eagerState,next:null}),r=rt.hasEagerState?rt.eagerState:t(r,rt.action);else{var pt={lane:ct,action:rt.action,hasEagerState:rt.hasEagerState,eagerState:rt.eagerState,next:null};Z===null?(q=Z=pt,L=r):Z=Z.next=pt,Dt.lanes|=ct,kn|=ct}rt=rt.next}while(rt!==null&&rt!==u);Z===null?L=r:Z.next=q,be(r,e.memoizedState)||(fe=!0),e.memoizedState=r,e.baseState=L,e.baseQueue=Z,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do u=i.lane,Dt.lanes|=u,kn|=u,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Is(t){var e=Ne(),n=e.queue;if(n===null)throw Error(a(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,u=e.memoizedState;if(i!==null){n.pending=null;var L=i=i.next;do u=t(u,L.action),L=L.next;while(L!==i);be(u,e.memoizedState)||(fe=!0),e.memoizedState=u,e.baseQueue===null&&(e.baseState=u),n.lastRenderedState=u}return[u,r]}function po(){}function mo(t,e){var n=Dt,r=Ne(),i=e(),u=!be(r.memoizedState,i);if(u&&(r.memoizedState=i,fe=!0),r=r.queue,Os(_o.bind(null,n,r,t),[t]),r.getSnapshot!==e||u||Yt!==null&&Yt.memoizedState.tag&1){if(n.flags|=2048,ir(9,vo.bind(null,n,r,i,e),void 0,null),Xt===null)throw Error(a(349));(Pn&30)!==0||yo(n,e,i)}return i}function yo(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Dt.updateQueue,e===null?(e={lastEffect:null,stores:null},Dt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function vo(t,e,n,r){e.value=n,e.getSnapshot=r,So(e)&&Co(t)}function _o(t,e,n){return n(function(){So(e)&&Co(t)})}function So(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!be(t,n)}catch{return!0}}function Co(t){var e=Be(t,1);e!==null&&Fe(e,t,1,-1)}function wo(t){var e=He();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:rr,lastRenderedState:t},e.queue=t,t=t.dispatch=ah.bind(null,Dt,t),[e.memoizedState,t]}function ir(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Dt.updateQueue,e===null?(e={lastEffect:null,stores:null},Dt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function xo(){return Ne().memoizedState}function xi(t,e,n,r){var i=He();Dt.flags|=t,i.memoizedState=ir(1|e,n,void 0,r===void 0?null:r)}function Pi(t,e,n,r){var i=Ne();r=r===void 0?null:r;var u=void 0;if(Wt!==null){var L=Wt.memoizedState;if(u=L.destroy,r!==null&&As(r,L.deps)){i.memoizedState=ir(e,n,u,r);return}}Dt.flags|=t,i.memoizedState=ir(1|e,n,u,r)}function Po(t,e){return xi(8390656,8,t,e)}function Os(t,e){return Pi(2048,8,t,e)}function ko(t,e){return Pi(4,2,t,e)}function Eo(t,e){return Pi(4,4,t,e)}function Ro(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function To(t,e,n){return n=n!=null?n.concat([t]):null,Pi(4,4,Ro.bind(null,e,t),n)}function Gs(){}function No(t,e){var n=Ne();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&As(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Fo(t,e){var n=Ne();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&As(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Ao(t,e,n){return(Pn&21)===0?(t.baseState&&(t.baseState=!1,fe=!0),t.memoizedState=n):(be(n,e)||(n=Qa(),Dt.lanes|=n,kn|=n,t.baseState=!0),e)}function ih(t,e){var n=wt;wt=n!==0&&4>n?n:4,t(!0);var r=Fs.transition;Fs.transition={};try{t(!1),e()}finally{wt=n,Fs.transition=r}}function Mo(){return Ne().memoizedState}function sh(t,e,n){var r=hn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},bo(t))Lo(e,n);else if(n=uo(t,e,n,r),n!==null){var i=ue();Fe(n,t,r,i),Io(n,e,r)}}function ah(t,e,n){var r=hn(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(bo(t))Lo(e,i);else{var u=t.alternate;if(t.lanes===0&&(u===null||u.lanes===0)&&(u=e.lastRenderedReducer,u!==null))try{var L=e.lastRenderedState,q=u(L,n);if(i.hasEagerState=!0,i.eagerState=q,be(q,L)){var Z=e.interleaved;Z===null?(i.next=i,Ps(e)):(i.next=Z.next,Z.next=i),e.interleaved=i;return}}catch{}finally{}n=uo(t,e,i,r),n!==null&&(i=ue(),Fe(n,t,r,i),Io(n,e,r))}}function bo(t){var e=t.alternate;return t===Dt||e!==null&&e===Dt}function Lo(t,e){er=wi=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Io(t,e,n){if((n&4194240)!==0){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,cs(t,n)}}var ki={readContext:Re,useCallback:ae,useContext:ae,useEffect:ae,useImperativeHandle:ae,useInsertionEffect:ae,useLayoutEffect:ae,useMemo:ae,useReducer:ae,useRef:ae,useState:ae,useDebugValue:ae,useDeferredValue:ae,useTransition:ae,useMutableSource:ae,useSyncExternalStore:ae,useId:ae,unstable_isNewReconciler:!1},oh={readContext:Re,useCallback:function(t,e){return He().memoizedState=[t,e===void 0?null:e],t},useContext:Re,useEffect:Po,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,xi(4194308,4,Ro.bind(null,e,t),n)},useLayoutEffect:function(t,e){return xi(4194308,4,t,e)},useInsertionEffect:function(t,e){return xi(4,2,t,e)},useMemo:function(t,e){var n=He();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=He();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=sh.bind(null,Dt,t),[r.memoizedState,t]},useRef:function(t){var e=He();return t={current:t},e.memoizedState=t},useState:wo,useDebugValue:Gs,useDeferredValue:function(t){return He().memoizedState=t},useTransition:function(){var t=wo(!1),e=t[0];return t=ih.bind(null,t[1]),He().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Dt,i=He();if(Lt){if(n===void 0)throw Error(a(407));n=n()}else{if(n=e(),Xt===null)throw Error(a(349));(Pn&30)!==0||yo(r,e,n)}i.memoizedState=n;var u={value:n,getSnapshot:e};return i.queue=u,Po(_o.bind(null,r,u,t),[t]),r.flags|=2048,ir(9,vo.bind(null,r,u,n,e),void 0,null),n},useId:function(){var t=He(),e=Xt.identifierPrefix;if(Lt){var n=Qe,r=Xe;n=(r&~(1<<32-Me(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=nr++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=rh++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},lh={readContext:Re,useCallback:No,useContext:Re,useEffect:Os,useImperativeHandle:To,useInsertionEffect:ko,useLayoutEffect:Eo,useMemo:Fo,useReducer:Ls,useRef:xo,useState:function(){return Ls(rr)},useDebugValue:Gs,useDeferredValue:function(t){var e=Ne();return Ao(e,Wt.memoizedState,t)},useTransition:function(){var t=Ls(rr)[0],e=Ne().memoizedState;return[t,e]},useMutableSource:po,useSyncExternalStore:mo,useId:Mo,unstable_isNewReconciler:!1},uh={readContext:Re,useCallback:No,useContext:Re,useEffect:Os,useImperativeHandle:To,useInsertionEffect:ko,useLayoutEffect:Eo,useMemo:Fo,useReducer:Is,useRef:xo,useState:function(){return Is(rr)},useDebugValue:Gs,useDeferredValue:function(t){var e=Ne();return Wt===null?e.memoizedState=t:Ao(e,Wt.memoizedState,t)},useTransition:function(){var t=Is(rr)[0],e=Ne().memoizedState;return[t,e]},useMutableSource:po,useSyncExternalStore:mo,useId:Mo,unstable_isNewReconciler:!1};function Ie(t,e){if(t&&t.defaultProps){e=S({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Ds(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:S({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ei={isMounted:function(t){return(t=t._reactInternals)?T(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ue(),i=hn(t),u=Je(r,i);u.payload=e,n!=null&&(u.callback=n),e=ln(t,u,i),e!==null&&(Fe(e,t,i,r),vi(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ue(),i=hn(t),u=Je(r,i);u.tag=1,u.payload=e,n!=null&&(u.callback=n),e=ln(t,u,i),e!==null&&(Fe(e,t,i,r),vi(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ue(),r=hn(t),i=Je(n,r);i.tag=2,e!=null&&(i.callback=e),e=ln(t,i,r),e!==null&&(Fe(e,t,r,n),vi(e,t,r))}};function Oo(t,e,n,r,i,u,L){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,u,L):e.prototype&&e.prototype.isPureReactComponent?!gi(n,r)||!gi(i,u):!0}function Go(t,e,n){var r=!1,i=an,u=e.contextType;return typeof u=="object"&&u!==null?u=Re(u):(i=de(e)?Sn:se.current,r=e.contextTypes,u=(r=r!=null)?bn(t,i):an),e=new e(n,u),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ei,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=u),e}function Do(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ei.enqueueReplaceState(e,e.state,null)}function Us(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},ks(t);var u=e.contextType;typeof u=="object"&&u!==null?i.context=Re(u):(u=de(e)?Sn:se.current,i.context=bn(t,u)),i.state=t.memoizedState,u=e.getDerivedStateFromProps,typeof u=="function"&&(Ds(t,e,u,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Ei.enqueueReplaceState(i,i.state,null),_i(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Vn(t,e){try{var n="",r=e;do n+=nh(r),r=r.return;while(r);var i=n}catch(u){i=`
Error generating stack: `+u.message+`
`+u.stack}return{value:t,source:e,stack:i,digest:null}}function zs(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Bs(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var ch=typeof WeakMap=="function"?WeakMap:Map;function Uo(t,e,n){n=Je(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){zi||(zi=!0,oa=r),Bs(t,e)},n}function zo(t,e,n){n=Je(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Bs(t,e)}}var u=t.stateNode;return u!==null&&typeof u.componentDidCatch=="function"&&(n.callback=function(){Bs(t,e),typeof r!="function"&&(un===null?un=new Set([this]):un.add(this));var L=e.stack;this.componentDidCatch(e.value,{componentStack:L!==null?L:""})}),n}function Bo(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new ch;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Ph.bind(null,t,e,n),e.then(t,t))}function Vo(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Ho(t,e,n,r,i){return(t.mode&1)===0?(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Je(-1,1),e.tag=2,ln(n,e,1))),n.lanes|=1),t):(t.flags|=65536,t.lanes=i,t)}var hh=f.ReactCurrentOwner,fe=!1;function ce(t,e,n,r){e.child=t===null?oo(e,null,n,r):Gn(e,t.child,n,r)}function Wo(t,e,n,r,i){n=n.render;var u=e.ref;return Un(e,i),r=Ms(t,e,n,r,u,i),n=bs(),t!==null&&!fe?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ze(t,e,i)):(Lt&&n&&ps(e),e.flags|=1,ce(t,e,r,i),e.child)}function qo(t,e,n,r,i){if(t===null){var u=n.type;return typeof u=="function"&&!fa(u)&&u.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=u,jo(t,e,u,r,i)):(t=ji(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(u=t.child,(t.lanes&i)===0){var L=u.memoizedProps;if(n=n.compare,n=n!==null?n:gi,n(L,r)&&t.ref===e.ref)return Ze(t,e,i)}return e.flags|=1,t=fn(u,r),t.ref=e.ref,t.return=e,e.child=t}function jo(t,e,n,r,i){if(t!==null){var u=t.memoizedProps;if(gi(u,r)&&t.ref===e.ref)if(fe=!1,e.pendingProps=r=u,(t.lanes&i)!==0)(t.flags&131072)!==0&&(fe=!0);else return e.lanes=t.lanes,Ze(t,e,i)}return Vs(t,e,n,r,i)}function Ko(t,e,n){var r=e.pendingProps,i=r.children,u=t!==null?t.memoizedState:null;if(r.mode==="hidden")if((e.mode&1)===0)e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Nt(Wn,we),we|=n;else{if((n&1073741824)===0)return t=u!==null?u.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Nt(Wn,we),we|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=u!==null?u.baseLanes:n,Nt(Wn,we),we|=r}else u!==null?(r=u.baseLanes|n,e.memoizedState=null):r=n,Nt(Wn,we),we|=r;return ce(t,e,i,n),e.child}function Yo(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Vs(t,e,n,r,i){var u=de(n)?Sn:se.current;return u=bn(e,u),Un(e,i),n=Ms(t,e,n,r,u,i),r=bs(),t!==null&&!fe?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ze(t,e,i)):(Lt&&r&&ps(e),e.flags|=1,ce(t,e,n,i),e.child)}function Xo(t,e,n,r,i){if(de(n)){var u=!0;si(e)}else u=!1;if(Un(e,i),e.stateNode===null)Ti(t,e),Go(e,n,r),Us(e,n,r,i),r=!0;else if(t===null){var L=e.stateNode,q=e.memoizedProps;L.props=q;var Z=L.context,rt=n.contextType;typeof rt=="object"&&rt!==null?rt=Re(rt):(rt=de(n)?Sn:se.current,rt=bn(e,rt));var ct=n.getDerivedStateFromProps,pt=typeof ct=="function"||typeof L.getSnapshotBeforeUpdate=="function";pt||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(q!==r||Z!==rt)&&Do(e,L,r,rt),on=!1;var ot=e.memoizedState;L.state=ot,_i(e,r,L,i),Z=e.memoizedState,q!==r||ot!==Z||he.current||on?(typeof ct=="function"&&(Ds(e,n,ct,r),Z=e.memoizedState),(q=on||Oo(e,n,q,r,ot,Z,rt))?(pt||typeof L.UNSAFE_componentWillMount!="function"&&typeof L.componentWillMount!="function"||(typeof L.componentWillMount=="function"&&L.componentWillMount(),typeof L.UNSAFE_componentWillMount=="function"&&L.UNSAFE_componentWillMount()),typeof L.componentDidMount=="function"&&(e.flags|=4194308)):(typeof L.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=Z),L.props=r,L.state=Z,L.context=rt,r=q):(typeof L.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{L=e.stateNode,co(t,e),q=e.memoizedProps,rt=e.type===e.elementType?q:Ie(e.type,q),L.props=rt,pt=e.pendingProps,ot=L.context,Z=n.contextType,typeof Z=="object"&&Z!==null?Z=Re(Z):(Z=de(n)?Sn:se.current,Z=bn(e,Z));var bt=n.getDerivedStateFromProps;(ct=typeof bt=="function"||typeof L.getSnapshotBeforeUpdate=="function")||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(q!==pt||ot!==Z)&&Do(e,L,r,Z),on=!1,ot=e.memoizedState,L.state=ot,_i(e,r,L,i);var Rt=e.memoizedState;q!==pt||ot!==Rt||he.current||on?(typeof bt=="function"&&(Ds(e,n,bt,r),Rt=e.memoizedState),(rt=on||Oo(e,n,rt,r,ot,Rt,Z)||!1)?(ct||typeof L.UNSAFE_componentWillUpdate!="function"&&typeof L.componentWillUpdate!="function"||(typeof L.componentWillUpdate=="function"&&L.componentWillUpdate(r,Rt,Z),typeof L.UNSAFE_componentWillUpdate=="function"&&L.UNSAFE_componentWillUpdate(r,Rt,Z)),typeof L.componentDidUpdate=="function"&&(e.flags|=4),typeof L.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof L.componentDidUpdate!="function"||q===t.memoizedProps&&ot===t.memoizedState||(e.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||q===t.memoizedProps&&ot===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=Rt),L.props=r,L.state=Rt,L.context=Z,r=rt):(typeof L.componentDidUpdate!="function"||q===t.memoizedProps&&ot===t.memoizedState||(e.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||q===t.memoizedProps&&ot===t.memoizedState||(e.flags|=1024),r=!1)}return Hs(t,e,n,r,u,i)}function Hs(t,e,n,r,i,u){Yo(t,e);var L=(e.flags&128)!==0;if(!r&&!L)return i&&Xa(e,n,!1),Ze(t,e,u);r=e.stateNode,hh.current=e;var q=L&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&L?(e.child=Gn(e,t.child,null,u),e.child=Gn(e,null,q,u)):ce(t,e,q,u),e.memoizedState=r.state,i&&Xa(e,n,!0),e.child}function Qo(t){var e=t.stateNode;e.pendingContext?Ka(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ka(t,e.context,!1),Es(t,e.containerInfo)}function Jo(t,e,n,r,i){return On(),_s(i),e.flags|=256,ce(t,e,n,r),e.child}var Ws={dehydrated:null,treeContext:null,retryLane:0};function qs(t){return{baseLanes:t,cachePool:null,transitions:null}}function Zo(t,e,n){var r=e.pendingProps,i=Gt.current,u=!1,L=(e.flags&128)!==0,q;if((q=L)||(q=t!==null&&t.memoizedState===null?!1:(i&2)!==0),q?(u=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Nt(Gt,i&1),t===null)return vs(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((e.mode&1)===0?e.lanes=1:rs(t)?e.lanes=8:e.lanes=1073741824,null):(L=r.children,t=r.fallback,u?(r=e.mode,u=e.child,L={mode:"hidden",children:L},(r&1)===0&&u!==null?(u.childLanes=0,u.pendingProps=L):u=Ki(L,r,0,null),t=Nn(t,r,n,null),u.return=e,t.return=e,u.sibling=t,e.child=u,e.child.memoizedState=qs(n),e.memoizedState=Ws,t):js(e,L));if(i=t.memoizedState,i!==null&&(q=i.dehydrated,q!==null))return dh(t,e,L,r,q,i,n);if(u){u=r.fallback,L=e.mode,i=t.child,q=i.sibling;var Z={mode:"hidden",children:r.children};return(L&1)===0&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=Z,e.deletions=null):(r=fn(i,Z),r.subtreeFlags=i.subtreeFlags&14680064),q!==null?u=fn(q,u):(u=Nn(u,L,n,null),u.flags|=2),u.return=e,r.return=e,r.sibling=u,e.child=r,r=u,u=e.child,L=t.child.memoizedState,L=L===null?qs(n):{baseLanes:L.baseLanes|n,cachePool:null,transitions:L.transitions},u.memoizedState=L,u.childLanes=t.childLanes&~n,e.memoizedState=Ws,r}return u=t.child,t=u.sibling,r=fn(u,{mode:"visible",children:r.children}),(e.mode&1)===0&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function js(t,e){return e=Ki({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ri(t,e,n,r){return r!==null&&_s(r),Gn(e,t.child,null,n),t=js(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function dh(t,e,n,r,i,u,L){if(n)return e.flags&256?(e.flags&=-257,r=zs(Error(a(422))),Ri(t,e,L,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(u=r.fallback,i=e.mode,r=Ki({mode:"visible",children:r.children},i,0,null),u=Nn(u,i,L,null),u.flags|=2,r.return=e,u.return=e,r.sibling=u,e.child=r,(e.mode&1)!==0&&Gn(e,t.child,null,L),e.child.memoizedState=qs(L),e.memoizedState=Ws,u);if((e.mode&1)===0)return Ri(t,e,L,null);if(rs(i))return r=kc(i).digest,u=Error(a(419)),r=zs(u,r,void 0),Ri(t,e,L,r);if(n=(L&t.childLanes)!==0,fe||n){if(r=Xt,r!==null){switch(L&-L){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=(i&(r.suspendedLanes|L))!==0?0:i,i!==0&&i!==u.retryLane&&(u.retryLane=i,Be(t,i),Fe(r,t,i,-1))}return da(),r=zs(Error(a(421))),Ri(t,e,L,r)}return ja(i)?(e.flags|=128,e.child=t.child,e=kh.bind(null,t),Ec(i,e),null):(t=u.treeContext,ht&&(Ee=Nc(i),Ce=e,Lt=!0,Le=null,Jn=!1,t!==null&&(Pe[ke++]=Xe,Pe[ke++]=Qe,Pe[ke++]=Cn,Xe=t.id,Qe=t.overflow,Cn=e)),e=js(e,r.children),e.flags|=4096,e)}function $o(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),xs(t.return,e,n)}function Ks(t,e,n,r,i){var u=t.memoizedState;u===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(u.isBackwards=e,u.rendering=null,u.renderingStartTime=0,u.last=r,u.tail=n,u.tailMode=i)}function tl(t,e,n){var r=e.pendingProps,i=r.revealOrder,u=r.tail;if(ce(t,e,r.children,n),r=Gt.current,(r&2)!==0)r=r&1|2,e.flags|=128;else{if(t!==null&&(t.flags&128)!==0)t:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&$o(t,n,e);else if(t.tag===19)$o(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;t.sibling===null;){if(t.return===null||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Nt(Gt,r),(e.mode&1)===0)e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Si(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Ks(e,!1,i,n,u);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Si(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Ks(e,!0,n,null,u);break;case"together":Ks(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ti(t,e){(e.mode&1)===0&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ze(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),kn|=e.lanes,(n&e.childLanes)===0)return null;if(t!==null&&e.child!==t.child)throw Error(a(153));if(e.child!==null){for(t=e.child,n=fn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=fn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function fh(t,e,n){switch(e.tag){case 3:Qo(e),On();break;case 5:go(e);break;case 1:de(e.type)&&si(e);break;case 4:Es(e,e.stateNode.containerInfo);break;case 10:lo(e,e.type._context,e.memoizedProps.value);break;case 13:var r=e.memoizedState;if(r!==null)return r.dehydrated!==null?(Nt(Gt,Gt.current&1),e.flags|=128,null):(n&e.child.childLanes)!==0?Zo(t,e,n):(Nt(Gt,Gt.current&1),t=Ze(t,e,n),t!==null?t.sibling:null);Nt(Gt,Gt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,(t.flags&128)!==0){if(r)return tl(t,e,n);e.flags|=128}var i=e.memoizedState;if(i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Nt(Gt,Gt.current),r)break;return null;case 22:case 23:return e.lanes=0,Ko(t,e,n)}return Ze(t,e,n)}function We(t){t.flags|=4}function el(t,e){if(t!==null&&t.child===e.child)return!0;if((e.flags&16)!==0)return!1;for(t=e.child;t!==null;){if((t.flags&12854)!==0||(t.subtreeFlags&12854)!==0)return!1;t=t.sibling}return!0}var sr,ar,Ni,Fi;if(at)sr=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)K(t,n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},ar=function(){},Ni=function(t,e,n,r,i){if(t=t.memoizedProps,t!==r){var u=e.stateNode,L=Ve(Te.current);n=tt(u,n,t,r,i,L),(e.updateQueue=n)&&We(e)}},Fi=function(t,e,n,r){n!==r&&We(e)};else if(ft){sr=function(t,e,n,r){for(var i=e.child;i!==null;){if(i.tag===5){var u=i.stateNode;n&&r&&(u=Wa(u,i.type,i.memoizedProps,i)),K(t,u)}else if(i.tag===6)u=i.stateNode,n&&r&&(u=qa(u,i.memoizedProps,i)),K(t,u);else if(i.tag!==4){if(i.tag===22&&i.memoizedState!==null)u=i.child,u!==null&&(u.return=i),sr(t,i,!0,!0);else if(i.child!==null){i.child.return=i,i=i.child;continue}}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};var nl=function(t,e,n,r){for(var i=e.child;i!==null;){if(i.tag===5){var u=i.stateNode;n&&r&&(u=Wa(u,i.type,i.memoizedProps,i)),Ha(t,u)}else if(i.tag===6)u=i.stateNode,n&&r&&(u=qa(u,i.memoizedProps,i)),Ha(t,u);else if(i.tag!==4){if(i.tag===22&&i.memoizedState!==null)u=i.child,u!==null&&(u.return=i),nl(t,i,!0,!0);else if(i.child!==null){i.child.return=i,i=i.child;continue}}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};ar=function(t,e){var n=e.stateNode;if(!el(t,e)){t=n.containerInfo;var r=Va(t);nl(r,e,!1,!1),n.pendingChildren=r,We(e),Cc(t,r)}},Ni=function(t,e,n,r,i){var u=t.stateNode,L=t.memoizedProps;if((t=el(t,e))&&L===r)e.stateNode=u;else{var q=e.stateNode,Z=Ve(Te.current),rt=null;L!==r&&(rt=tt(q,n,L,r,i,Z)),t&&rt===null?e.stateNode=u:(u=Sc(u,rt,n,L,r,e,t,q),H(u,n,r,i,Z)&&We(e),e.stateNode=u,t?We(e):sr(u,e,!1,!1))}},Fi=function(t,e,n,r){n!==r?(t=Ve(zn.current),n=Ve(Te.current),e.stateNode=X(r,t,n,e),We(e)):e.stateNode=t.stateNode}}else ar=function(){},Ni=function(){},Fi=function(){};function or(t,e){if(!Lt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function oe(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function gh(t,e,n){var r=e.pendingProps;switch(ms(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return oe(e),null;case 1:return de(e.type)&&ii(),oe(e),null;case 3:return n=e.stateNode,Bn(),Mt(he),Mt(se),Ns(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(fi(e)?We(e):t===null||t.memoizedState.isDehydrated&&(e.flags&256)===0||(e.flags|=1024,Le!==null&&(ca(Le),Le=null))),ar(t,e),oe(e),null;case 5:Rs(e),n=Ve(zn.current);var i=e.type;if(t!==null&&e.stateNode!=null)Ni(t,e,i,r,n),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(a(166));return oe(e),null}if(t=Ve(Te.current),fi(e)){if(!ht)throw Error(a(175));t=Fc(e.stateNode,e.type,e.memoizedProps,n,t,e,!Jn),e.updateQueue=t,t!==null&&We(e)}else{var u=G(i,r,n,t,e);sr(u,e,!1,!1),e.stateNode=u,H(u,i,r,n,t)&&We(e)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return oe(e),null;case 6:if(t&&e.stateNode!=null)Fi(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(a(166));if(t=Ve(zn.current),n=Ve(Te.current),fi(e)){if(!ht)throw Error(a(176));if(t=e.stateNode,n=e.memoizedProps,(r=Ac(t,n,e,!Jn))&&(i=Ce,i!==null))switch(i.tag){case 3:Uc(i.stateNode.containerInfo,t,n,(i.mode&1)!==0);break;case 5:zc(i.type,i.memoizedProps,i.stateNode,t,n,(i.mode&1)!==0)}r&&We(e)}else e.stateNode=X(r,t,n,e)}return oe(e),null;case 13:if(Mt(Gt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Lt&&Ee!==null&&(e.mode&1)!==0&&(e.flags&128)===0)io(),On(),e.flags|=98560,i=!1;else if(i=fi(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(a(318));if(!ht)throw Error(a(344));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(a(317));Mc(i,e)}else On(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;oe(e),i=!1}else Le!==null&&(ca(Le),Le=null),i=!0;if(!i)return e.flags&65536?e:null}return(e.flags&128)!==0?(e.lanes=n,e):(n=r!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,(e.mode&1)!==0&&(t===null||(Gt.current&1)!==0?qt===0&&(qt=3):da())),e.updateQueue!==null&&(e.flags|=4),oe(e),null);case 4:return Bn(),ar(t,e),t===null&&gt(e.stateNode.containerInfo),oe(e),null;case 10:return ws(e.type._context),oe(e),null;case 17:return de(e.type)&&ii(),oe(e),null;case 19:if(Mt(Gt),i=e.memoizedState,i===null)return oe(e),null;if(r=(e.flags&128)!==0,u=i.rendering,u===null)if(r)or(i,!1);else{if(qt!==0||t!==null&&(t.flags&128)!==0)for(t=e.child;t!==null;){if(u=Si(t),u!==null){for(e.flags|=128,or(i,!1),t=u.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),e.subtreeFlags=0,t=n,n=e.child;n!==null;)r=n,i=t,r.flags&=14680066,u=r.alternate,u===null?(r.childLanes=0,r.lanes=i,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=u.childLanes,r.lanes=u.lanes,r.child=u.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=u.memoizedProps,r.memoizedState=u.memoizedState,r.updateQueue=u.updateQueue,r.type=u.type,i=u.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n=n.sibling;return Nt(Gt,Gt.current&1|2),e.child}t=t.sibling}i.tail!==null&&Kt()>aa&&(e.flags|=128,r=!0,or(i,!1),e.lanes=4194304)}else{if(!r)if(t=Si(u),t!==null){if(e.flags|=128,r=!0,t=t.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),or(i,!0),i.tail===null&&i.tailMode==="hidden"&&!u.alternate&&!Lt)return oe(e),null}else 2*Kt()-i.renderingStartTime>aa&&n!==1073741824&&(e.flags|=128,r=!0,or(i,!1),e.lanes=4194304);i.isBackwards?(u.sibling=e.child,e.child=u):(t=i.last,t!==null?t.sibling=u:e.child=u,i.last=u)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Kt(),e.sibling=null,t=Gt.current,Nt(Gt,r?t&1|2:t&1),e):(oe(e),null);case 22:case 23:return ha(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&(e.mode&1)!==0?(we&1073741824)!==0&&(oe(e),at&&e.subtreeFlags&6&&(e.flags|=8192)):oe(e),null;case 24:return null;case 25:return null}throw Error(a(156,e.tag))}function ph(t,e){switch(ms(e),e.tag){case 1:return de(e.type)&&ii(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Bn(),Mt(he),Mt(se),Ns(),t=e.flags,(t&65536)!==0&&(t&128)===0?(e.flags=t&-65537|128,e):null;case 5:return Rs(e),null;case 13:if(Mt(Gt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(a(340));On()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Mt(Gt),null;case 4:return Bn(),null;case 10:return ws(e.type._context),null;case 22:case 23:return ha(),null;case 24:return null;default:return null}}var Ai=!1,le=!1,mh=typeof WeakSet=="function"?WeakSet:Set,ut=null;function Hn(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){It(t,e,r)}else n.current=null}function Ys(t,e,n){try{n()}catch(r){It(t,e,r)}}var rl=!1;function yh(t,e){for(F(t.containerInfo),ut=e;ut!==null;)if(t=ut,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ut=e;else for(;ut!==null;){t=ut;try{var n=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(n!==null){var r=n.memoizedProps,i=n.memoizedState,u=t.stateNode,L=u.getSnapshotBeforeUpdate(t.elementType===t.type?r:Ie(t.type,r),i);u.__reactInternalSnapshotBeforeUpdate=L}break;case 3:at&&_c(t.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}catch(q){It(t,t.return,q)}if(e=t.sibling,e!==null){e.return=t.return,ut=e;break}ut=t.return}return n=rl,rl=!1,n}function lr(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var u=i.destroy;i.destroy=void 0,u!==void 0&&Ys(e,n,u)}i=i.next}while(i!==r)}}function Mi(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Xs(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=et(n);break;default:t=n}typeof e=="function"?e(t):e.current=t}}function il(t){var e=t.alternate;e!==null&&(t.alternate=null,il(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&Et(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function sl(t){return t.tag===5||t.tag===3||t.tag===4}function al(t){t:for(;;){for(;t.sibling===null;){if(t.return===null||sl(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue t;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Qs(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?An(n,t,e):xe(n,t);else if(r!==4&&(t=t.child,t!==null))for(Qs(t,e,n),t=t.sibling;t!==null;)Qs(t,e,n),t=t.sibling}function Js(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?ni(n,t,e):Se(n,t);else if(r!==4&&(t=t.child,t!==null))for(Js(t,e,n),t=t.sibling;t!==null;)Js(t,e,n),t=t.sibling}var $t=null,Oe=!1;function qe(t,e,n){for(n=n.child;n!==null;)Zs(t,e,n),n=n.sibling}function Zs(t,e,n){if(Ue&&typeof Ue.onCommitFiberUnmount=="function")try{Ue.onCommitFiberUnmount(ui,n)}catch{}switch(n.tag){case 5:le||Hn(n,e);case 6:if(at){var r=$t,i=Oe;$t=null,qe(t,e,n),$t=r,Oe=i,$t!==null&&(Oe?es($t,n.stateNode):ts($t,n.stateNode))}else qe(t,e,n);break;case 18:at&&$t!==null&&(Oe?Gc($t,n.stateNode):Oc($t,n.stateNode));break;case 4:at?(r=$t,i=Oe,$t=n.stateNode.containerInfo,Oe=!0,qe(t,e,n),$t=r,Oe=i):(ft&&(r=n.stateNode.containerInfo,i=Va(r),ns(r,i)),qe(t,e,n));break;case 0:case 11:case 14:case 15:if(!le&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var u=i,L=u.destroy;u=u.tag,L!==void 0&&((u&2)!==0||(u&4)!==0)&&Ys(n,e,L),i=i.next}while(i!==r)}qe(t,e,n);break;case 1:if(!le&&(Hn(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(q){It(n,e,q)}qe(t,e,n);break;case 21:qe(t,e,n);break;case 22:n.mode&1?(le=(r=le)||n.memoizedState!==null,qe(t,e,n),le=r):qe(t,e,n);break;default:qe(t,e,n)}}function ol(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new mh),e.forEach(function(r){var i=Eh.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Ge(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var u=t,L=e;if(at){var q=L;t:for(;q!==null;){switch(q.tag){case 5:$t=q.stateNode,Oe=!1;break t;case 3:$t=q.stateNode.containerInfo,Oe=!0;break t;case 4:$t=q.stateNode.containerInfo,Oe=!0;break t}q=q.return}if($t===null)throw Error(a(160));Zs(u,L,i),$t=null,Oe=!1}else Zs(u,L,i);var Z=i.alternate;Z!==null&&(Z.return=null),i.return=null}catch(rt){It(i,e,rt)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ll(e,t),e=e.sibling}function ll(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ge(e,t),je(t),r&4){try{lr(3,t,t.return),Mi(3,t)}catch(ot){It(t,t.return,ot)}try{lr(5,t,t.return)}catch(ot){It(t,t.return,ot)}}break;case 1:Ge(e,t),je(t),r&512&&n!==null&&Hn(n,n.return);break;case 5:if(Ge(e,t),je(t),r&512&&n!==null&&Hn(n,n.return),at){if(t.flags&32){var i=t.stateNode;try{Ba(i)}catch(ot){It(t,t.return,ot)}}if(r&4&&(i=t.stateNode,i!=null)){var u=t.memoizedProps;if(n=n!==null?n.memoizedProps:u,r=t.type,e=t.updateQueue,t.updateQueue=null,e!==null)try{_n(i,e,r,n,u,t)}catch(ot){It(t,t.return,ot)}}}break;case 6:if(Ge(e,t),je(t),r&4&&at){if(t.stateNode===null)throw Error(a(162));i=t.stateNode,u=t.memoizedProps,n=n!==null?n.memoizedProps:u;try{re(i,n,u)}catch(ot){It(t,t.return,ot)}}break;case 3:if(Ge(e,t),je(t),r&4){if(at&&ht&&n!==null&&n.memoizedState.isDehydrated)try{Lc(e.containerInfo)}catch(ot){It(t,t.return,ot)}if(ft){i=e.containerInfo,u=e.pendingChildren;try{ns(i,u)}catch(ot){It(t,t.return,ot)}}}break;case 4:if(Ge(e,t),je(t),r&4&&ft){u=t.stateNode,i=u.containerInfo,u=u.pendingChildren;try{ns(i,u)}catch(ot){It(t,t.return,ot)}}break;case 13:Ge(e,t),je(t),i=t.child,i.flags&8192&&(u=i.memoizedState!==null,i.stateNode.isHidden=u,!u||i.alternate!==null&&i.alternate.memoizedState!==null||(sa=Kt())),r&4&&ol(t);break;case 22:var L=n!==null&&n.memoizedState!==null;if(t.mode&1?(le=(n=le)||L,Ge(e,t),le=n):Ge(e,t),je(t),r&8192){if(n=t.memoizedState!==null,(t.stateNode.isHidden=n)&&!L&&(t.mode&1)!==0)for(ut=t,r=t.child;r!==null;){for(e=ut=r;ut!==null;){L=ut;var q=L.child;switch(L.tag){case 0:case 11:case 14:case 15:lr(4,L,L.return);break;case 1:Hn(L,L.return);var Z=L.stateNode;if(typeof Z.componentWillUnmount=="function"){var rt=L,ct=L.return;try{var pt=rt;Z.props=pt.memoizedProps,Z.state=pt.memoizedState,Z.componentWillUnmount()}catch(ot){It(rt,ct,ot)}}break;case 5:Hn(L,L.return);break;case 22:if(L.memoizedState!==null){hl(e);continue}}q!==null?(q.return=L,ut=q):hl(e)}r=r.sibling}if(at){t:if(r=null,at)for(e=t;;){if(e.tag===5){if(r===null){r=e;try{i=e.stateNode,n?pc(i):yc(e.stateNode,e.memoizedProps)}catch(ot){It(t,t.return,ot)}}}else if(e.tag===6){if(r===null)try{u=e.stateNode,n?mc(u):vc(u,e.memoizedProps)}catch(ot){It(t,t.return,ot)}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break t;for(;e.sibling===null;){if(e.return===null||e.return===t)break t;r===e&&(r=null),e=e.return}r===e&&(r=null),e.sibling.return=e.return,e=e.sibling}}}break;case 19:Ge(e,t),je(t),r&4&&ol(t);break;case 21:break;default:Ge(e,t),je(t)}}function je(t){var e=t.flags;if(e&2){try{if(at){t:{for(var n=t.return;n!==null;){if(sl(n)){var r=n;break t}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ba(i),r.flags&=-33);var u=al(t);Js(t,u,i);break;case 3:case 4:var L=r.stateNode.containerInfo,q=al(t);Qs(t,q,L);break;default:throw Error(a(161))}}}catch(Z){It(t,t.return,Z)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function vh(t,e,n){ut=t,ul(t)}function ul(t,e,n){for(var r=(t.mode&1)!==0;ut!==null;){var i=ut,u=i.child;if(i.tag===22&&r){var L=i.memoizedState!==null||Ai;if(!L){var q=i.alternate,Z=q!==null&&q.memoizedState!==null||le;q=Ai;var rt=le;if(Ai=L,(le=Z)&&!rt)for(ut=i;ut!==null;)L=ut,Z=L.child,L.tag===22&&L.memoizedState!==null?dl(i):Z!==null?(Z.return=L,ut=Z):dl(i);for(;u!==null;)ut=u,ul(u),u=u.sibling;ut=i,Ai=q,le=rt}cl(t)}else(i.subtreeFlags&8772)!==0&&u!==null?(u.return=i,ut=u):cl(t)}}function cl(t){for(;ut!==null;){var e=ut;if((e.flags&8772)!==0){var n=e.alternate;try{if((e.flags&8772)!==0)switch(e.tag){case 0:case 11:case 15:le||Mi(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!le)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Ie(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var u=e.updateQueue;u!==null&&fo(e,u,r);break;case 3:var L=e.updateQueue;if(L!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=et(e.child.stateNode);break;case 1:n=e.child.stateNode}fo(e,L,n)}break;case 5:var q=e.stateNode;n===null&&e.flags&4&&ie(q,e.type,e.memoizedProps,e);break;case 6:break;case 4:break;case 12:break;case 13:if(ht&&e.memoizedState===null){var Z=e.alternate;if(Z!==null){var rt=Z.memoizedState;if(rt!==null){var ct=rt.dehydrated;ct!==null&&Ic(ct)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(a(163))}le||e.flags&512&&Xs(e)}catch(pt){It(e,e.return,pt)}}if(e===t){ut=null;break}if(n=e.sibling,n!==null){n.return=e.return,ut=n;break}ut=e.return}}function hl(t){for(;ut!==null;){var e=ut;if(e===t){ut=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ut=n;break}ut=e.return}}function dl(t){for(;ut!==null;){var e=ut;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Mi(4,e)}catch(Z){It(e,n,Z)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(Z){It(e,i,Z)}}var u=e.return;try{Xs(e)}catch(Z){It(e,u,Z)}break;case 5:var L=e.return;try{Xs(e)}catch(Z){It(e,L,Z)}}}catch(Z){It(e,e.return,Z)}if(e===t){ut=null;break}var q=e.sibling;if(q!==null){q.return=e.return,ut=q;break}ut=e.return}}var bi=0,Li=1,Ii=2,Oi=3,Gi=4;if(typeof Symbol=="function"&&Symbol.for){var ur=Symbol.for;bi=ur("selector.component"),Li=ur("selector.has_pseudo_class"),Ii=ur("selector.role"),Oi=ur("selector.test_id"),Gi=ur("selector.text")}function $s(t){var e=kt(t);if(e!=null){if(typeof e.memoizedProps["data-testname"]!="string")throw Error(a(364));return e}if(t=vn(t),t===null)throw Error(a(362));return t.stateNode.current}function ta(t,e){switch(e.$$typeof){case bi:if(t.type===e.value)return!0;break;case Li:t:{e=e.value,t=[t,0];for(var n=0;n<t.length;){var r=t[n++],i=t[n++],u=e[i];if(r.tag!==5||!ee(r)){for(;u!=null&&ta(r,u);)i++,u=e[i];if(i===e.length){e=!0;break t}else for(r=r.child;r!==null;)t.push(r,i),r=r.sibling}}e=!1}return e;case Ii:if(t.tag===5&&Ke(t.stateNode,e.value))return!0;break;case Gi:if((t.tag===5||t.tag===6)&&(t=_e(t),t!==null&&0<=t.indexOf(e.value)))return!0;break;case Oi:if(t.tag===5&&(t=t.memoizedProps["data-testname"],typeof t=="string"&&t.toLowerCase()===e.value.toLowerCase()))return!0;break;default:throw Error(a(365))}return!1}function ea(t){switch(t.$$typeof){case bi:return"<"+(z(t.value)||"Unknown")+">";case Li:return":has("+(ea(t)||"")+")";case Ii:return'[role="'+t.value+'"]';case Gi:return'"'+t.value+'"';case Oi:return'[data-testname="'+t.value+'"]';default:throw Error(a(365))}}function fl(t,e){var n=[];t=[t,0];for(var r=0;r<t.length;){var i=t[r++],u=t[r++],L=e[u];if(i.tag!==5||!ee(i)){for(;L!=null&&ta(i,L);)u++,L=e[u];if(u===e.length)n.push(i);else for(i=i.child;i!==null;)t.push(i,u),i=i.sibling}}return n}function na(t,e){if(!jt)throw Error(a(363));t=$s(t),t=fl(t,e),e=[],t=Array.from(t);for(var n=0;n<t.length;){var r=t[n++];if(r.tag===5)ee(r)||e.push(r.stateNode);else for(r=r.child;r!==null;)t.push(r),r=r.sibling}return e}var _h=Math.ceil,Di=f.ReactCurrentDispatcher,ra=f.ReactCurrentOwner,zt=f.ReactCurrentBatchConfig,_t=0,Xt=null,Vt=null,te=0,we=0,Wn=sn(0),qt=0,cr=null,kn=0,Ui=0,ia=0,hr=null,ge=null,sa=0,aa=1/0,$e=null;function qn(){aa=Kt()+500}var zi=!1,oa=null,un=null,Bi=!1,cn=null,Vi=0,dr=0,la=null,Hi=-1,Wi=0;function ue(){return(_t&6)!==0?Kt():Hi!==-1?Hi:Hi=Kt()}function hn(t){return(t.mode&1)===0?1:(_t&2)!==0&&te!==0?te&-te:eh.transition!==null?(Wi===0&&(Wi=Qa()),Wi):(t=wt,t!==0?t:Ht())}function Fe(t,e,n,r){if(50<dr)throw dr=0,la=null,Error(a(185));Qn(t,n,r),((_t&2)===0||t!==Xt)&&(t===Xt&&((_t&2)===0&&(Ui|=n),qt===4&&dn(t,te)),pe(t,r),n===1&&_t===0&&(e.mode&1)===0&&(qn(),ci&&ze()))}function pe(t,e){var n=t.callbackNode;jc(t,e);var r=li(t,t===Xt?te:0);if(r===0)n!==null&&Za(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Za(n),e===1)t.tag===0?th(pl.bind(null,t)):$a(pl.bind(null,t)),Ot?rn(function(){(_t&6)===0&&ze()}):hs(ds,ze),n=null;else{switch(Ja(r)){case 1:n=ds;break;case 4:n=Qc;break;case 16:n=fs;break;case 536870912:n=Jc;break;default:n=fs}n=Pl(n,gl.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function gl(t,e){if(Hi=-1,Wi=0,(_t&6)!==0)throw Error(a(327));var n=t.callbackNode;if(Tn()&&t.callbackNode!==n)return null;var r=li(t,t===Xt?te:0);if(r===0)return null;if((r&30)!==0||(r&t.expiredLanes)!==0||e)e=qi(t,r);else{e=r;var i=_t;_t|=2;var u=vl();(Xt!==t||te!==e)&&($e=null,qn(),En(t,e));do try{wh();break}catch(q){yl(t,q)}while(!0);Cs(),Di.current=u,_t=i,Vt!==null?e=0:(Xt=null,te=0,e=qt)}if(e!==0){if(e===2&&(i=ls(t),i!==0&&(r=i,e=ua(t,i))),e===1)throw n=cr,En(t,0),dn(t,r),pe(t,Kt()),n;if(e===6)dn(t,r);else{if(i=t.current.alternate,(r&30)===0&&!Sh(i)&&(e=qi(t,r),e===2&&(u=ls(t),u!==0&&(r=u,e=ua(t,u))),e===1))throw n=cr,En(t,0),dn(t,r),pe(t,Kt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(a(345));case 2:Rn(t,ge,$e);break;case 3:if(dn(t,r),(r&130023424)===r&&(e=sa+500-Kt(),10<e)){if(li(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){ue(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=D(Rn.bind(null,t,ge,$e),e);break}Rn(t,ge,$e);break;case 4:if(dn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var L=31-Me(r);u=1<<L,L=e[L],L>i&&(i=L),r&=~u}if(r=i,r=Kt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*_h(r/1960))-r,10<r){t.timeoutHandle=D(Rn.bind(null,t,ge,$e),r);break}Rn(t,ge,$e);break;case 5:Rn(t,ge,$e);break;default:throw Error(a(329))}}}return pe(t,Kt()),t.callbackNode===n?gl.bind(null,t):null}function ua(t,e){var n=hr;return t.current.memoizedState.isDehydrated&&(En(t,e).flags|=256),t=qi(t,e),t!==2&&(e=ge,ge=n,e!==null&&ca(e)),t}function ca(t){ge===null?ge=t:ge.push.apply(ge,t)}function Sh(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],u=i.getSnapshot;i=i.value;try{if(!be(u(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function dn(t,e){for(e&=~ia,e&=~Ui,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Me(e),r=1<<n;t[n]=-1,e&=~r}}function pl(t){if((_t&6)!==0)throw Error(a(327));Tn();var e=li(t,0);if((e&1)===0)return pe(t,Kt()),null;var n=qi(t,e);if(t.tag!==0&&n===2){var r=ls(t);r!==0&&(e=r,n=ua(t,r))}if(n===1)throw n=cr,En(t,0),dn(t,e),pe(t,Kt()),n;if(n===6)throw Error(a(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Rn(t,ge,$e),pe(t,Kt()),null}function ml(t){cn!==null&&cn.tag===0&&(_t&6)===0&&Tn();var e=_t;_t|=1;var n=zt.transition,r=wt;try{if(zt.transition=null,wt=1,t)return t()}finally{wt=r,zt.transition=n,_t=e,(_t&6)===0&&ze()}}function ha(){we=Wn.current,Mt(Wn)}function En(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==it&&(t.timeoutHandle=it,Q(n)),Vt!==null)for(n=Vt.return;n!==null;){var r=n;switch(ms(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ii();break;case 3:Bn(),Mt(he),Mt(se),Ns();break;case 5:Rs(r);break;case 4:Bn();break;case 13:Mt(Gt);break;case 19:Mt(Gt);break;case 10:ws(r.type._context);break;case 22:case 23:ha()}n=n.return}if(Xt=t,Vt=t=fn(t.current,null),te=we=e,qt=0,cr=null,ia=Ui=kn=0,ge=hr=null,xn!==null){for(e=0;e<xn.length;e++)if(n=xn[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,u=n.pending;if(u!==null){var L=u.next;u.next=i,r.next=L}n.pending=r}xn=null}return t}function yl(t,e){do{var n=Vt;try{if(Cs(),Ci.current=ki,wi){for(var r=Dt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}wi=!1}if(Pn=0,Yt=Wt=Dt=null,er=!1,nr=0,ra.current=null,n===null||n.return===null){qt=1,cr=e,Vt=null;break}t:{var u=t,L=n.return,q=n,Z=e;if(e=te,q.flags|=32768,Z!==null&&typeof Z=="object"&&typeof Z.then=="function"){var rt=Z,ct=q,pt=ct.tag;if((ct.mode&1)===0&&(pt===0||pt===11||pt===15)){var ot=ct.alternate;ot?(ct.updateQueue=ot.updateQueue,ct.memoizedState=ot.memoizedState,ct.lanes=ot.lanes):(ct.updateQueue=null,ct.memoizedState=null)}var bt=Vo(L);if(bt!==null){bt.flags&=-257,Ho(bt,L,q,u,e),bt.mode&1&&Bo(u,rt,e),e=bt,Z=rt;var Rt=e.updateQueue;if(Rt===null){var me=new Set;me.add(Z),e.updateQueue=me}else Rt.add(Z);break t}else{if((e&1)===0){Bo(u,rt,e),da();break t}Z=Error(a(426))}}else if(Lt&&q.mode&1){var tn=Vo(L);if(tn!==null){(tn.flags&65536)===0&&(tn.flags|=256),Ho(tn,L,q,u,e),_s(Vn(Z,q));break t}}u=Z=Vn(Z,q),qt!==4&&(qt=2),hr===null?hr=[u]:hr.push(u),u=L;do{switch(u.tag){case 3:u.flags|=65536,e&=-e,u.lanes|=e;var J=Uo(u,Z,e);ho(u,J);break t;case 1:q=Z;var j=u.type,$=u.stateNode;if((u.flags&128)===0&&(typeof j.getDerivedStateFromError=="function"||$!==null&&typeof $.componentDidCatch=="function"&&(un===null||!un.has($)))){u.flags|=65536,e&=-e,u.lanes|=e;var lt=zo(u,q,e);ho(u,lt);break t}}u=u.return}while(u!==null)}Sl(n)}catch(dt){e=dt,Vt===n&&n!==null&&(Vt=n=n.return);continue}break}while(!0)}function vl(){var t=Di.current;return Di.current=ki,t===null?ki:t}function da(){(qt===0||qt===3||qt===2)&&(qt=4),Xt===null||(kn&268435455)===0&&(Ui&268435455)===0||dn(Xt,te)}function qi(t,e){var n=_t;_t|=2;var r=vl();(Xt!==t||te!==e)&&($e=null,En(t,e));do try{Ch();break}catch(i){yl(t,i)}while(!0);if(Cs(),_t=n,Di.current=r,Vt!==null)throw Error(a(261));return Xt=null,te=0,qt}function Ch(){for(;Vt!==null;)_l(Vt)}function wh(){for(;Vt!==null&&!Yc();)_l(Vt)}function _l(t){var e=xl(t.alternate,t,we);t.memoizedProps=t.pendingProps,e===null?Sl(t):Vt=e,ra.current=null}function Sl(t){var e=t;do{var n=e.alternate;if(t=e.return,(e.flags&32768)===0){if(n=gh(n,e,we),n!==null){Vt=n;return}}else{if(n=ph(n,e),n!==null){n.flags&=32767,Vt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{qt=6,Vt=null;return}}if(e=e.sibling,e!==null){Vt=e;return}Vt=e=t}while(e!==null);qt===0&&(qt=5)}function Rn(t,e,n){var r=wt,i=zt.transition;try{zt.transition=null,wt=1,xh(t,e,n,r)}finally{zt.transition=i,wt=r}return null}function xh(t,e,n,r){do Tn();while(cn!==null);if((_t&6)!==0)throw Error(a(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(a(177));t.callbackNode=null,t.callbackPriority=0;var u=n.lanes|n.childLanes;if(Kc(t,u),t===Xt&&(Vt=Xt=null,te=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||Bi||(Bi=!0,Pl(fs,function(){return Tn(),null})),u=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||u){u=zt.transition,zt.transition=null;var L=wt;wt=1;var q=_t;_t|=4,ra.current=null,yh(t,n),ll(n,t),N(t.containerInfo),t.current=n,vh(n),Xc(),_t=q,wt=L,zt.transition=u}else t.current=n;if(Bi&&(Bi=!1,cn=t,Vi=i),u=t.pendingLanes,u===0&&(un=null),Zc(n.stateNode),pe(t,Kt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(zi)throw zi=!1,t=oa,oa=null,t;return(Vi&1)!==0&&t.tag!==0&&Tn(),u=t.pendingLanes,(u&1)!==0?t===la?dr++:(dr=0,la=t):dr=0,ze(),null}function Tn(){if(cn!==null){var t=Ja(Vi),e=zt.transition,n=wt;try{if(zt.transition=null,wt=16>t?16:t,cn===null)var r=!1;else{if(t=cn,cn=null,Vi=0,(_t&6)!==0)throw Error(a(331));var i=_t;for(_t|=4,ut=t.current;ut!==null;){var u=ut,L=u.child;if((ut.flags&16)!==0){var q=u.deletions;if(q!==null){for(var Z=0;Z<q.length;Z++){var rt=q[Z];for(ut=rt;ut!==null;){var ct=ut;switch(ct.tag){case 0:case 11:case 15:lr(8,ct,u)}var pt=ct.child;if(pt!==null)pt.return=ct,ut=pt;else for(;ut!==null;){ct=ut;var ot=ct.sibling,bt=ct.return;if(il(ct),ct===rt){ut=null;break}if(ot!==null){ot.return=bt,ut=ot;break}ut=bt}}}var Rt=u.alternate;if(Rt!==null){var me=Rt.child;if(me!==null){Rt.child=null;do{var tn=me.sibling;me.sibling=null,me=tn}while(me!==null)}}ut=u}}if((u.subtreeFlags&2064)!==0&&L!==null)L.return=u,ut=L;else t:for(;ut!==null;){if(u=ut,(u.flags&2048)!==0)switch(u.tag){case 0:case 11:case 15:lr(9,u,u.return)}var J=u.sibling;if(J!==null){J.return=u.return,ut=J;break t}ut=u.return}}var j=t.current;for(ut=j;ut!==null;){L=ut;var $=L.child;if((L.subtreeFlags&2064)!==0&&$!==null)$.return=L,ut=$;else t:for(L=j;ut!==null;){if(q=ut,(q.flags&2048)!==0)try{switch(q.tag){case 0:case 11:case 15:Mi(9,q)}}catch(dt){It(q,q.return,dt)}if(q===L){ut=null;break t}var lt=q.sibling;if(lt!==null){lt.return=q.return,ut=lt;break t}ut=q.return}}if(_t=i,ze(),Ue&&typeof Ue.onPostCommitFiberRoot=="function")try{Ue.onPostCommitFiberRoot(ui,t)}catch{}r=!0}return r}finally{wt=n,zt.transition=e}}return!1}function Cl(t,e,n){e=Vn(n,e),e=Uo(t,e,1),t=ln(t,e,1),e=ue(),t!==null&&(Qn(t,1,e),pe(t,e))}function It(t,e,n){if(t.tag===3)Cl(t,t,n);else for(;e!==null;){if(e.tag===3){Cl(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(un===null||!un.has(r))){t=Vn(n,t),t=zo(e,t,1),e=ln(e,t,1),t=ue(),e!==null&&(Qn(e,1,t),pe(e,t));break}}e=e.return}}function Ph(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ue(),t.pingedLanes|=t.suspendedLanes&n,Xt===t&&(te&n)===n&&(qt===4||qt===3&&(te&130023424)===te&&500>Kt()-sa?En(t,0):ia|=n),pe(t,e)}function wl(t,e){e===0&&((t.mode&1)===0?e=1:(e=oi,oi<<=1,(oi&130023424)===0&&(oi=4194304)));var n=ue();t=Be(t,e),t!==null&&(Qn(t,e,n),pe(t,n))}function kh(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),wl(t,n)}function Eh(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(a(314))}r!==null&&r.delete(e),wl(t,n)}var xl;xl=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||he.current)fe=!0;else{if((t.lanes&n)===0&&(e.flags&128)===0)return fe=!1,fh(t,e,n);fe=(t.flags&131072)!==0}else fe=!1,Lt&&(e.flags&1048576)!==0&&to(e,di,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ti(t,e),t=e.pendingProps;var i=bn(e,se.current);Un(e,n),i=Ms(null,e,r,t,i,n);var u=bs();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,de(r)?(u=!0,si(e)):u=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,ks(e),i.updater=Ei,e.stateNode=i,i._reactInternals=e,Us(e,r,t,n),e=Hs(null,e,r,!0,u,n)):(e.tag=0,Lt&&u&&ps(e),ce(null,e,i,n),e=e.child),e;case 16:r=e.elementType;t:{switch(Ti(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Th(r),t=Ie(r,t),i){case 0:e=Vs(null,e,r,t,n);break t;case 1:e=Xo(null,e,r,t,n);break t;case 11:e=Wo(null,e,r,t,n);break t;case 14:e=qo(null,e,r,Ie(r.type,t),n);break t}throw Error(a(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ie(r,i),Vs(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ie(r,i),Xo(t,e,r,i,n);case 3:t:{if(Qo(e),t===null)throw Error(a(387));r=e.pendingProps,u=e.memoizedState,i=u.element,co(t,e),_i(e,r,null,n);var L=e.memoizedState;if(r=L.element,ht&&u.isDehydrated)if(u={element:r,isDehydrated:!1,cache:L.cache,pendingSuspenseBoundaries:L.pendingSuspenseBoundaries,transitions:L.transitions},e.updateQueue.baseState=u,e.memoizedState=u,e.flags&256){i=Vn(Error(a(423)),e),e=Jo(t,e,r,n,i);break t}else if(r!==i){i=Vn(Error(a(424)),e),e=Jo(t,e,r,n,i);break t}else for(ht&&(Ee=Tc(e.stateNode.containerInfo),Ce=e,Lt=!0,Le=null,Jn=!1),n=oo(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(On(),r===i){e=Ze(t,e,n);break t}ce(t,e,r,n)}e=e.child}return e;case 5:return go(e),t===null&&vs(e),r=e.type,i=e.pendingProps,u=t!==null?t.memoizedProps:null,L=i.children,nt(r,i)?L=null:u!==null&&nt(r,u)&&(e.flags|=32),Yo(t,e),ce(t,e,L,n),e.child;case 6:return t===null&&vs(e),null;case 13:return Zo(t,e,n);case 4:return Es(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Gn(e,null,r,n):ce(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ie(r,i),Wo(t,e,r,i,n);case 7:return ce(t,e,e.pendingProps,n),e.child;case 8:return ce(t,e,e.pendingProps.children,n),e.child;case 12:return ce(t,e,e.pendingProps.children,n),e.child;case 10:t:{if(r=e.type._context,i=e.pendingProps,u=e.memoizedProps,L=i.value,lo(e,r,L),u!==null)if(be(u.value,L)){if(u.children===i.children&&!he.current){e=Ze(t,e,n);break t}}else for(u=e.child,u!==null&&(u.return=e);u!==null;){var q=u.dependencies;if(q!==null){L=u.child;for(var Z=q.firstContext;Z!==null;){if(Z.context===r){if(u.tag===1){Z=Je(-1,n&-n),Z.tag=2;var rt=u.updateQueue;if(rt!==null){rt=rt.shared;var ct=rt.pending;ct===null?Z.next=Z:(Z.next=ct.next,ct.next=Z),rt.pending=Z}}u.lanes|=n,Z=u.alternate,Z!==null&&(Z.lanes|=n),xs(u.return,n,e),q.lanes|=n;break}Z=Z.next}}else if(u.tag===10)L=u.type===e.type?null:u.child;else if(u.tag===18){if(L=u.return,L===null)throw Error(a(341));L.lanes|=n,q=L.alternate,q!==null&&(q.lanes|=n),xs(L,n,e),L=u.sibling}else L=u.child;if(L!==null)L.return=u;else for(L=u;L!==null;){if(L===e){L=null;break}if(u=L.sibling,u!==null){u.return=L.return,L=u;break}L=L.return}u=L}ce(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Un(e,n),i=Re(i),r=r(i),e.flags|=1,ce(t,e,r,n),e.child;case 14:return r=e.type,i=Ie(r,e.pendingProps),i=Ie(r.type,i),qo(t,e,r,i,n);case 15:return jo(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ie(r,i),Ti(t,e),e.tag=1,de(r)?(t=!0,si(e)):t=!1,Un(e,n),Go(e,r,i),Us(e,r,i,n),Hs(null,e,r,!0,t,n);case 19:return tl(t,e,n);case 22:return Ko(t,e,n)}throw Error(a(156,e.tag))};function Pl(t,e){return hs(t,e)}function Rh(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ae(t,e,n,r){return new Rh(t,e,n,r)}function fa(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Th(t){if(typeof t=="function")return fa(t)?1:0;if(t!=null){if(t=t.$$typeof,t===C)return 11;if(t===h)return 14}return 2}function fn(t,e){var n=t.alternate;return n===null?(n=Ae(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ji(t,e,n,r,i,u){var L=2;if(r=t,typeof t=="function")fa(t)&&(L=1);else if(typeof t=="string")L=5;else t:switch(t){case y:return Nn(n.children,i,u,e);case w:L=8,i|=8;break;case c:return t=Ae(12,n,e,i|2),t.elementType=c,t.lanes=u,t;case k:return t=Ae(13,n,e,i),t.elementType=k,t.lanes=u,t;case b:return t=Ae(19,n,e,i),t.elementType=b,t.lanes=u,t;case v:return Ki(n,i,u,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case l:L=10;break t;case d:L=9;break t;case C:L=11;break t;case h:L=14;break t;case s:L=16,r=null;break t}throw Error(a(130,t==null?t:typeof t,""))}return e=Ae(L,n,e,i),e.elementType=t,e.type=r,e.lanes=u,e}function Nn(t,e,n,r){return t=Ae(7,t,r,e),t.lanes=n,t}function Ki(t,e,n,r){return t=Ae(22,t,r,e),t.elementType=v,t.lanes=n,t.stateNode={isHidden:!1},t}function ga(t,e,n){return t=Ae(6,t,null,e),t.lanes=n,t}function pa(t,e,n){return e=Ae(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Nh(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=it,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=us(0),this.expirationTimes=us(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=us(0),this.identifierPrefix=r,this.onRecoverableError=i,ht&&(this.mutableSourceEagerHydrationData=null)}function kl(t,e,n,r,i,u,L,q,Z){return t=new Nh(t,e,n,q,Z),e===1?(e=1,u===!0&&(e|=8)):e=0,u=Ae(3,null,null,e),t.current=u,u.stateNode=t,u.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ks(u),t}function El(t){if(!t)return an;t=t._reactInternals;t:{if(T(t)!==t||t.tag!==1)throw Error(a(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break t;case 1:if(de(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break t}}e=e.return}while(e!==null);throw Error(a(171))}if(t.tag===1){var n=t.type;if(de(n))return Ya(t,n,e)}return e}function Rl(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(a(188)):(t=Object.keys(t).join(","),Error(a(268,t)));return t=B(e),t===null?null:t.stateNode}function Tl(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Yi(t,e){Tl(t,e),(t=t.alternate)&&Tl(t,e)}function Fh(t){return t=B(t),t===null?null:t.stateNode}function Ah(){return null}return A.attemptContinuousHydration=function(t){if(t.tag===13){var e=Be(t,134217728);if(e!==null){var n=ue();Fe(e,t,134217728,n)}Yi(t,134217728)}},A.attemptDiscreteHydration=function(t){if(t.tag===13){var e=Be(t,1);if(e!==null){var n=ue();Fe(e,t,1,n)}Yi(t,1)}},A.attemptHydrationAtCurrentPriority=function(t){if(t.tag===13){var e=hn(t),n=Be(t,e);if(n!==null){var r=ue();Fe(n,t,e,r)}Yi(t,e)}},A.attemptSynchronousHydration=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Xn(e.pendingLanes);n!==0&&(cs(e,n|1),pe(e,Kt()),(_t&6)===0&&(qn(),ze()))}break;case 13:ml(function(){var r=Be(t,1);if(r!==null){var i=ue();Fe(r,t,1,i)}}),Yi(t,1)}},A.batchedUpdates=function(t,e){var n=_t;_t|=1;try{return t(e)}finally{_t=n,_t===0&&(qn(),ci&&ze())}},A.createComponentSelector=function(t){return{$$typeof:bi,value:t}},A.createContainer=function(t,e,n,r,i,u,L){return kl(t,e,!1,null,n,r,i,u,L)},A.createHasPseudoClassSelector=function(t){return{$$typeof:Li,value:t}},A.createHydrationContainer=function(t,e,n,r,i,u,L,q,Z){return t=kl(n,r,!0,t,i,u,L,q,Z),t.context=El(null),n=t.current,r=ue(),i=hn(n),u=Je(r,i),u.callback=e??null,ln(n,u,i),t.current.lanes=i,Qn(t,i,r),pe(t,r),t},A.createPortal=function(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:m,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}},A.createRoleSelector=function(t){return{$$typeof:Ii,value:t}},A.createTestNameSelector=function(t){return{$$typeof:Oi,value:t}},A.createTextSelector=function(t){return{$$typeof:Gi,value:t}},A.deferredUpdates=function(t){var e=wt,n=zt.transition;try{return zt.transition=null,wt=16,t()}finally{wt=e,zt.transition=n}},A.discreteUpdates=function(t,e,n,r,i){var u=wt,L=zt.transition;try{return zt.transition=null,wt=1,t(e,n,r,i)}finally{wt=u,zt.transition=L,_t===0&&qn()}},A.findAllNodes=na,A.findBoundingRects=function(t,e){if(!jt)throw Error(a(363));e=na(t,e),t=[];for(var n=0;n<e.length;n++)t.push(Tt(e[n]));for(e=t.length-1;0<e;e--){n=t[e];for(var r=n.x,i=r+n.width,u=n.y,L=u+n.height,q=e-1;0<=q;q--)if(e!==q){var Z=t[q],rt=Z.x,ct=rt+Z.width,pt=Z.y,ot=pt+Z.height;if(r>=rt&&u>=pt&&i<=ct&&L<=ot){t.splice(e,1);break}else if(r!==rt||n.width!==Z.width||ot<u||pt>L){if(!(u!==pt||n.height!==Z.height||ct<r||rt>i)){rt>r&&(Z.width+=rt-r,Z.x=r),ct<i&&(Z.width=i-rt),t.splice(e,1);break}}else{pt>u&&(Z.height+=pt-u,Z.y=u),ot<L&&(Z.height=L-pt),t.splice(e,1);break}}}return t},A.findHostInstance=Rl,A.findHostInstanceWithNoPortals=function(t){return t=U(t),t=t!==null?Y(t):null,t===null?null:t.stateNode},A.findHostInstanceWithWarning=function(t){return Rl(t)},A.flushControlled=function(t){var e=_t;_t|=1;var n=zt.transition,r=wt;try{zt.transition=null,wt=1,t()}finally{wt=r,zt.transition=n,_t=e,_t===0&&(qn(),ze())}},A.flushPassiveEffects=Tn,A.flushSync=ml,A.focusWithin=function(t,e){if(!jt)throw Error(a(363));for(t=$s(t),e=fl(t,e),e=Array.from(e),t=0;t<e.length;){var n=e[t++];if(!ee(n)){if(n.tag===5&&ne(n.stateNode))return!0;for(n=n.child;n!==null;)e.push(n),n=n.sibling}}return!1},A.getCurrentUpdatePriority=function(){return wt},A.getFindAllNodesFailureDescription=function(t,e){if(!jt)throw Error(a(363));var n=0,r=[];t=[$s(t),0];for(var i=0;i<t.length;){var u=t[i++],L=t[i++],q=e[L];if((u.tag!==5||!ee(u))&&(ta(u,q)&&(r.push(ea(q)),L++,L>n&&(n=L)),L<e.length))for(u=u.child;u!==null;)t.push(u,L),u=u.sibling}if(n<e.length){for(t=[];n<e.length;n++)t.push(ea(e[n]));return`findAllNodes was able to match part of the selector:
  `+(r.join(" > ")+`

No matching component was found for:
  `)+t.join(" > ")}return null},A.getPublicRootInstance=function(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return et(t.child.stateNode);default:return t.child.stateNode}},A.injectIntoDevTools=function(t){if(t={bundleType:t.bundleType,version:t.version,rendererPackageName:t.rendererPackageName,rendererConfig:t.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:f.ReactCurrentDispatcher,findHostInstanceByFiber:Fh,findFiberByHostInstance:t.findFiberByHostInstance||Ah,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")t=!1;else{var e=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(e.isDisabled||!e.supportsFiber)t=!0;else{try{ui=e.inject(t),Ue=e}catch{}t=!!e.checkDCE}}return t},A.isAlreadyRendering=function(){return!1},A.observeVisibleRects=function(t,e,n,r){if(!jt)throw Error(a(363));t=na(t,e);var i=De(t,n,r).disconnect;return{disconnect:function(){i()}}},A.registerMutableSourceForHydration=function(t,e){var n=e._getVersion;n=n(e._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[e,n]:t.mutableSourceEagerHydrationData.push(e,n)},A.runWithPriority=function(t,e){var n=wt;try{return wt=t,e()}finally{wt=n}},A.shouldError=function(){return null},A.shouldSuspend=function(){return!1},A.updateContainer=function(t,e,n,r){var i=e.current,u=ue(),L=hn(i);return n=El(n),e.context===null?e.context=n:e.pendingContext=n,e=Je(u,L),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ln(i,e,L),t!==null&&(Fe(t,i,L,u),vi(t,i,L)),L},A}),Ta}var Gu;function Rd(){return Gu||(Gu=1,ka.exports=Ed()),ka.exports}var Td=Rd();const Nd=tc(Td);var Na={exports:{}},mn={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Du;function Fd(){return Du||(Du=1,mn.ConcurrentRoot=1,mn.ContinuousEventPriority=4,mn.DefaultEventPriority=16,mn.DiscreteEventPriority=1,mn.IdleEventPriority=536870912,mn.LegacyRoot=0),mn}var Uu;function Ad(){return Uu||(Uu=1,Na.exports=Fd()),Na.exports}var oc=Ad(),Md=vt();const zu={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let Bu=!1,Vu=!1;const Ua=".react-konva-event",bd=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,Ld=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,Id={};function $i(o,p,A=Id){if(!Bu&&"zIndex"in p&&(console.warn(Ld),Bu=!0),!Vu&&p.draggable){var O=p.x!==void 0||p.y!==void 0,R=p.onDragEnd||p.onDragMove;O&&!R&&(console.warn(bd),Vu=!0)}for(var S in A)if(!zu[S]){var a=S.slice(0,2)==="on",f=A[S]!==p[S];if(a&&f){var g=S.substr(2).toLowerCase();g.substr(0,7)==="content"&&(g="content"+g.substr(7,1).toUpperCase()+g.substr(8)),o.off(g,A[S])}var m=!p.hasOwnProperty(S);m&&o.setAttr(S,void 0)}var y=p._useStrictMode,w={},c=!1;const l={};for(var S in p)if(!zu[S]){var a=S.slice(0,2)==="on",d=A[S]!==p[S];if(a&&d){var g=S.substr(2).toLowerCase();g.substr(0,7)==="content"&&(g="content"+g.substr(7,1).toUpperCase()+g.substr(8)),p[S]&&(l[g]=p[S])}!a&&(p[S]!==A[S]||y&&p[S]!==o.getAttr(S))&&(c=!0,w[S]=p[S])}c&&(o.setAttrs(w),yn(o));for(var g in l)o.on(g+Ua,l[g])}function yn(o){if(!Md.Konva.autoDrawEnabled){var p=o.getLayer()||o.getStage();p&&p.batchDraw()}}var Fa={exports:{}},Aa={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hu;function Od(){return Hu||(Hu=1,(function(o){function p(_,F){var N=_.length;_.push(F);t:for(;0<N;){var G=N-1>>>1,K=_[G];if(0<R(K,F))_[G]=F,_[N]=K,N=G;else break t}}function A(_){return _.length===0?null:_[0]}function O(_){if(_.length===0)return null;var F=_[0],N=_.pop();if(N!==F){_[0]=N;t:for(var G=0,K=_.length,H=K>>>1;G<H;){var tt=2*(G+1)-1,nt=_[tt],X=tt+1,D=_[X];if(0>R(nt,N))X<K&&0>R(D,nt)?(_[G]=D,_[X]=N,G=X):(_[G]=nt,_[tt]=N,G=tt);else if(X<K&&0>R(D,N))_[G]=D,_[X]=N,G=X;else break t}}return F}function R(_,F){var N=_.sortIndex-F.sortIndex;return N!==0?N:_.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var S=performance;o.unstable_now=function(){return S.now()}}else{var a=Date,f=a.now();o.unstable_now=function(){return a.now()-f}}var g=[],m=[],y=1,w=null,c=3,l=!1,d=!1,C=!1,k=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,h=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function s(_){for(var F=A(m);F!==null;){if(F.callback===null)O(m);else if(F.startTime<=_)O(m),F.sortIndex=F.expirationTime,p(g,F);else break;F=A(m)}}function v(_){if(C=!1,s(_),!d)if(A(g)!==null)d=!0,et(P);else{var F=A(m);F!==null&&x(v,F.startTime-_)}}function P(_,F){d=!1,C&&(C=!1,b(E),E=-1),l=!0;var N=c;try{for(s(F),w=A(g);w!==null&&(!(w.expirationTime>F)||_&&!U());){var G=w.callback;if(typeof G=="function"){w.callback=null,c=w.priorityLevel;var K=G(w.expirationTime<=F);F=o.unstable_now(),typeof K=="function"?w.callback=K:w===A(g)&&O(g),s(F)}else O(g);w=A(g)}if(w!==null)var H=!0;else{var tt=A(m);tt!==null&&x(v,tt.startTime-F),H=!1}return H}finally{w=null,c=N,l=!1}}var I=!1,z=null,E=-1,T=5,M=-1;function U(){return!(o.unstable_now()-M<T)}function B(){if(z!==null){var _=o.unstable_now();M=_;var F=!0;try{F=z(!0,_)}finally{F?W():(I=!1,z=null)}}else I=!1}var W;if(typeof h=="function")W=function(){h(B)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,V=Y.port2;Y.port1.onmessage=B,W=function(){V.postMessage(null)}}else W=function(){k(B,0)};function et(_){z=_,I||(I=!0,W())}function x(_,F){E=k(function(){_(o.unstable_now())},F)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(_){_.callback=null},o.unstable_continueExecution=function(){d||l||(d=!0,et(P))},o.unstable_forceFrameRate=function(_){0>_||125<_?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<_?Math.floor(1e3/_):5},o.unstable_getCurrentPriorityLevel=function(){return c},o.unstable_getFirstCallbackNode=function(){return A(g)},o.unstable_next=function(_){switch(c){case 1:case 2:case 3:var F=3;break;default:F=c}var N=c;c=F;try{return _()}finally{c=N}},o.unstable_pauseExecution=function(){},o.unstable_requestPaint=function(){},o.unstable_runWithPriority=function(_,F){switch(_){case 1:case 2:case 3:case 4:case 5:break;default:_=3}var N=c;c=_;try{return F()}finally{c=N}},o.unstable_scheduleCallback=function(_,F,N){var G=o.unstable_now();switch(typeof N=="object"&&N!==null?(N=N.delay,N=typeof N=="number"&&0<N?G+N:G):N=G,_){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=N+K,_={id:y++,callback:F,priorityLevel:_,startTime:N,expirationTime:K,sortIndex:-1},N>G?(_.sortIndex=N,p(m,_),A(g)===null&&_===A(m)&&(C?(b(E),E=-1):C=!0,x(v,N-G))):(_.sortIndex=K,p(g,_),d||l||(d=!0,et(P))),_},o.unstable_shouldYield=U,o.unstable_wrapCallback=function(_){var F=c;return function(){var N=c;c=F;try{return _.apply(this,arguments)}finally{c=N}}}})(Aa)),Aa}var Wu;function Gd(){return Wu||(Wu=1,Fa.exports=Od()),Fa.exports}var Ma=Gd();const lc={},Dd={};ei.Node.prototype._applyProps=$i;function Ud(o,p){if(typeof p=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${p}`);return}o.add(p),yn(o)}function zd(o,p,A){let O=ei[o];O||(console.error(`Konva has no node with the type ${o}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${o}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),O=ei.Group);const R={},S={};for(var a in p){var f=a.slice(0,2)==="on";f?S[a]=p[a]:R[a]=p[a]}const g=new O(R);return $i(g,S),g}function Bd(o,p,A){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${o}"`)}function Vd(o,p,A){return!1}function Hd(o){return o}function Wd(){return null}function qd(){return null}function jd(o,p,A,O){return Dd}function Kd(){}function Yd(o){}function Xd(o,p){return!1}function Qd(){return lc}function Jd(){return lc}const Zd=setTimeout,$d=clearTimeout,t0=-1;function e0(o,p){return!1}const n0=!1,r0=!0,i0=!0;function s0(o,p){p.parent===o?p.moveToTop():o.add(p),yn(o)}function a0(o,p){p.parent===o?p.moveToTop():o.add(p),yn(o)}function uc(o,p,A){p._remove(),o.add(p),p.setZIndex(A.getZIndex()),yn(o)}function o0(o,p,A){uc(o,p,A)}function l0(o,p){p.destroy(),p.off(Ua),yn(o)}function u0(o,p){p.destroy(),p.off(Ua),yn(o)}function c0(o,p,A){console.error(`Text components are not yet supported in ReactKonva. You text is: "${A}"`)}function h0(o,p,A){}function d0(o,p,A,O,R){$i(o,R,O)}function f0(o){o.hide(),yn(o)}function g0(o){}function p0(o,p){(p.visible==null||p.visible)&&o.show()}function m0(o,p){}function y0(o){}function v0(){}const _0=()=>oc.DefaultEventPriority,S0=Object.freeze(Object.defineProperty({__proto__:null,appendChild:s0,appendChildToContainer:a0,appendInitialChild:Ud,cancelTimeout:$d,clearContainer:y0,commitMount:h0,commitTextUpdate:c0,commitUpdate:d0,createInstance:zd,createTextInstance:Bd,detachDeletedInstance:v0,finalizeInitialChildren:Vd,getChildHostContext:Jd,getCurrentEventPriority:_0,getPublicInstance:Hd,getRootHostContext:Qd,hideInstance:f0,hideTextInstance:g0,idlePriority:Ma.unstable_IdlePriority,insertBefore:uc,insertInContainerBefore:o0,isPrimaryRenderer:n0,noTimeout:t0,now:Ma.unstable_now,prepareForCommit:Wd,preparePortalMount:qd,prepareUpdate:jd,removeChild:l0,removeChildFromContainer:u0,resetAfterCommit:Kd,resetTextContent:Yd,run:Ma.unstable_runWithPriority,scheduleTimeout:Zd,shouldDeprioritizeSubtree:Xd,shouldSetTextContent:e0,supportsMutation:i0,unhideInstance:p0,unhideTextInstance:m0,warnsIfNotActing:r0},Symbol.toStringTag,{value:"Module"}));var C0=Object.defineProperty,w0=Object.defineProperties,x0=Object.getOwnPropertyDescriptors,qu=Object.getOwnPropertySymbols,P0=Object.prototype.hasOwnProperty,k0=Object.prototype.propertyIsEnumerable,ju=(o,p,A)=>p in o?C0(o,p,{enumerable:!0,configurable:!0,writable:!0,value:A}):o[p]=A,Ku=(o,p)=>{for(var A in p||(p={}))P0.call(p,A)&&ju(o,A,p[A]);if(qu)for(var A of qu(p))k0.call(p,A)&&ju(o,A,p[A]);return o},E0=(o,p)=>w0(o,x0(p)),Yu,Xu;typeof window<"u"&&((Yu=window.document)!=null&&Yu.createElement||((Xu=window.navigator)==null?void 0:Xu.product)==="ReactNative")?At.useLayoutEffect:At.useEffect;function cc(o,p,A){if(!o)return;if(A(o)===!0)return o;let O=o.child;for(;O;){const R=cc(O,p,A);if(R)return R;O=O.sibling}}function hc(o){try{return Object.defineProperties(o,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return o}}const Qu=console.error;console.error=function(){const o=[...arguments].join("");if(o!=null&&o.startsWith("Warning:")&&o.includes("useContext")){console.error=Qu;return}return Qu.apply(this,arguments)};const za=hc(At.createContext(null));class dc extends At.Component{render(){return At.createElement(za.Provider,{value:this._reactInternals},this.props.children)}}function R0(){const o=At.useContext(za);if(o===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const p=At.useId();return At.useMemo(()=>{for(const O of[o,o==null?void 0:o.alternate]){if(!O)continue;const R=cc(O,!1,S=>{let a=S.memoizedState;for(;a;){if(a.memoizedState===p)return!0;a=a.next}});if(R)return R}},[o,p])}function T0(){const o=R0(),[p]=At.useState(()=>new Map);p.clear();let A=o;for(;A;){if(A.type&&typeof A.type=="object"){const R=A.type._context===void 0&&A.type.Provider===A.type?A.type:A.type._context;R&&R!==za&&!p.has(R)&&p.set(R,At.useContext(hc(R)))}A=A.return}return p}function N0(){const o=T0();return At.useMemo(()=>Array.from(o.keys()).reduce((p,A)=>O=>At.createElement(p,null,At.createElement(A.Provider,E0(Ku({},O),{value:o.get(A)}))),p=>At.createElement(dc,Ku({},p))),[o])}function F0(o){const p=Jt.useRef({});return Jt.useLayoutEffect(()=>{p.current=o}),Jt.useLayoutEffect(()=>()=>{p.current={}},[]),p.current}const A0=o=>{const p=Jt.useRef(null),A=Jt.useRef(null),O=Jt.useRef(null),R=F0(o),S=N0(),a=f=>{const{forwardedRef:g}=o;g&&(typeof g=="function"?g(f):g.current=f)};return Jt.useLayoutEffect(()=>(A.current=new ei.Stage({width:o.width,height:o.height,container:p.current}),a(A.current),O.current=ti.createContainer(A.current,oc.LegacyRoot,!1,null),ti.updateContainer(Jt.createElement(S,{},o.children),O.current),()=>{ei.isBrowser&&(a(null),ti.updateContainer(null,O.current,null),A.current.destroy())}),[]),Jt.useLayoutEffect(()=>{a(A.current),$i(A.current,o,R),ti.updateContainer(Jt.createElement(S,{},o.children),O.current,null)}),Jt.createElement("div",{ref:p,id:o.id,accessKey:o.accessKey,className:o.className,role:o.role,style:o.style,tabIndex:o.tabIndex,title:o.title})},Ju="Layer",Zu="Rect",fc="Image",M0="Text",b0="Transformer",ti=Nd(S0);ti.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:Jt.version,rendererPackageName:"react-konva"});const L0=Jt.forwardRef((o,p)=>Jt.createElement(dc,{},Jt.createElement(A0,{...o,forwardedRef:p}))),gc=({trRef:o,isSelected:p})=>(At.useEffect(()=>{p&&o.current&&o.current.getLayer()&&o.current.getLayer().batchDraw()},[p]),p?Ft.jsx(b0,{ref:o,rotateEnabled:!0,anchorSize:14,anchorStroke:"#db2777",anchorFill:"white",anchorCornerRadius:10,borderStroke:"#db2777",borderDash:[4,4],keepRatio:!0,enabledAnchors:["top-left","top-right","bottom-left","bottom-right"]}):null),$u=({src:o,x:p,y:A,width:O,height:R,rotation:S,isSelected:a,onSelect:f,onChange:g})=>{const[m,y]=At.useState(null),w=At.useRef(null),c=At.useRef(null);return At.useEffect(()=>{const l=new window.Image;l.src=o,l.crossOrigin="anonymous",l.onload=()=>y(l)},[o]),At.useEffect(()=>{a&&c.current&&w.current&&c.current.nodes([w.current])},[a]),Ft.jsxs(Jt.Fragment,{children:[Ft.jsx(fc,{image:m||void 0,x:p,y:A,width:O,height:R,rotation:S,draggable:!0,ref:w,onClick:()=>f(),onTap:()=>f(),onDragEnd:l=>{g({position:{x:l.target.x(),y:l.target.y()}})},onTransformEnd:()=>{const l=w.current,d=l.scaleX(),C=l.scaleY();l.scaleX(1),l.scaleY(1),g({position:{x:l.x(),y:l.y()},size:{width:Math.max(20,l.width()*d),height:Math.max(20,l.height()*C)},rotation:l.rotation()})}}),Ft.jsx(gc,{trRef:c,isSelected:a})]})},I0=({text:o,fontFamily:p,color:A,x:O,y:R,rotation:S,isSelected:a,onSelect:f,onChange:g})=>{const m=At.useRef(null),y=At.useRef(null);return At.useEffect(()=>{a&&y.current&&m.current&&y.current.nodes([m.current])},[a]),Ft.jsxs(Jt.Fragment,{children:[Ft.jsx(M0,{text:o,x:O,y:R,rotation:S,fontSize:40,fontFamily:p,fill:A,draggable:!0,ref:m,onClick:()=>f(),onTap:()=>f(),onDragEnd:w=>{g({position:{x:w.target.x(),y:w.target.y()}})},onTransformEnd:()=>{const w=m.current;w.scaleX(1),w.scaleY(1),g({position:{x:w.x(),y:w.y()},rotation:w.rotation()})}}),Ft.jsx(gc,{trRef:y,isSelected:a})]})},O0=({width:o,height:p})=>{const A=[];for(let R=0;R<=o;R+=50)A.push(Ft.jsx(Zu,{x:R,y:0,width:1,height:p,fill:"rgba(219, 39, 119, 0.1)"},`v-${R}`));for(let R=0;R<=p;R+=50)A.push(Ft.jsx(Zu,{x:0,y:R,width:o,height:1,fill:"rgba(219, 39, 119, 0.1)"},`h-${R}`));return Ft.jsx(Jt.Fragment,{children:A})},nf=({backgroundImageUrl:o,elements:p,onUpdateElement:A,onSelectElement:O,selectedId:R,width:S,height:a,showAids:f})=>{const[g,m]=At.useState(null),y=At.useRef(null);At.useEffect(()=>{const c=new window.Image;c.src=o,c.crossOrigin="anonymous",c.onload=()=>m(c)},[o]);const w=c=>{c.target===c.target.getStage()&&O(null)};return Ft.jsxs("div",{className:"flex flex-col h-full w-full bg-white relative overflow-hidden",children:[Ft.jsxs("div",{className:"bg-pink-50 border-b border-pink-100 p-3 px-6 flex items-start gap-3 z-20",children:[Ft.jsx(Oh,{className:"text-pink-600 shrink-0 mt-0.5",size:18}),Ft.jsx("div",{className:"text-pink-800 text-[11px] font-bold uppercase tracking-tight",children:Ft.jsx("p",{children:"Letters: 2 lines, max 5 chars each  Embroidery: 1 line, max 12 chars"})})]}),Ft.jsxs("div",{className:"flex-1 flex items-center justify-center bg-white relative p-4",children:[Ft.jsx("div",{className:"absolute inset-0 opacity-[0.03] pointer-events-none overflow-hidden select-none flex flex-wrap justify-around items-center rotate-[-15deg]",children:Array.from({length:40}).map((c,l)=>Ft.jsx("span",{className:"text-2xl font-black text-slate-900 m-8",children:"STYLN"},l))}),Ft.jsxs(L0,{width:S,height:a,onMouseDown:w,onTouchStart:w,ref:y,className:"shadow-2xl bg-white rounded-2xl border border-slate-100 overflow-hidden",children:[Ft.jsxs(Ju,{children:[g&&Ft.jsx(fc,{image:g,width:S,height:a,listening:!1}),f&&Ft.jsx(O0,{width:S,height:a})]}),Ft.jsx(Ju,{children:p.map(c=>c.type==="addon"&&c.addon?Ft.jsx($u,{src:c.addon.imageUrl,x:c.position.x,y:c.position.y,width:c.size.width,height:c.size.height,rotation:c.rotation,isSelected:c.instanceId===R,onSelect:()=>O(c.instanceId),onChange:l=>A(c.instanceId,l)},c.instanceId):(c.type==="image"||c.type==="vinyl")&&c.imageUrl?Ft.jsx($u,{src:c.imageUrl,x:c.position.x,y:c.position.y,width:c.size.width,height:c.size.height,rotation:c.rotation,isSelected:c.instanceId===R,onSelect:()=>O(c.instanceId),onChange:l=>A(c.instanceId,l)},c.instanceId):c.type==="text"||c.type==="embroidery"?Ft.jsx(I0,{text:c.text,fontFamily:c.fontFamily,color:c.color,x:c.position.x,y:c.position.y,rotation:c.rotation,isSelected:c.instanceId===R,onSelect:()=>O(c.instanceId),onChange:l=>A(c.instanceId,l)},c.instanceId):null)})]})]})]})};export{nf as default};
